

<!doctype html>
<html class="no-js" lang="en" data-content_root="./">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="genindex.html" /><link rel="search" title="Search" href="search.html" /><link rel="next" title="falkordb" href="falkordb/modules.html" /><link rel="prev" title="graphrag_toolkit.lexical_graph.storage.vector package" href="graphrag_toolkit.lexical_graph.storage.vector.html" />

    <!-- Generated with Sphinx 8.2.3 and Furo 2024.08.06 -->
        <title>graphrag_toolkit.lexical_graph.utils package - graphrag-toolkit 3.6.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo.css?v=354aac6f" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo-extensions.css?v=302659d7" />
    <link rel="stylesheet" type="text/css" href="_static/css/custom.css?v=5c2e0e83" />
    <link rel="stylesheet" type="text/css" href="_static/css/dark_light_mode.css?v=33639cc8" />
    
    
<script src="https://prod.assets.shortbread.aws.dev/shortbread.js"></script>
<link href="https://prod.assets.shortbread.aws.dev/shortbread.css" rel="stylesheet">
</head>
  <body>
     
<svg xmlns="http://www.w3.org/2000/svg" class="hidden">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path class="icon-opacity" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line class="icon-opacity" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line class="icon-opacity" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line class="icon-opacity" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line class="icon-opacity" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line class="icon-opacity" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line class="icon-opacity" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line class="icon-opacity" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line class="icon-opacity" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle class="icon-opacity" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>
<svg xmlns="http://www.w3.org/2000/svg" class="hidden">
    <symbol id="svg-close" viewBox="0 0 24 24">
        <title>Close Menu</title>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke="currentColor"
          stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
            <line x1="2" y1="22" x2="22" y2="2"/>
            <line x1="2" y1="2" x2="22" y2="22"/>
        </svg>
    </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" id="nav-menu-open" for="__navigation" tabindex="0">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">graphrag-toolkit 3.6.1 documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" id="toc-menu-open-sm" for="__toc" tabindex="0">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><div class="sidebar-div show-div-sm justify-content-right">
    <label class="nav-close-icon" id="nav-menu-close" for="__navigation" tabindex="0">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-close"></use></svg></i>
    </label>
</div><a class="sidebar-brand" href="index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo only-light" src="_static/logos/aws_light_theme_logo.svg" alt="Light Logo"/>
    <img class="sidebar-logo only-dark" src="_static/logos/aws_dark_theme_logo.svg" alt="Dark Logo"/>
  </div>
  
  <span class="sidebar-brand-text">graphrag-toolkit 3.6.1 documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-div">
    <p class="sidebar-heading">Feedback</p>
    <p class="sidebar-text">
        Do you have a suggestion to improve this website or graphrag-toolkit?
        <a href="https://github.com/awslabs/graphrag-toolkit/issues">Give us feedback</a>.
    </p>
</div><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">README and Overview</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="md/lexical-graph/README.html">Lexical Graph</a></li>
<li class="toctree-l1"><a class="reference internal" href="md/lexical-graph/overview.html">Overview</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Graph Store</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="md/lexical-graph/storage-model.html">Storage Model</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Graph Store</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="md/lexical-graph/graph-model.html">Graph Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="md/lexical-graph/graph-store-falkor-db.html">FalkorDB as a Graph Store</a></li>
<li class="toctree-l1"><a class="reference internal" href="md/lexical-graph/graph-store-neptune-analytics.html">Neptune Analytics as a Graph Store</a></li>
<li class="toctree-l1"><a class="reference internal" href="md/lexical-graph/graph-store-neptune-db.html">Neptune Database as a Graph Store</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Vector Store</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="md/lexical-graph/vector-store-neptune-analytics.html">Neptune Analytics as a Vector Store</a></li>
<li class="toctree-l1"><a class="reference internal" href="md/lexical-graph/vector-store-opensearch-serverless.html">Amazon OpenSearch Serverless as a Vector Store</a></li>
<li class="toctree-l1"><a class="reference internal" href="md/lexical-graph/vector-store-postgres.html">Postgres as a Vector Store</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Security</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="md/lexical-graph/security.html">Security</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Querying</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="md/lexical-graph/querying.html">Querying</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Multi-tenancy</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="md/lexical-graph/metadata-filtering.html">Metadata Filtering</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Indexing</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="md/lexical-graph/indexing.html">Indexing</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Indexing</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="md/lexical-graph/multi-tenancy.html">Multi-Tenancy</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Configuration</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="md/lexical-graph/configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="md/lexical-graph/aws-profile.html">Using AWS Profiles in <code class="docutils literal notranslate"><span class="pre">GraphRAGConfig</span></code></a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Batch Extraction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="md/lexical-graph/batch-extraction.html">Batch Extraction</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Batch Extraction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="md/lexical-graph/hybrid-deployment.html">Hybrid Deployment</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">FAQ</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="md/lexical-graph/faq.html">FAQ</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Lexical Graph API</span></p>
<ul class="current">
<li class="toctree-l1 current has-children"><a class="reference internal" href="modules.html">graphrag_toolkit</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of graphrag_toolkit</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2 current has-children"><a class="reference internal" href="graphrag_toolkit.html">graphrag_toolkit package</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of graphrag_toolkit package</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l3 current has-children"><a class="reference internal" href="graphrag_toolkit.lexical_graph.html">graphrag_toolkit.lexical_graph package</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of graphrag_toolkit.lexical_graph package</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l4 has-children"><a class="reference internal" href="graphrag_toolkit.lexical_graph.indexing.html">graphrag_toolkit.lexical_graph.indexing package</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of graphrag_toolkit.lexical_graph.indexing package</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="graphrag_toolkit.lexical_graph.indexing.build.html">graphrag_toolkit.lexical_graph.indexing.build package</a></li>
<li class="toctree-l5"><a class="reference internal" href="graphrag_toolkit.lexical_graph.indexing.extract.html">graphrag_toolkit.lexical_graph.indexing.extract package</a></li>
<li class="toctree-l5"><a class="reference internal" href="graphrag_toolkit.lexical_graph.indexing.load.html">graphrag_toolkit.lexical_graph.indexing.load package</a></li>
<li class="toctree-l5"><a class="reference internal" href="graphrag_toolkit.lexical_graph.indexing.utils.html">graphrag_toolkit.lexical_graph.indexing.utils package</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="graphrag_toolkit.lexical_graph.prompts.html">graphrag_toolkit.lexical_graph.prompts package</a></li>
<li class="toctree-l4"><a class="reference internal" href="graphrag_toolkit.lexical_graph.protocols.html">graphrag_toolkit.lexical_graph.protocols package</a></li>
<li class="toctree-l4 has-children"><a class="reference internal" href="graphrag_toolkit.lexical_graph.retrieval.html">graphrag_toolkit.lexical_graph.retrieval package</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle navigation of graphrag_toolkit.lexical_graph.retrieval package</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="graphrag_toolkit.lexical_graph.retrieval.post_processors.html">graphrag_toolkit.lexical_graph.retrieval.post_processors package</a></li>
<li class="toctree-l5"><a class="reference internal" href="graphrag_toolkit.lexical_graph.retrieval.processors.html">graphrag_toolkit.lexical_graph.retrieval.processors package</a></li>
<li class="toctree-l5"><a class="reference internal" href="graphrag_toolkit.lexical_graph.retrieval.retrievers.html">graphrag_toolkit.lexical_graph.retrieval.retrievers package</a></li>
<li class="toctree-l5"><a class="reference internal" href="graphrag_toolkit.lexical_graph.retrieval.summary.html">graphrag_toolkit.lexical_graph.retrieval.summary package</a></li>
<li class="toctree-l5"><a class="reference internal" href="graphrag_toolkit.lexical_graph.retrieval.utils.html">graphrag_toolkit.lexical_graph.retrieval.utils package</a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="graphrag_toolkit.lexical_graph.storage.html">graphrag_toolkit.lexical_graph.storage package</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle navigation of graphrag_toolkit.lexical_graph.storage package</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="graphrag_toolkit.lexical_graph.storage.graph.html">graphrag_toolkit.lexical_graph.storage.graph package</a></li>
<li class="toctree-l5"><a class="reference internal" href="graphrag_toolkit.lexical_graph.storage.vector.html">graphrag_toolkit.lexical_graph.storage.vector package</a></li>
</ul>
</li>
<li class="toctree-l4 current current-page"><a class="current reference internal" href="#">graphrag_toolkit.lexical_graph.utils package</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">FalkorDB Plugin API</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="falkordb/modules.html">falkordb</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle navigation of falkordb</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="falkordb/falkordb.html">falkordb package</a></li>
</ul>
</li>
</ul>

</div></div>
      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          

<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" id="toc-menu-open-md" for="__toc" tabindex="0">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="graphrag-toolkit-lexical-graph-utils-package">
<h1>graphrag_toolkit.lexical_graph.utils package<a class="headerlink" href="#graphrag-toolkit-lexical-graph-utils-package" title="Link to this heading">¶</a></h1>
<section id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Link to this heading">¶</a></h2>
</section>
<section id="module-graphrag_toolkit.lexical_graph.utils.bedrock_utils">
<span id="graphrag-toolkit-lexical-graph-utils-bedrock-utils-module"></span><h2>graphrag_toolkit.lexical_graph.utils.bedrock_utils module<a class="headerlink" href="#module-graphrag_toolkit.lexical_graph.utils.bedrock_utils" title="Link to this heading">¶</a></h2>
</section>
<section id="module-graphrag_toolkit.lexical_graph.utils.fm_observability">
<span id="graphrag-toolkit-lexical-graph-utils-fm-observability-module"></span><h2>graphrag_toolkit.lexical_graph.utils.fm_observability module<a class="headerlink" href="#module-graphrag_toolkit.lexical_graph.utils.fm_observability" title="Link to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.BedrockEnabledTokenCountingHandler">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">graphrag_toolkit.lexical_graph.utils.fm_observability.</span></span><span class="sig-name descname"><span class="pre">BedrockEnabledTokenCountingHandler</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tokenizer</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">event_starts_to_ignore</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">CBEventType</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">event_ends_to_ignore</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">CBEventType</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Logger</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/fm_observability.html#BedrockEnabledTokenCountingHandler"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.BedrockEnabledTokenCountingHandler" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">TokenCountingHandler</span></code></p>
<p>Handles token counting for systems utilizing Bedrock, extending functionality for
event-based processing.</p>
<p>Provides mechanisms to accurately count tokens used in language model (LLM) prompts
and completions, or for embeddings processing. Additionally ensures integration
with the observability queue to facilitate tracking and debugging.</p>
<dl class="simple">
<dt>Attributes:</dt><dd><dl class="simple">
<dt>event_starts_to_ignore (Optional[List[CBEventType]]): List of event types to</dt><dd><p>be ignored at the start of events.</p>
</dd>
<dt>event_ends_to_ignore (Optional[List[CBEventType]]): List of event types to</dt><dd><p>be ignored at the end of events.</p>
</dd>
<dt>tokenizer (Optional[Callable[[str], List]]): Tokenizer function used</dt><dd><p>to split input into tokens.</p>
</dd>
<dt>verbose (bool): Flag indicating whether detailed information should</dt><dd><p>be logged.</p>
</dd>
<dt>logger (Optional[logging.Logger]): Logger instance for logging events</dt><dd><p>and information.</p>
</dd>
</dl>
</dd>
</dl>
<p>Initializes the class with specified parameters. The provided parameters will
control the behavior of the callback system for token counting. This includes
the tokenizer to be used, events to be ignored during start and end operations,
verbosity level, and an optional logger for logging purposes.</p>
<dl>
<dt>Args:</dt><dd><dl class="simple">
<dt>tokenizer: Optional callable responsible for tokenizing input strings into</dt><dd><p>a list of tokens.</p>
</dd>
<dt>event_starts_to_ignore: Optional list of CBEventType items representing</dt><dd><p>event types to ignore when a start event occurs.</p>
</dd>
<dt>event_ends_to_ignore: Optional list of CBEventType items representing event</dt><dd><p>types to ignore when an end event occurs.</p>
</dd>
</dl>
<p>verbose: Boolean indicating whether to enable verbose output.
logger: Optional logging.Logger instance for logging callback-related</p>
<blockquote>
<div><p>information.</p>
</div></blockquote>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.BedrockEnabledTokenCountingHandler.on_event_end">
<span class="sig-name descname"><span class="pre">on_event_end</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">event_type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">CBEventType</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payload</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">event_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/fm_observability.html#BedrockEnabledTokenCountingHandler.on_event_end"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.BedrockEnabledTokenCountingHandler.on_event_end" title="Link to this definition">¶</a></dt>
<dd><p>Handles the conclusion of specified events by processing token counts if applicable
and updating the observability queue with event data. This method tracks token
counts for LLM and Embedding events, ensuring that their respective token usages
are appropriately logged. When certain thresholds for token count storage are exceeded,
the method will reset those counts.</p>
<dl class="simple">
<dt>Args:</dt><dd><dl class="simple">
<dt>event_type (CBEventType): Type of the event being concluded, such as LLM or</dt><dd><p>EMBEDDING.</p>
</dd>
<dt>payload (Optional[Dict[str, Any]]): Additional event-specific data payload. Can</dt><dd><p>be None if no payload accompanies the event.</p>
</dd>
<dt>event_id (str): Identifier of the event. Defaults to an empty string if not</dt><dd><p>provided.</p>
</dd>
<dt><a href="#id1"><span class="problematic" id="id2">**</span></a>kwargs (Any): Additional keyword arguments for extensibility. These are not</dt><dd><p>directly utilized in this method.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.ConsoleFMObservabilitySubscriber">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">graphrag_toolkit.lexical_graph.utils.fm_observability.</span></span><span class="sig-name descname"><span class="pre">ConsoleFMObservabilitySubscriber</span></span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/fm_observability.html#ConsoleFMObservabilitySubscriber"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.ConsoleFMObservabilitySubscriber" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilitySubscriber" title="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilitySubscriber"><code class="xref py py-class docutils literal notranslate"><span class="pre">FMObservabilitySubscriber</span></code></a></p>
<p>A subscriber class for observing FM (Foundation Model) observability statistics.</p>
<p>This class is a concrete implementation of FMObservabilitySubscriber, designed to collect
and print observability statistics in real time. It maintains cumulative statistics and
prints detailed data on occurrences of LLM (Large Language Model) events and Embedding
events whenever new statistics are received.</p>
<dl class="simple">
<dt>Attributes:</dt><dd><p>all_stats (FMObservabilityStats): An instance of FMObservabilityStats that aggregates
and maintains cumulative statistics for LLM and Embedding events.</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.ConsoleFMObservabilitySubscriber.on_new_stats">
<span class="sig-name descname"><span class="pre">on_new_stats</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">stats</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats" title="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats"><span class="pre">FMObservabilityStats</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/fm_observability.html#ConsoleFMObservabilitySubscriber.on_new_stats"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.ConsoleFMObservabilitySubscriber.on_new_stats" title="Link to this definition">¶</a></dt>
<dd><p>Processes and updates the current statistics with new incoming statistics data.</p>
<p>This method takes in an <cite>FMObservabilityStats</cite> instance containing new
observability statistics and updates the aggregated statistics stored
in <cite>self.all_stats</cite>. If the update is successful, a summary of the updated
statistics is printed, including information about LLM (Large Language Model)
usage and Embedding usage.</p>
<dl class="simple">
<dt>Args:</dt><dd><dl class="simple">
<dt>stats (FMObservabilityStats): The new observability statistics to be</dt><dd><p>processed and integrated into the existing set of aggregated statistics.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityHandler">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">graphrag_toolkit.lexical_graph.utils.fm_observability.</span></span><span class="sig-name descname"><span class="pre">FMObservabilityHandler</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">event_starts_to_ignore</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">event_ends_to_ignore</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/fm_observability.html#FMObservabilityHandler"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityHandler" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCallbackHandler</span></code></p>
<p>Handler for managing and tracking observability events.</p>
<p>This class is a specialized callback handler used to monitor and manage events within a
workflow. It tracks the start and end of specific events, records event metadata,
and calculates the duration of event processing. The class provides methods to handle
event-start and event-end logic, ensuring accurate observability data while ignoring
specific event types based on configuration.</p>
<dl class="simple">
<dt>Attributes:</dt><dd><dl class="simple">
<dt>in_flight_events (dict): Stores events that are currently in progress. Each event is</dt><dd><p>tracked by its ID and contains associated metadata.</p>
</dd>
</dl>
</dd>
</dl>
<p>Initializes the object of the class with the given parameters, sets up the
container for in-flight events, and calls the parent class initializer.</p>
<dl class="simple">
<dt>Args:</dt><dd><dl class="simple">
<dt>event_starts_to_ignore (list, optional): A list of event start identifiers</dt><dd><p>that should be ignored. Defaults to an empty list.</p>
</dd>
<dt>event_ends_to_ignore (list, optional): A list of event end identifiers that</dt><dd><p>should be ignored. Defaults to an empty list.</p>
</dd>
</dl>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityHandler.end_trace">
<span class="sig-name descname"><span class="pre">end_trace</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">trace_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trace_map</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/fm_observability.html#FMObservabilityHandler.end_trace"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityHandler.end_trace" title="Link to this definition">¶</a></dt>
<dd><p>Ends an ongoing trace based on the provided trace identifier and updates the
trace map accordingly.</p>
<p>This function allows marking the completion of a trace identified by <cite>trace_id</cite>.
It optionally accepts a trace mapping structure (<cite>trace_map</cite>) for updating its
state after ending the trace. If <cite>trace_map</cite> is provided, this function modifies
it to reflect the end of the specified trace.</p>
<dl class="simple">
<dt>Args:</dt><dd><dl class="simple">
<dt>trace_id: The unique identifier of the trace to be ended. If not provided,</dt><dd><p>no specific trace is targeted.</p>
</dd>
<dt>trace_map: A dictionary mapping trace identifiers to lists of related trace</dt><dd><p>details. If specified, this will be updated to reflect the ended trace.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityHandler.on_event_end">
<span class="sig-name descname"><span class="pre">on_event_end</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">event_type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">CBEventType</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payload</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">event_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/fm_observability.html#FMObservabilityHandler.on_event_end"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityHandler.on_event_end" title="Link to this definition">¶</a></dt>
<dd><p>Handles the end of an event and manages its corresponding operations, such as
removing it from the in-flight events, calculating its duration, and enqueuing
the completed event for further processing. This is done only for specific event
types and under certain conditions.</p>
<dl class="simple">
<dt>Args:</dt><dd><p>event_type: The type of the event being processed.
payload: The detailed payload of the event, typically containing its data.
event_id: A unique identifier for the event being processed.
<a href="#id3"><span class="problematic" id="id4">**</span></a>kwargs: Additional optional parameters that may be passed for event handling.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityHandler.on_event_start">
<span class="sig-name descname"><span class="pre">on_event_start</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">event_type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">CBEventType</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payload</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">event_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parent_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/fm_observability.html#FMObservabilityHandler.on_event_start"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityHandler.on_event_start" title="Link to this definition">¶</a></dt>
<dd><p>Handles the start of an event by processing the given event type and payload and
storing event data if necessary. Returns the event identifier for the started
event.</p>
<dl>
<dt>Args:</dt><dd><dl class="simple">
<dt>event_type (CBEventType): The type of the event being started, used to</dt><dd><p>determine processing and logging behavior.</p>
</dd>
<dt>payload (Optional[Dict[str, Any]]): The optional payload containing event</dt><dd><p>data. Specific processing is done if the payload includes certain keys
like ‘MESSAGES’ or a serialized model.</p>
</dd>
</dl>
<p>event_id (str): The unique identifier for the event being started.
parent_id (str): The unique identifier of the parent event, if any. This</p>
<blockquote>
<div><p>allows for hierarchical event tracking.</p>
</div></blockquote>
<dl class="simple">
<dt><a href="#id5"><span class="problematic" id="id6">**</span></a>kwargs (Any): Additional optional key-value pairs that might be required</dt><dd><p>for specific event handling.</p>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><p>str: The event identifier for the started event.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityHandler.reset_counts">
<span class="sig-name descname"><span class="pre">reset_counts</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/fm_observability.html#FMObservabilityHandler.reset_counts"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityHandler.reset_counts" title="Link to this definition">¶</a></dt>
<dd><p>Resets the in-flight events counter.</p>
<p>This method clears the <cite>in_flight_events</cite> dictionary, effectively resetting
any tracked events or counts. It is used to reinitialize or clear current
state information for tracking events in progress.</p>
<dl class="simple">
<dt>Attributes:</dt><dd><dl class="simple">
<dt>in_flight_events (dict): A dictionary that holds the current in-flight</dt><dd><p>events being tracked.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityHandler.start_trace">
<span class="sig-name descname"><span class="pre">start_trace</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">trace_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/fm_observability.html#FMObservabilityHandler.start_trace"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityHandler.start_trace" title="Link to this definition">¶</a></dt>
<dd><p>Starts a new trace with the given trace ID. If no trace ID is provided, a default or
system-generated trace identifier is used. This function facilitates the beginning
of tracking specific operations or sequences for logging and troubleshooting
purposes.</p>
<dl class="simple">
<dt>Args:</dt><dd><dl class="simple">
<dt>trace_id (Optional[str]): The unique identifier for the trace. If None, a default</dt><dd><p>or system-generated trace identifier will be applied.</p>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><p>None</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityPublisher">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">graphrag_toolkit.lexical_graph.utils.fm_observability.</span></span><span class="sig-name descname"><span class="pre">FMObservabilityPublisher</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">subscribers</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilitySubscriber" title="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilitySubscriber"><span class="pre">FMObservabilitySubscriber</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">interval_seconds</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">15.0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/fm_observability.html#FMObservabilityPublisher"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityPublisher" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Manages publishing of observability statistics at regular intervals to subscribed
observers.</p>
<p>The FMObservabilityPublisher is designed to poll a queue for observability statistics
and notify registered subscribers. It uses a background thread to periodically invoke
the publishing mechanism. The class also implements context manager capabilities for
automatic resource management.</p>
<dl class="simple">
<dt>Attributes:</dt><dd><dl class="simple">
<dt>subscribers (List[FMObservabilitySubscriber]): A list of subscribers to be notified</dt><dd><p>when new observability statistics are available.</p>
</dd>
<dt>interval_seconds (float): The time interval, in seconds, between publishing</dt><dd><p>observability statistics.</p>
</dd>
<dt>allow_continue (bool): A flag indicating whether the publishing process should</dt><dd><p>continue. If set to False, the process will stop.</p>
</dd>
<dt>poller (FMObservabilityQueuePoller): The polling mechanism that retrieves data</dt><dd><p>from the observability queue.</p>
</dd>
</dl>
</dd>
</dl>
<p>Initializes the FMObservabilityQueuePublisher class.</p>
<p>This class is responsible for managing observability subscribers, configuring the
poller to process observability queue data, and periodically publishing statistics
to the registered subscribers. It also sets up handlers for token counting and
observability events.</p>
<dl class="simple">
<dt>Args:</dt><dd><dl class="simple">
<dt>subscribers (List[FMObservabilitySubscriber], optional): A list of subscribers to</dt><dd><p>receive the observability data. Defaults to an empty list.</p>
</dd>
<dt>interval_seconds (float, optional): The interval in seconds for publishing</dt><dd><p>statistics to the subscribers. Defaults to 15.0.</p>
</dd>
</dl>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityPublisher.close">
<span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/fm_observability.html#FMObservabilityPublisher.close"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityPublisher.close" title="Link to this definition">¶</a></dt>
<dd><p>Disables the continuation functionality by updating the internal flag.</p>
<p>This method prevents further continuation of a process by setting the
<cite>allow_continue</cite> attribute to <cite>False</cite>. Once invoked, the attribute will
indicate that continuation should not occur.</p>
<dl class="simple">
<dt>Attributes:</dt><dd><dl class="simple">
<dt>allow_continue (bool): Indicates whether continuation is permitted or not.</dt><dd><p>Set to <cite>False</cite> to disable continuation.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityPublisher.publish_stats">
<span class="sig-name descname"><span class="pre">publish_stats</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/fm_observability.html#FMObservabilityPublisher.publish_stats"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityPublisher.publish_stats" title="Link to this definition">¶</a></dt>
<dd><p>Handles the collection, restart, and publishing of statistics through a polling mechanism.</p>
<p>Starts a polling process to collect current statistics and ensures the continuity of the
polling cycle based on the specified interval if allowed. Independently notifies all
subscribers with the new statistics collected after each polling cycle.</p>
<dl class="simple">
<dt>Args:</dt><dd><p>None</p>
</dd>
<dt>Raises:</dt><dd><p>None</p>
</dd>
<dt>Returns:</dt><dd><p>None</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityQueuePoller">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">graphrag_toolkit.lexical_graph.utils.fm_observability.</span></span><span class="sig-name descname"><span class="pre">FMObservabilityQueuePoller</span></span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/fm_observability.html#FMObservabilityQueuePoller"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityQueuePoller" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Thread</span></code></p>
<p>FMObservabilityQueuePoller is a thread-based queue polling class.</p>
<p>This class is used to continuously poll a queue for events and process them
using the FMObservabilityStats instance. It utilises threading to perform
polling in a separate thread and provides methods to start and gracefully
stop the polling operation.</p>
<dl class="simple">
<dt>Attributes:</dt><dd><dl class="simple">
<dt>_discontinue (threading.Event): An event object to signal and manage</dt><dd><p>the termination of the thread’s execution.</p>
</dd>
<dt>fm_observability (FMObservabilityStats): An instance of the</dt><dd><p>FMObservabilityStats class used to handle the events being processed.</p>
</dd>
</dl>
</dd>
</dl>
<p>Handles initialization of the class, setting up attributes and dependencies needed for
observability and thread event management.</p>
<dl class="simple">
<dt>Attributes:</dt><dd><dl class="simple">
<dt>_discontinue (threading.Event): Threading event used to signal and manage thread</dt><dd><p>lifecycle or operations that need coordination.</p>
</dd>
<dt>fm_observability (FMObservabilityStats): Instance of FMObservabilityStats that</dt><dd><p>handles observability-related statistics and functionality.</p>
</dd>
</dl>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityQueuePoller.run">
<span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/fm_observability.html#FMObservabilityQueuePoller.run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityQueuePoller.run" title="Link to this definition">¶</a></dt>
<dd><p>Runs the queue polling process to process events as they become available in the
observability queue. It continuously checks for events unless interrupted by
setting the <cite>self._discontinue</cite> event.</p>
<p>The method polls the <cite>_fm_observability_queue</cite> at a regular interval and processes
each event by invoking the <cite>fm_observability.on_event</cite> method.</p>
<dl class="simple">
<dt>Raises:</dt><dd><p>queue.Empty: If the queue is empty during a poll attempt.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityQueuePoller.stop">
<span class="sig-name descname"><span class="pre">stop</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/fm_observability.html#FMObservabilityQueuePoller.stop"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityQueuePoller.stop" title="Link to this definition">¶</a></dt>
<dd><p>Stops the queue polling process by signaling a discontinuation event and returns
the observability object for further monitoring or assessment.</p>
<p>This method is intended to halt the queue polling process initiated or operated
by the current instance. By setting the discontinuation flag, the polling loop
will cease operation. The method also provides access to the observability instance
used during the process.</p>
<dl class="simple">
<dt>Returns:</dt><dd><p>Any: The observability object associated with the current process, which
can be used for tracking or further evaluation.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">graphrag_toolkit.lexical_graph.utils.fm_observability.</span></span><span class="sig-name descname"><span class="pre">FMObservabilityStats</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">total_llm_duration_millis</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">total_llm_count</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">total_llm_prompt_tokens</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">total_llm_completion_tokens</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">total_embedding_duration_millis</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">total_embedding_count</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">total_embedding_tokens</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/fm_observability.html#FMObservabilityStats"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Tracks and updates observability statistics for LLM (Large Language Model) and embedding
operations.</p>
<p>This class monitors various metrics associated with LLM and embedding events, such as
durations and token counts. It allows updating of the statistics using external data or
events and provides convenient methods for accessing average values. The statistics tracked
include both prompt and completion tokens for LLMs and tokens for embeddings.</p>
<dl>
<dt>Attributes:</dt><dd><p>total_llm_duration_millis (float): Total duration of all LLM calls in milliseconds.
total_llm_count (int): Total count of LLM calls.
total_llm_prompt_tokens (float): Total prompt tokens used in all LLM calls.
total_llm_completion_tokens (float): Total completion tokens returned in all LLM calls.
total_embedding_duration_millis (float): Total duration of all embedding calls in</p>
<blockquote>
<div><p>milliseconds.</p>
</div></blockquote>
<p>total_embedding_count (int): Total count of embedding calls.
total_embedding_tokens (float): Total number of embedding tokens across all embedding</p>
<blockquote>
<div><p>calls.</p>
</div></blockquote>
</dd>
</dl>
<dl class="py property">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.average_embedding_duration_millis">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">average_embedding_duration_millis</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">int</span></em><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.average_embedding_duration_millis" title="Link to this definition">¶</a></dt>
<dd><p>Calculates the average duration of embedding in milliseconds.</p>
<p>The average duration is computed by dividing the total embedding
duration in milliseconds by the total count of embeddings. If the
embedding count is zero, it returns 0 to avoid division by zero.</p>
<dl class="simple">
<dt>Returns:</dt><dd><p>int: The average embedding duration in milliseconds. Returns 0
if there are no embeddings.</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.average_embedding_tokens">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">average_embedding_tokens</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">int</span></em><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.average_embedding_tokens" title="Link to this definition">¶</a></dt>
<dd><p>Calculates the average number of embedding tokens per embedding.</p>
<p>The <cite>average_embedding_tokens</cite> property retrieves the average of
embedding tokens by dividing the total number of embedding tokens
by the total count of embeddings. If the total embedding count is
zero, it safely returns zero to avoid division errors.</p>
<dl class="simple">
<dt>Attributes:</dt><dd><p>total_embedding_tokens (int): The total number of embedding tokens.
total_embedding_count (int): The total number of embeddings.</p>
</dd>
<dt>Returns:</dt><dd><p>int: The average number of embedding tokens per embedding. If the
<cite>total_embedding_count</cite> is zero, returns 0.</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.average_llm_completion_tokens">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">average_llm_completion_tokens</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">int</span></em><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.average_llm_completion_tokens" title="Link to this definition">¶</a></dt>
<dd><p>Calculates the average number of completion tokens generated by a language
model (LLM) across multiple requests. If there are no LLM requests, it
returns 0.</p>
<p>The calculation is based on dividing the total number of LLM completion
tokens by the total count of LLM requests. Acts as a property getter.</p>
<dl class="simple">
<dt>Returns:</dt><dd><p>int: The average number of LLM completion tokens per request. If no
LLM requests exist, returns 0.</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.average_llm_duration_millis">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">average_llm_duration_millis</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">int</span></em><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.average_llm_duration_millis" title="Link to this definition">¶</a></dt>
<dd><p>Gets the average duration of LLM operations in milliseconds.</p>
<p>This property calculates the average duration of LLM operations by dividing the
total duration spent in LLM operations by the total number of LLM operations
performed. If no LLM operations were performed, the average duration is set to 0.</p>
<dl class="simple">
<dt>Returns:</dt><dd><p>int: The average duration of LLM operations in milliseconds.</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.average_llm_prompt_tokens">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">average_llm_prompt_tokens</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">int</span></em><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.average_llm_prompt_tokens" title="Link to this definition">¶</a></dt>
<dd><p>Calculates the average number of LLM prompt tokens used per LLM call.</p>
<p>This method determines an average value by dividing the total LLM prompt tokens by
the total number of LLM calls. If no LLM calls have been made, it will return 0 to
avoid division by zero.</p>
<dl class="simple">
<dt>Returns:</dt><dd><p>int: The average number of LLM prompt tokens per LLM call. If no LLM calls have
been made, it returns 0.</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.average_llm_tokens">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">average_llm_tokens</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">int</span></em><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.average_llm_tokens" title="Link to this definition">¶</a></dt>
<dd><p>Gets the average number of LLM tokens. The property calculates the average by dividing
the total number of LLM tokens by the total count of LLM instances. If no LLM instances
exist, returns zero.</p>
<dl class="simple">
<dt>Returns:</dt><dd><p>int: The average number of LLM tokens. If the total LLM count is zero, returns 0.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.on_event">
<span class="sig-name descname"><span class="pre">on_event</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">event</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">CBEvent</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/fm_observability.html#FMObservabilityStats.on_event"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.on_event" title="Link to this definition">¶</a></dt>
<dd><p>Handles the processing of different types of events and updates related statistics
based on the event type and payload data. Supports events of type LLM and EMBEDDING.</p>
<dl class="simple">
<dt>Args:</dt><dd><dl class="simple">
<dt>event (CBEvent): The event object containing the event type and associated</dt><dd><p>payload data used to update relevant statistics.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.total_embedding_count">
<span class="sig-name descname"><span class="pre">total_embedding_count</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">int</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0</span></em><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.total_embedding_count" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.total_embedding_duration_millis">
<span class="sig-name descname"><span class="pre">total_embedding_duration_millis</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">float</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0</span></em><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.total_embedding_duration_millis" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.total_embedding_tokens">
<span class="sig-name descname"><span class="pre">total_embedding_tokens</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">float</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0</span></em><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.total_embedding_tokens" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.total_llm_completion_tokens">
<span class="sig-name descname"><span class="pre">total_llm_completion_tokens</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">float</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0</span></em><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.total_llm_completion_tokens" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.total_llm_count">
<span class="sig-name descname"><span class="pre">total_llm_count</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">int</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0</span></em><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.total_llm_count" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.total_llm_duration_millis">
<span class="sig-name descname"><span class="pre">total_llm_duration_millis</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">float</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0</span></em><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.total_llm_duration_millis" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.total_llm_prompt_tokens">
<span class="sig-name descname"><span class="pre">total_llm_prompt_tokens</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">float</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0</span></em><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.total_llm_prompt_tokens" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.total_llm_tokens">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">total_llm_tokens</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">int</span></em><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.total_llm_tokens" title="Link to this definition">¶</a></dt>
<dd><p>Calculates the total number of LLM tokens used, combining prompt and completion tokens.</p>
<p>This property method calculates the total number of tokens used by summing up
the number of tokens used in the prompt and completion phases by the LLM. It
provides a convenient way to access the aggregate token usage.</p>
<dl class="simple">
<dt>Returns:</dt><dd><p>int: Total number of LLM tokens, including both prompt and completion tokens.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.update">
<span class="sig-name descname"><span class="pre">update</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">stats</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/fm_observability.html#FMObservabilityStats.update"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.update" title="Link to this definition">¶</a></dt>
<dd><p>Updates the current object’s statistical attributes with the values from the provided stats object and
determines whether the sum of total_llm_count and total_embedding_count is greater than zero.</p>
<p>This method is used to aggregate statistical data from another object into the current instance and
helps analyze whether any meaningful statistical contributions are made by checking if the combined
counts of LLM and embedding operations are non-zero.</p>
<dl class="simple">
<dt>Args:</dt><dd><dl class="simple">
<dt>stats (Any): An object containing the statistical data to update. The provided stats object must</dt><dd><p>have the attributes:
- total_llm_duration_millis (int)
- total_llm_count (int)
- total_llm_prompt_tokens (int)
- total_llm_completion_tokens (int)
- total_embedding_duration_millis (int)
- total_embedding_count (int)
- total_embedding_tokens (int)</p>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><dl class="simple">
<dt>bool: True if the combined total_llm_count and total_embedding_count from the stats object is</dt><dd><p>greater than zero; otherwise, False.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilitySubscriber">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">graphrag_toolkit.lexical_graph.utils.fm_observability.</span></span><span class="sig-name descname"><span class="pre">FMObservabilitySubscriber</span></span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/fm_observability.html#FMObservabilitySubscriber"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilitySubscriber" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">ABC</span></code></p>
<p>Defines an interface for subscribers to receive observability statistics.</p>
<p>FMObservabilitySubscriber serves as an abstract base class that establishes
a contract for implementing classes to handle new statistics from
FMObservability. It ensures any subscriber provides a concrete implementation
for the <cite>on_new_stats</cite> method, enabling consistent behavior across different
subscriber implementations.</p>
<dl class="simple">
<dt>Methods:</dt><dd><p>on_new_stats(stats): Abstract method to handle new observability statistics.</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilitySubscriber.on_new_stats">
<em class="property"><span class="k"><span class="pre">abstractmethod</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">on_new_stats</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">stats</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats" title="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats"><span class="pre">FMObservabilityStats</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/fm_observability.html#FMObservabilitySubscriber.on_new_stats"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilitySubscriber.on_new_stats" title="Link to this definition">¶</a></dt>
<dd><p>An abstract base class that defines a callback method to be invoked upon
receiving new statistics related to observability.</p>
<dl class="simple">
<dt>Methods:</dt><dd><p>on_new_stats: Abstract method to handle new observability statistics.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.StatPrintingSubscriber">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">graphrag_toolkit.lexical_graph.utils.fm_observability.</span></span><span class="sig-name descname"><span class="pre">StatPrintingSubscriber</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cost_per_thousand_input_tokens_llm</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cost_per_thousand_output_tokens_llm</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cost_per_thousand_embedding_tokens</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/fm_observability.html#StatPrintingSubscriber"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.StatPrintingSubscriber" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilitySubscriber" title="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilitySubscriber"><code class="xref py py-class docutils literal notranslate"><span class="pre">FMObservabilitySubscriber</span></code></a></p>
<p>Represents a subscriber that collects and processes observability statistics
and estimates costs associated with language model usage.</p>
<p>This class is designed for subscribing to observability events, aggregating statistics,
and calculating costs associated with specific observability data such as input tokens,
output tokens, and embeddings. It provides utility methods for updating, retrieving,
and summarizing observability stats in a structured format.</p>
<dl>
<dt>Attributes:</dt><dd><dl class="simple">
<dt>cost_per_thousand_input_tokens_llm (float): Cost per thousand input tokens for the</dt><dd><p>language model.</p>
</dd>
<dt>cost_per_thousand_output_tokens_llm (float): Cost per thousand output tokens for the</dt><dd><p>language model.</p>
</dd>
</dl>
<p>cost_per_thousand_embedding_tokens (float): Cost per thousand tokens for embeddings.</p>
</dd>
</dl>
<p>Initializes the object with the provided costs for input tokens, output tokens,
and embedding tokens. This class is designed to allow tracking and managing
factors related to these costs for specified parameters.</p>
<dl class="simple">
<dt>Args:</dt><dd><dl class="simple">
<dt>cost_per_thousand_input_tokens_llm: The cost per thousand input tokens</dt><dd><p>used by the language model.</p>
</dd>
<dt>cost_per_thousand_output_tokens_llm: The cost per thousand output tokens</dt><dd><p>generated by the language model.</p>
</dd>
<dt>cost_per_thousand_embedding_tokens: The cost per thousand embedding tokens</dt><dd><p>used in the process.</p>
</dd>
</dl>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.StatPrintingSubscriber.cost_per_thousand_embedding_tokens">
<span class="sig-name descname"><span class="pre">cost_per_thousand_embedding_tokens</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">float</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0</span></em><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.StatPrintingSubscriber.cost_per_thousand_embedding_tokens" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.StatPrintingSubscriber.cost_per_thousand_input_tokens_llm">
<span class="sig-name descname"><span class="pre">cost_per_thousand_input_tokens_llm</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">float</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0</span></em><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.StatPrintingSubscriber.cost_per_thousand_input_tokens_llm" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.StatPrintingSubscriber.cost_per_thousand_output_tokens_llm">
<span class="sig-name descname"><span class="pre">cost_per_thousand_output_tokens_llm</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">float</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0</span></em><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.StatPrintingSubscriber.cost_per_thousand_output_tokens_llm" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.StatPrintingSubscriber.estimate_costs">
<span class="sig-name descname"><span class="pre">estimate_costs</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">float</span></span></span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/fm_observability.html#StatPrintingSubscriber.estimate_costs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.StatPrintingSubscriber.estimate_costs" title="Link to this definition">¶</a></dt>
<dd><p>Estimates the total cost based on token usage statistics and predefined costs per
thousand tokens for input, output, and embeddings.</p>
<p>The method calculates the total cost by aggregating the costs associated with
the total number of input prompt tokens, output completion tokens, and embedding
tokens. Each cost component is determined by dividing the respective token count
by 1000 and multiplying it with the respective cost per thousand tokens.</p>
<dl class="simple">
<dt>Returns:</dt><dd><p>float: The total estimated cost calculated from token usage statistics.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.StatPrintingSubscriber.get_stats">
<span class="sig-name descname"><span class="pre">get_stats</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/fm_observability.html#StatPrintingSubscriber.get_stats"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.StatPrintingSubscriber.get_stats" title="Link to this definition">¶</a></dt>
<dd><p>Retrieves all statistical data recorded and stored in the object.</p>
<p>This method provides access to the collection of all statistics that
have been aggregated or computed. It is intended to be used when the
caller needs a comprehensive view of the stored statistical data.</p>
<dl class="simple">
<dt>Returns:</dt><dd><p>list: A list containing all statistical data stored within the
object. The actual structure and content of the data may vary
depending on the implementation details.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.StatPrintingSubscriber.on_new_stats">
<span class="sig-name descname"><span class="pre">on_new_stats</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">stats</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats" title="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats"><span class="pre">FMObservabilityStats</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/fm_observability.html#StatPrintingSubscriber.on_new_stats"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.StatPrintingSubscriber.on_new_stats" title="Link to this definition">¶</a></dt>
<dd><p>Updates the current statistics with new observation data. This method takes in a new set of
observability statistics and merges them into the existing aggregation of statistics.</p>
<dl class="simple">
<dt>Args:</dt><dd><dl class="simple">
<dt>stats: New FMObservabilityStats object containing the observation data to be processed and</dt><dd><p>merged into the aggregated statistics.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.StatPrintingSubscriber.return_stats_dict">
<span class="sig-name descname"><span class="pre">return_stats_dict</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/fm_observability.html#StatPrintingSubscriber.return_stats_dict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.StatPrintingSubscriber.return_stats_dict" title="Link to this definition">¶</a></dt>
<dd><p>Compiles and returns a dictionary containing various statistics and metrics related to LLM
usage and embeddings. This includes information about token counts, duration, and associated
costs.</p>
<dl class="simple">
<dt>Returns:</dt><dd><dl class="simple">
<dt>Dict[str, Any]: Dictionary containing the following keys and their associated values:</dt><dd><ul class="simple">
<li><p>‘total_llm_count’: The total count of LLM calls.</p></li>
<li><p>‘total_prompt_tokens’: Total number of prompt tokens for all LLM calls.</p></li>
<li><p>‘total_completion_tokens’: Total number of completion tokens for all LLM calls.</p></li>
<li><p>‘total_embedding_count’: The total count of embedding operations performed.</p></li>
<li><p>‘total_embedding_tokens’: Total number of tokens processed during embeddings.</p></li>
<li><p>‘total_llm_duration_millis’: Total LLM execution duration in milliseconds.</p></li>
<li><p>‘total_embedding_duration_millis’: Total embedding operation duration in milliseconds.</p></li>
<li><p>‘average_llm_duration_millis’: Average duration of LLM executions in milliseconds.</p></li>
<li><p>‘average_embedding_duration_millis’: Average duration of embedding operations in
milliseconds.</p></li>
<li><p>‘total_llm_cost’: Estimated total monetary cost associated with LLM usage.</p></li>
</ul>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.get_patched_llm_token_counts">
<span class="sig-prename descclassname"><span class="pre">graphrag_toolkit.lexical_graph.utils.fm_observability.</span></span><span class="sig-name descname"><span class="pre">get_patched_llm_token_counts</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">token_counter</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">TokenCounter</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payload</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">event_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">TokenCountingEvent</span></span></span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/fm_observability.html#get_patched_llm_token_counts"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.get_patched_llm_token_counts" title="Link to this definition">¶</a></dt>
<dd><p>Calculates and returns token counts for LLM inputs and outputs, properly handling
different types of event payloads and ensuring accurate token usage tracking.</p>
<p>This function examines the event payload to determine whether it contains a prompt and
completion or a list of messages and a response. It calculates token counts for these
inputs and outputs using the provided TokenCounter utility, either directly from the
payload or by estimating them.</p>
<dl>
<dt>Args:</dt><dd><p>token_counter: An object or utility used to count tokens in strings or messages.
payload: A dictionary containing event-related data, such as prompts, completions,</p>
<blockquote>
<div><p>messages, and responses.</p>
</div></blockquote>
<p>event_id: A unique identifier for the current event. Defaults to an empty string.</p>
</dd>
<dt>Returns:</dt><dd><dl class="simple">
<dt>TokenCountingEvent: An object encapsulating token count information for both prompt</dt><dd><p>and completion or messages and response.</p>
</dd>
</dl>
</dd>
<dt>Raises:</dt><dd><dl class="simple">
<dt>ValueError: Raised if the payload is invalid or does not contain the required</dt><dd><p>attributes for token counting.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-graphrag_toolkit.lexical_graph.utils.io_utils">
<span id="graphrag-toolkit-lexical-graph-utils-io-utils-module"></span><h2>graphrag_toolkit.lexical_graph.utils.io_utils module<a class="headerlink" href="#module-graphrag_toolkit.lexical_graph.utils.io_utils" title="Link to this heading">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.io_utils.read_json">
<span class="sig-prename descclassname"><span class="pre">graphrag_toolkit.lexical_graph.utils.io_utils.</span></span><span class="sig-name descname"><span class="pre">read_json</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/io_utils.html#read_json"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.io_utils.read_json" title="Link to this definition">¶</a></dt>
<dd><p>Reads a JSON file from the specified file path, parses its content, and returns the
corresponding Python dictionary or list.</p>
<p>This function is designed to read JSON files with UTF-8 encoding. It opens the file
in read mode, reads its content, and converts the JSON content into a Python object
using the <cite>json.loads</cite> function.</p>
<dl class="simple">
<dt>Args:</dt><dd><p>path (str): The file path to the JSON file to be read.</p>
</dd>
<dt>Returns:</dt><dd><p>Union[dict, list]: A Python dictionary or list extracted from the JSON file.</p>
</dd>
<dt>Raises:</dt><dd><p>FileNotFoundError: If the specified file does not exist.
json.JSONDecodeError: If the file content is not valid JSON.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.io_utils.read_text">
<span class="sig-prename descclassname"><span class="pre">graphrag_toolkit.lexical_graph.utils.io_utils.</span></span><span class="sig-name descname"><span class="pre">read_text</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/io_utils.html#read_text"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.io_utils.read_text" title="Link to this definition">¶</a></dt>
<dd><p>Reads the contents of a text file specified by the given file path and returns
the content as a string.</p>
<dl class="simple">
<dt>Args:</dt><dd><p>path (str): The path to the text file to be read.</p>
</dd>
<dt>Returns:</dt><dd><p>str: The contents of the file as a string.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.io_utils.s3_read_data">
<span class="sig-prename descclassname"><span class="pre">graphrag_toolkit.lexical_graph.utils.io_utils.</span></span><span class="sig-name descname"><span class="pre">s3_read_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">s3_path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/io_utils.html#s3_read_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.io_utils.s3_read_data" title="Link to this definition">¶</a></dt>
<dd><p>Reads data from the given S3 path using the <cite>smart_open</cite> library and returns
the data as a string. This function provides an interface for downloading
and reading content from an S3 bucket. If the file does not exist or another
OS-level error occurs during the read operation, the error is printed, and it
is re-raised.</p>
<dl class="simple">
<dt>Args:</dt><dd><dl class="simple">
<dt>s3_path (str): The path to the file stored in the S3 bucket. This should</dt><dd><p>include the necessary protocol (e.g., ‘s3://’) and the file location.</p>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><p>str: The content of the file located at the specified S3 path as a string.</p>
</dd>
<dt>Raises:</dt><dd><dl class="simple">
<dt>OSError: If there is an error accessing or reading the file at the given</dt><dd><p>S3 path.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.io_utils.s3_write_data">
<span class="sig-prename descclassname"><span class="pre">graphrag_toolkit.lexical_graph.utils.io_utils.</span></span><span class="sig-name descname"><span class="pre">s3_write_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">s3_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/io_utils.html#s3_write_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.io_utils.s3_write_data" title="Link to this definition">¶</a></dt>
<dd><p>Writes data to a specified S3 path using smart_open.</p>
<p>This function utilizes the smart_open library to write the provided data
to an S3 path. It handles any file-related errors during the write
operation and raises them for further handling.</p>
<dl class="simple">
<dt>Args:</dt><dd><p>s3_path: The S3 path where data will be written.
data: The content to be written to the S3 path.</p>
</dd>
<dt>Raises:</dt><dd><p>OSError: If the write operation to the specified S3 path fails.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.io_utils.write_json">
<span class="sig-prename descclassname"><span class="pre">graphrag_toolkit.lexical_graph.utils.io_utils.</span></span><span class="sig-name descname"><span class="pre">write_json</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">j</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/io_utils.html#write_json"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.io_utils.write_json" title="Link to this definition">¶</a></dt>
<dd><p>Writes a given JSON object to a file at a specified path. Creates any necessary
parent directories if they do not exist prior to writing the file. The content is
dumped in a way that ensures non-ASCII characters are preserved.</p>
<dl class="simple">
<dt>Args:</dt><dd><p>path (str): The file path where the JSON should be written.
j (dict): The JSON object to be written to the specified file.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.io_utils.write_text">
<span class="sig-prename descclassname"><span class="pre">graphrag_toolkit.lexical_graph.utils.io_utils.</span></span><span class="sig-name descname"><span class="pre">write_text</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">text</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/io_utils.html#write_text"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.io_utils.write_text" title="Link to this definition">¶</a></dt>
<dd><p>Writes the specified text to a file at the given path. Creates any necessary
directories in the path if they do not already exist.</p>
<dl class="simple">
<dt>Args:</dt><dd><p>path: A string representing the file path where the text will be written.
text: A string representing the text content to write to the file.</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-graphrag_toolkit.lexical_graph.utils.llm_cache">
<span id="graphrag-toolkit-lexical-graph-utils-llm-cache-module"></span><h2>graphrag_toolkit.lexical_graph.utils.llm_cache module<a class="headerlink" href="#module-graphrag_toolkit.lexical_graph.utils.llm_cache" title="Link to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.llm_cache.LLMCache">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">graphrag_toolkit.lexical_graph.utils.llm_cache.</span></span><span class="sig-name descname"><span class="pre">LLMCache</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="keyword-only-separator o"><abbr title="Keyword-only parameters separator (PEP 3102)"><span class="pre">*</span></abbr></span></em>, <em class="sig-param"><span class="n"><span class="pre">llm</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">LLM</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">enable_cache</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose_prompt</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose_response</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/llm_cache.html#LLMCache"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.llm_cache.LLMCache" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">BaseModel</span></code></p>
<p>Create a new model by parsing and validating input data from keyword arguments.</p>
<p>Raises [<cite>ValidationError</cite>][pydantic_core.ValidationError] if the input data cannot be
validated to form a valid model.</p>
<p><cite>self</cite> is explicitly positional-only to allow <cite>self</cite> as a field name.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.llm_cache.LLMCache.enable_cache">
<span class="sig-name descname"><span class="pre">enable_cache</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.llm_cache.LLMCache.enable_cache" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.llm_cache.LLMCache.llm">
<span class="sig-name descname"><span class="pre">llm</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">LLM</span></em><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.llm_cache.LLMCache.llm" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.llm_cache.LLMCache.model">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">model</span></span><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.llm_cache.LLMCache.model" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.llm_cache.LLMCache.model_config">
<span class="sig-name descname"><span class="pre">model_config</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">ClassVar</span><span class="p"><span class="pre">[</span></span><span class="pre">ConfigDict</span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{}</span></em><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.llm_cache.LLMCache.model_config" title="Link to this definition">¶</a></dt>
<dd><p>Configuration for the model, should be a dictionary conforming to [<cite>ConfigDict</cite>][pydantic.config.ConfigDict].</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.llm_cache.LLMCache.predict">
<span class="sig-name descname"><span class="pre">predict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prompt</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">BasePromptTemplate</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">prompt_args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/llm_cache.html#LLMCache.predict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.llm_cache.LLMCache.predict" title="Link to this definition">¶</a></dt>
<dd><p>Predicts a response based on the given prompt and dynamic arguments using the configured
language model (LLM). Supports caching of responses to enhance efficiency for repeated
queries and handles verbose logging for debugging or monitoring purposes.</p>
<p>The function dynamically adapts caching behavior depending on the configuration. If caching
is disabled, responses are generated directly using the LLM. If caching is enabled, it calculates
a unique cache key based on the prompt and LLM configuration, then fetches responses from the
cache, if available, or generates and stores them for future use.</p>
<p>The function ensures proper handling of potential errors during model execution and writes
extensive logs when verbosity options are enabled, aiding in thorough tracking during execution.</p>
<dl class="simple">
<dt>Args:</dt><dd><dl class="simple">
<dt>prompt: A pre-formatted BasePromptTemplate instance containing the template definition</dt><dd><p>to generate the LLM response.</p>
</dd>
<dt><a href="#id7"><span class="problematic" id="id8">**</span></a>prompt_args: Arbitrary keyword arguments that provide dynamic content to fill</dt><dd><p>in the placeholders of the given prompt template.</p>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><p>str: The generated or cached response from the LLM.</p>
</dd>
<dt>Raises:</dt><dd><dl class="simple">
<dt>ModelError: If there is any exception while interacting with the LLM, detailed</dt><dd><p>configuration information is included to aid debugging.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.llm_cache.LLMCache.verbose_prompt">
<span class="sig-name descname"><span class="pre">verbose_prompt</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.llm_cache.LLMCache.verbose_prompt" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.llm_cache.LLMCache.verbose_response">
<span class="sig-name descname"><span class="pre">verbose_response</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.llm_cache.LLMCache.verbose_response" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</section>
<section id="module-graphrag_toolkit.lexical_graph.utils">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-graphrag_toolkit.lexical_graph.utils" title="Link to this heading">¶</a></h2>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="falkordb/modules.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">falkordb</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="graphrag_toolkit.lexical_graph.storage.vector.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">graphrag_toolkit.lexical_graph.storage.vector package</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2025, Amazon Web Services, Inc
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
            
            <div class="legal-info">
                <a href="https://aws.amazon.com/privacy">Privacy</a> | 
                <a href="https://aws.amazon.com/terms">Site Terms</a> | 
                <a href="#" id="cookie-button-link">Cookie preferences</a>
            </div>
            
          </div>
          <div class="right-details">
            <div class="icons">
              <a class="muted-link " href="https://github.com/awslabs/graphrag-toolkit" aria-label="GitHub">
                <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path>
                </svg>
            </a>
              
            </div>
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="sidebar-div show-div-md justify-content-left">
            <label class="nav-close-icon" id="toc-menu-close" for="__toc" tabindex="0">
                <div class="visually-hidden">Toggle site table of content right sidebar</div>
                <i class="icon"><svg><use href="#svg-close"></use></svg></i>
            </label>
        </div>
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">graphrag_toolkit.lexical_graph.utils package</a><ul>
<li><a class="reference internal" href="#submodules">Submodules</a></li>
<li><a class="reference internal" href="#module-graphrag_toolkit.lexical_graph.utils.bedrock_utils">graphrag_toolkit.lexical_graph.utils.bedrock_utils module</a></li>
<li><a class="reference internal" href="#module-graphrag_toolkit.lexical_graph.utils.fm_observability">graphrag_toolkit.lexical_graph.utils.fm_observability module</a><ul>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.BedrockEnabledTokenCountingHandler"><code class="docutils literal notranslate"><span class="pre">BedrockEnabledTokenCountingHandler</span></code></a><ul>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.BedrockEnabledTokenCountingHandler.on_event_end"><code class="docutils literal notranslate"><span class="pre">BedrockEnabledTokenCountingHandler.on_event_end()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.ConsoleFMObservabilitySubscriber"><code class="docutils literal notranslate"><span class="pre">ConsoleFMObservabilitySubscriber</span></code></a><ul>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.ConsoleFMObservabilitySubscriber.on_new_stats"><code class="docutils literal notranslate"><span class="pre">ConsoleFMObservabilitySubscriber.on_new_stats()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityHandler"><code class="docutils literal notranslate"><span class="pre">FMObservabilityHandler</span></code></a><ul>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityHandler.end_trace"><code class="docutils literal notranslate"><span class="pre">FMObservabilityHandler.end_trace()</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityHandler.on_event_end"><code class="docutils literal notranslate"><span class="pre">FMObservabilityHandler.on_event_end()</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityHandler.on_event_start"><code class="docutils literal notranslate"><span class="pre">FMObservabilityHandler.on_event_start()</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityHandler.reset_counts"><code class="docutils literal notranslate"><span class="pre">FMObservabilityHandler.reset_counts()</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityHandler.start_trace"><code class="docutils literal notranslate"><span class="pre">FMObservabilityHandler.start_trace()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityPublisher"><code class="docutils literal notranslate"><span class="pre">FMObservabilityPublisher</span></code></a><ul>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityPublisher.close"><code class="docutils literal notranslate"><span class="pre">FMObservabilityPublisher.close()</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityPublisher.publish_stats"><code class="docutils literal notranslate"><span class="pre">FMObservabilityPublisher.publish_stats()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityQueuePoller"><code class="docutils literal notranslate"><span class="pre">FMObservabilityQueuePoller</span></code></a><ul>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityQueuePoller.run"><code class="docutils literal notranslate"><span class="pre">FMObservabilityQueuePoller.run()</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityQueuePoller.stop"><code class="docutils literal notranslate"><span class="pre">FMObservabilityQueuePoller.stop()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats"><code class="docutils literal notranslate"><span class="pre">FMObservabilityStats</span></code></a><ul>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.average_embedding_duration_millis"><code class="docutils literal notranslate"><span class="pre">FMObservabilityStats.average_embedding_duration_millis</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.average_embedding_tokens"><code class="docutils literal notranslate"><span class="pre">FMObservabilityStats.average_embedding_tokens</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.average_llm_completion_tokens"><code class="docutils literal notranslate"><span class="pre">FMObservabilityStats.average_llm_completion_tokens</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.average_llm_duration_millis"><code class="docutils literal notranslate"><span class="pre">FMObservabilityStats.average_llm_duration_millis</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.average_llm_prompt_tokens"><code class="docutils literal notranslate"><span class="pre">FMObservabilityStats.average_llm_prompt_tokens</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.average_llm_tokens"><code class="docutils literal notranslate"><span class="pre">FMObservabilityStats.average_llm_tokens</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.on_event"><code class="docutils literal notranslate"><span class="pre">FMObservabilityStats.on_event()</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.total_embedding_count"><code class="docutils literal notranslate"><span class="pre">FMObservabilityStats.total_embedding_count</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.total_embedding_duration_millis"><code class="docutils literal notranslate"><span class="pre">FMObservabilityStats.total_embedding_duration_millis</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.total_embedding_tokens"><code class="docutils literal notranslate"><span class="pre">FMObservabilityStats.total_embedding_tokens</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.total_llm_completion_tokens"><code class="docutils literal notranslate"><span class="pre">FMObservabilityStats.total_llm_completion_tokens</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.total_llm_count"><code class="docutils literal notranslate"><span class="pre">FMObservabilityStats.total_llm_count</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.total_llm_duration_millis"><code class="docutils literal notranslate"><span class="pre">FMObservabilityStats.total_llm_duration_millis</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.total_llm_prompt_tokens"><code class="docutils literal notranslate"><span class="pre">FMObservabilityStats.total_llm_prompt_tokens</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.total_llm_tokens"><code class="docutils literal notranslate"><span class="pre">FMObservabilityStats.total_llm_tokens</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.update"><code class="docutils literal notranslate"><span class="pre">FMObservabilityStats.update()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilitySubscriber"><code class="docutils literal notranslate"><span class="pre">FMObservabilitySubscriber</span></code></a><ul>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilitySubscriber.on_new_stats"><code class="docutils literal notranslate"><span class="pre">FMObservabilitySubscriber.on_new_stats()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.StatPrintingSubscriber"><code class="docutils literal notranslate"><span class="pre">StatPrintingSubscriber</span></code></a><ul>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.StatPrintingSubscriber.cost_per_thousand_embedding_tokens"><code class="docutils literal notranslate"><span class="pre">StatPrintingSubscriber.cost_per_thousand_embedding_tokens</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.StatPrintingSubscriber.cost_per_thousand_input_tokens_llm"><code class="docutils literal notranslate"><span class="pre">StatPrintingSubscriber.cost_per_thousand_input_tokens_llm</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.StatPrintingSubscriber.cost_per_thousand_output_tokens_llm"><code class="docutils literal notranslate"><span class="pre">StatPrintingSubscriber.cost_per_thousand_output_tokens_llm</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.StatPrintingSubscriber.estimate_costs"><code class="docutils literal notranslate"><span class="pre">StatPrintingSubscriber.estimate_costs()</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.StatPrintingSubscriber.get_stats"><code class="docutils literal notranslate"><span class="pre">StatPrintingSubscriber.get_stats()</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.StatPrintingSubscriber.on_new_stats"><code class="docutils literal notranslate"><span class="pre">StatPrintingSubscriber.on_new_stats()</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.StatPrintingSubscriber.return_stats_dict"><code class="docutils literal notranslate"><span class="pre">StatPrintingSubscriber.return_stats_dict()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.get_patched_llm_token_counts"><code class="docutils literal notranslate"><span class="pre">get_patched_llm_token_counts()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-graphrag_toolkit.lexical_graph.utils.io_utils">graphrag_toolkit.lexical_graph.utils.io_utils module</a><ul>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.io_utils.read_json"><code class="docutils literal notranslate"><span class="pre">read_json()</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.io_utils.read_text"><code class="docutils literal notranslate"><span class="pre">read_text()</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.io_utils.s3_read_data"><code class="docutils literal notranslate"><span class="pre">s3_read_data()</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.io_utils.s3_write_data"><code class="docutils literal notranslate"><span class="pre">s3_write_data()</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.io_utils.write_json"><code class="docutils literal notranslate"><span class="pre">write_json()</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.io_utils.write_text"><code class="docutils literal notranslate"><span class="pre">write_text()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-graphrag_toolkit.lexical_graph.utils.llm_cache">graphrag_toolkit.lexical_graph.utils.llm_cache module</a><ul>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.llm_cache.LLMCache"><code class="docutils literal notranslate"><span class="pre">LLMCache</span></code></a><ul>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.llm_cache.LLMCache.enable_cache"><code class="docutils literal notranslate"><span class="pre">LLMCache.enable_cache</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.llm_cache.LLMCache.llm"><code class="docutils literal notranslate"><span class="pre">LLMCache.llm</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.llm_cache.LLMCache.model"><code class="docutils literal notranslate"><span class="pre">LLMCache.model</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.llm_cache.LLMCache.model_config"><code class="docutils literal notranslate"><span class="pre">LLMCache.model_config</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.llm_cache.LLMCache.predict"><code class="docutils literal notranslate"><span class="pre">LLMCache.predict()</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.llm_cache.LLMCache.verbose_prompt"><code class="docutils literal notranslate"><span class="pre">LLMCache.verbose_prompt</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.llm_cache.LLMCache.verbose_response"><code class="docutils literal notranslate"><span class="pre">LLMCache.verbose_response</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#module-graphrag_toolkit.lexical_graph.utils">Module contents</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="_static/documentation_options.js?v=f731707b"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/scripts/furo.js?v=5fa4622c"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=f281be69"></script>
    <script src="_static/js/custom.js?v=3ea019ec"></script>
    </body>
</html>