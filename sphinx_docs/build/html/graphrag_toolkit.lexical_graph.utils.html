

<!doctype html>
<html class="no-js" lang="en" data-content_root="./">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="genindex.html" /><link rel="search" title="Search" href="search.html" /><link rel="next" title="falkordb" href="falkordb/modules.html" /><link rel="prev" title="graphrag_toolkit.lexical_graph.storage.vector package" href="graphrag_toolkit.lexical_graph.storage.vector.html" />

    <!-- Generated with Sphinx 8.2.3 and Furo 2024.08.06 -->
        <title>graphrag_toolkit.lexical_graph.utils package - graphrag-toolkit 3.6.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo.css?v=354aac6f" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo-extensions.css?v=302659d7" />
    <link rel="stylesheet" type="text/css" href="_static/css/custom.css?v=5c2e0e83" />
    <link rel="stylesheet" type="text/css" href="_static/css/dark_light_mode.css?v=33639cc8" />
    
    
<script src="https://prod.assets.shortbread.aws.dev/shortbread.js"></script>
<link href="https://prod.assets.shortbread.aws.dev/shortbread.css" rel="stylesheet">
</head>
  <body>
     
<svg xmlns="http://www.w3.org/2000/svg" class="hidden">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path class="icon-opacity" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line class="icon-opacity" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line class="icon-opacity" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line class="icon-opacity" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line class="icon-opacity" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line class="icon-opacity" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line class="icon-opacity" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line class="icon-opacity" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line class="icon-opacity" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle class="icon-opacity" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>
<svg xmlns="http://www.w3.org/2000/svg" class="hidden">
    <symbol id="svg-close" viewBox="0 0 24 24">
        <title>Close Menu</title>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke="currentColor"
          stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
            <line x1="2" y1="22" x2="22" y2="2"/>
            <line x1="2" y1="2" x2="22" y2="22"/>
        </svg>
    </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" id="nav-menu-open" for="__navigation" tabindex="0">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">graphrag-toolkit 3.6.1 documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" id="toc-menu-open-sm" for="__toc" tabindex="0">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><div class="sidebar-div show-div-sm justify-content-right">
    <label class="nav-close-icon" id="nav-menu-close" for="__navigation" tabindex="0">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-close"></use></svg></i>
    </label>
</div><a class="sidebar-brand" href="index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo only-light" src="_static/logos/aws_light_theme_logo.svg" alt="Light Logo"/>
    <img class="sidebar-logo only-dark" src="_static/logos/aws_dark_theme_logo.svg" alt="Dark Logo"/>
  </div>
  
  <span class="sidebar-brand-text">graphrag-toolkit 3.6.1 documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-div">
    <p class="sidebar-heading">Feedback</p>
    <p class="sidebar-text">
        Do you have a suggestion to improve this website or graphrag-toolkit?
        <a href="https://github.com/awslabs/graphrag-toolkit/issues">Give us feedback</a>.
    </p>
</div><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">README and Overview</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="md/lexical-graph/README.html">Lexical Graph</a></li>
<li class="toctree-l1"><a class="reference internal" href="md/lexical-graph/overview.html">Overview</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Graph Store</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="md/lexical-graph/storage-model.html">Storage Model</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Graph Store</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="md/lexical-graph/graph-model.html">Graph Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="md/lexical-graph/graph-store-falkor-db.html">FalkorDB as a Graph Store</a></li>
<li class="toctree-l1"><a class="reference internal" href="md/lexical-graph/graph-store-neptune-analytics.html">Neptune Analytics as a Graph Store</a></li>
<li class="toctree-l1"><a class="reference internal" href="md/lexical-graph/graph-store-neptune-db.html">Neptune Database as a Graph Store</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Vector Store</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="md/lexical-graph/vector-store-neptune-analytics.html">Neptune Analytics as a Vector Store</a></li>
<li class="toctree-l1"><a class="reference internal" href="md/lexical-graph/vector-store-opensearch-serverless.html">Amazon OpenSearch Serverless as a Vector Store</a></li>
<li class="toctree-l1"><a class="reference internal" href="md/lexical-graph/vector-store-postgres.html">Postgres as a Vector Store</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Security</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="md/lexical-graph/security.html">Security</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Querying</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="md/lexical-graph/querying.html">Querying</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Multi-tenancy</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="md/lexical-graph/metadata-filtering.html">Metadata Filtering</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Indexing</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="md/lexical-graph/indexing.html">Indexing</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Indexing</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="md/lexical-graph/multi-tenancy.html">Multi-Tenancy</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Configuration</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="md/lexical-graph/configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="md/lexical-graph/aws-profile.html">Using AWS Profiles in <code class="docutils literal notranslate"><span class="pre">GraphRAGConfig</span></code></a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Batch Extraction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="md/lexical-graph/batch-extraction.html">Batch Extraction</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Batch Extraction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="md/lexical-graph/hybrid-deployment.html">Hybrid Deployment</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">FAQ</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="md/lexical-graph/faq.html">FAQ</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Lexical Graph API</span></p>
<ul class="current">
<li class="toctree-l1 current has-children"><a class="reference internal" href="modules.html">graphrag_toolkit</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of graphrag_toolkit</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2 current has-children"><a class="reference internal" href="graphrag_toolkit.html">graphrag_toolkit package</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of graphrag_toolkit package</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l3 current has-children"><a class="reference internal" href="graphrag_toolkit.lexical_graph.html">graphrag_toolkit.lexical_graph package</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of graphrag_toolkit.lexical_graph package</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l4 has-children"><a class="reference internal" href="graphrag_toolkit.lexical_graph.indexing.html">graphrag_toolkit.lexical_graph.indexing package</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of graphrag_toolkit.lexical_graph.indexing package</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="graphrag_toolkit.lexical_graph.indexing.build.html">graphrag_toolkit.lexical_graph.indexing.build package</a></li>
<li class="toctree-l5"><a class="reference internal" href="graphrag_toolkit.lexical_graph.indexing.extract.html">graphrag_toolkit.lexical_graph.indexing.extract package</a></li>
<li class="toctree-l5"><a class="reference internal" href="graphrag_toolkit.lexical_graph.indexing.load.html">graphrag_toolkit.lexical_graph.indexing.load package</a></li>
<li class="toctree-l5"><a class="reference internal" href="graphrag_toolkit.lexical_graph.indexing.utils.html">graphrag_toolkit.lexical_graph.indexing.utils package</a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="graphrag_toolkit.lexical_graph.retrieval.html">graphrag_toolkit.lexical_graph.retrieval package</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle navigation of graphrag_toolkit.lexical_graph.retrieval package</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="graphrag_toolkit.lexical_graph.retrieval.post_processors.html">graphrag_toolkit.lexical_graph.retrieval.post_processors package</a></li>
<li class="toctree-l5"><a class="reference internal" href="graphrag_toolkit.lexical_graph.retrieval.processors.html">graphrag_toolkit.lexical_graph.retrieval.processors package</a></li>
<li class="toctree-l5"><a class="reference internal" href="graphrag_toolkit.lexical_graph.retrieval.retrievers.html">graphrag_toolkit.lexical_graph.retrieval.retrievers package</a></li>
<li class="toctree-l5"><a class="reference internal" href="graphrag_toolkit.lexical_graph.retrieval.utils.html">graphrag_toolkit.lexical_graph.retrieval.utils package</a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="graphrag_toolkit.lexical_graph.storage.html">graphrag_toolkit.lexical_graph.storage package</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle navigation of graphrag_toolkit.lexical_graph.storage package</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="graphrag_toolkit.lexical_graph.storage.graph.html">graphrag_toolkit.lexical_graph.storage.graph package</a></li>
<li class="toctree-l5"><a class="reference internal" href="graphrag_toolkit.lexical_graph.storage.vector.html">graphrag_toolkit.lexical_graph.storage.vector package</a></li>
</ul>
</li>
<li class="toctree-l4 current current-page"><a class="current reference internal" href="#">graphrag_toolkit.lexical_graph.utils package</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">FalkorDB Plugin API</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="falkordb/modules.html">falkordb</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle navigation of falkordb</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="falkordb/falkordb.html">falkordb package</a></li>
</ul>
</li>
</ul>

</div></div>
      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          

<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" id="toc-menu-open-md" for="__toc" tabindex="0">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="graphrag-toolkit-lexical-graph-utils-package">
<h1>graphrag_toolkit.lexical_graph.utils package<a class="headerlink" href="#graphrag-toolkit-lexical-graph-utils-package" title="Link to this heading">¶</a></h1>
<section id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Link to this heading">¶</a></h2>
</section>
<section id="module-graphrag_toolkit.lexical_graph.utils.bedrock_utils">
<span id="graphrag-toolkit-lexical-graph-utils-bedrock-utils-module"></span><h2>graphrag_toolkit.lexical_graph.utils.bedrock_utils module<a class="headerlink" href="#module-graphrag_toolkit.lexical_graph.utils.bedrock_utils" title="Link to this heading">¶</a></h2>
</section>
<section id="module-graphrag_toolkit.lexical_graph.utils.fm_observability">
<span id="graphrag-toolkit-lexical-graph-utils-fm-observability-module"></span><h2>graphrag_toolkit.lexical_graph.utils.fm_observability module<a class="headerlink" href="#module-graphrag_toolkit.lexical_graph.utils.fm_observability" title="Link to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.BedrockEnabledTokenCountingHandler">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">graphrag_toolkit.lexical_graph.utils.fm_observability.</span></span><span class="sig-name descname"><span class="pre">BedrockEnabledTokenCountingHandler</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tokenizer</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">event_starts_to_ignore</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">CBEventType</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">event_ends_to_ignore</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">CBEventType</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Logger</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/fm_observability.html#BedrockEnabledTokenCountingHandler"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.BedrockEnabledTokenCountingHandler" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">TokenCountingHandler</span></code></p>
<p>Handles token counting and observability queue management in the context of
callbacks for specific events. It extends the TokenCountingHandler to provide
additional functionality tailored for use cases requiring direct association
with Bedrock-enabling mechanisms.</p>
<p>The class manages token counting for specific event types (e.g., LLM and
Embedding events), allows the exclusion of certain events from processing, and
ensures that token count lists are cleared when they exceed a threshold. It
also integrates with an observability queue for structured monitoring and
debugging purposes.</p>
<dl class="field-list simple">
<dt class="field-odd">Variables<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tokenizer</strong> – Callable function responsible for tokenizing input strings
into a list of tokens. Defaults to None if not explicitly set.</p></li>
<li><p><strong>event_starts_to_ignore</strong> – List of event types to be ignored during
start event operations. This allows for filtering out unneeded
processing. Defaults to None if not explicitly set.</p></li>
<li><p><strong>event_ends_to_ignore</strong> – List of event types to be ignored during
end event operations. This provides a mechanism for tailoring token
counting behavior. Defaults to None if not explicitly set.</p></li>
<li><p><strong>verbose</strong> – A boolean flag determining whether verbose output is enabled.
This helps in logging and debugging by providing more detailed system
behavior information.</p></li>
<li><p><strong>logger</strong> – Logging instance for capturing debug, info, or error logs
during operation. If not provided, logging will be disabled.</p></li>
</ul>
</dd>
</dl>
<p>Initializes the class with the specified parameters to customize behavior,
particularly for handling tokenization and event filtering during execution.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tokenizer</strong> – A callable that takes a string input and tokenizes it into a list.
Default is None.</p></li>
<li><p><strong>event_starts_to_ignore</strong> – A list of event start types (<cite>CBEventType</cite>) to ignore.
Default is None.</p></li>
<li><p><strong>event_ends_to_ignore</strong> – A list of event end types (<cite>CBEventType</cite>) to ignore.
Default is None.</p></li>
<li><p><strong>verbose</strong> – A boolean flag to enable or disable verbose output. Default is False.</p></li>
<li><p><strong>logger</strong> – An optional logger instance for logging messages. Default is None.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.BedrockEnabledTokenCountingHandler.on_event_end">
<span class="sig-name descname"><span class="pre">on_event_end</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">event_type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">CBEventType</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payload</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">event_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/fm_observability.html#BedrockEnabledTokenCountingHandler.on_event_end"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.BedrockEnabledTokenCountingHandler.on_event_end" title="Link to this definition">¶</a></dt>
<dd><p>Handles the ending of an event, processes event payloads, and updates observability
queues if necessary. This method primarily processes LLM and EMBEDDING event types,
extracts relevant token count information, and dispatches them to the observability
queue. It also ensures that token count tracking is reset if their sizes exceed
the threshold limit.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>event_type</strong> – The type of the event being ended (e.g., LLM, EMBEDDING).</p></li>
<li><p><strong>payload</strong> – The payload data associated with the event, including tokens
or other metadata. If None, no payload will be processed.</p></li>
<li><p><strong>event_id</strong> – The unique identifier for the event. Useful for tracking specific
events across the system.</p></li>
<li><p><strong>kwargs</strong> – Any additional named parameters required for custom handling.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.ConsoleFMObservabilitySubscriber">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">graphrag_toolkit.lexical_graph.utils.fm_observability.</span></span><span class="sig-name descname"><span class="pre">ConsoleFMObservabilitySubscriber</span></span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/fm_observability.html#ConsoleFMObservabilitySubscriber"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.ConsoleFMObservabilitySubscriber" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilitySubscriber" title="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilitySubscriber"><code class="xref py py-class docutils literal notranslate"><span class="pre">FMObservabilitySubscriber</span></code></a></p>
<p>Subscriber for managing and observing statistics within a console-based environment.</p>
<p>This class implements methods for handling and updating observability statistics
for foundational models (FM). The <cite>ConsoleFMObservabilitySubscriber</cite> maintains
an aggregated view of statistics and provides a mechanism to output these
statistics directly to the console for real-time monitoring.</p>
<dl class="field-list simple">
<dt class="field-odd">Variables<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>all_stats</strong> – Instance of <cite>FMObservabilityStats</cite> that aggregates and manages
all statistics related to observability.</p>
</dd>
</dl>
<p>The class is responsible for managing and tracking the statistics of observability data, specifically focusing
on FM (fault management) metrics. It provides a central location for storing and accessing aggregated statistical
information within the context of monitoring systems. This class initializes with an instance of
FMObservabilityStats.</p>
<section id="attributes">
<h3>Attributes<a class="headerlink" href="#attributes" title="Link to this heading">¶</a></h3>
<dl class="simple">
<dt>all_stats<span class="classifier">FMObservabilityStats</span></dt><dd><p>An object responsible for collecting and maintaining fault management observability metrics.</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.ConsoleFMObservabilitySubscriber.on_new_stats">
<span class="sig-name descname"><span class="pre">on_new_stats</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">stats</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats" title="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats"><span class="pre">FMObservabilityStats</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/fm_observability.html#ConsoleFMObservabilitySubscriber.on_new_stats"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.ConsoleFMObservabilitySubscriber.on_new_stats" title="Link to this definition">¶</a></dt>
<dd><p>Updates the current statistics with new observations and logs detailed information
about LLM-related and embeddings-related counts and tokens if the statistics are
updated successfully.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>stats</strong> (<a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats" title="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats"><em>FMObservabilityStats</em></a>) – The new set of statistics to be merged into the existing stats.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

</section>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityHandler">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">graphrag_toolkit.lexical_graph.utils.fm_observability.</span></span><span class="sig-name descname"><span class="pre">FMObservabilityHandler</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">event_starts_to_ignore</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">event_ends_to_ignore</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/fm_observability.html#FMObservabilityHandler"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityHandler" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCallbackHandler</span></code></p>
<p>Handles observability for monitored events by managing in-flight event tracking and
trace sessions.</p>
<p>This class extends the functionality of BaseCallbackHandler to provide specific
observability features for handling events. It keeps track of in-flight events, computes
metrics such as duration for completed events, and integrates with a queuing mechanism
for further processing. Additionally, it enables tracing sessions to facilitate monitoring
and debugging in distributed systems.</p>
<dl class="field-list simple">
<dt class="field-odd">Variables<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>in_flight_events</strong> – Dictionary for tracking ongoing events with event info.</p>
</dd>
</dl>
<p>Represents an event tracker used to handle in-flight events and manage ignored
start and end events. This class is designed to store and track details
of ongoing events and contains the logic for keeping a record of events
specified under the categories of ignored starts or ends.</p>
<p>This class initializes in-flight events and allows for the management
or extension of event tracking mechanisms.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>event_starts_to_ignore</strong> (<em>list</em>) – A list of event names or identifiers to be
ignored during the event start tracking. Defaults to an empty list.</p></li>
<li><p><strong>event_ends_to_ignore</strong> (<em>list</em>) – A list of event names or identifiers to be
ignored during the event end tracking. Defaults to an empty list.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityHandler.end_trace">
<span class="sig-name descname"><span class="pre">end_trace</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">trace_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trace_map</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/fm_observability.html#FMObservabilityHandler.end_trace"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityHandler.end_trace" title="Link to this definition">¶</a></dt>
<dd><p>Ends the trace with the provided <cite>trace_id</cite> and cleans up the related
mapping from <cite>trace_map</cite>, if applicable. Used to signify the completion
of a trace session and optionally to maintain the integrity of a
trace-tracking system.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>trace_id</strong> – An optional identifier for the trace to be ended. If not provided,
it assumes no specific trace ID is targeted.</p></li>
<li><p><strong>trace_map</strong> – An optional dictionary of trace mappings where the trace ID
could be associated with one or multiple session identifiers. This structure
helps maintain a reference and cleanup of related associations.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Nothing</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityHandler.on_event_end">
<span class="sig-name descname"><span class="pre">on_event_end</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">event_type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">CBEventType</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payload</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">event_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/fm_observability.html#FMObservabilityHandler.on_event_end"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityHandler.on_event_end" title="Link to this definition">¶</a></dt>
<dd><p>Handles the termination of an event and updates its metrics such as duration.
The function processes the event by checking whether it should be ignored and
ensures the appropriate payload keys are present based on the event type. If
the event is valid, its duration is calculated in milliseconds and the event
is staged for further processing by adding it to the observability queue.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>event_type</strong> – The type of the event. Must be of type CBEventType.</p></li>
<li><p><strong>payload</strong> – The dictionary containing additional data about the event.
It is optional and defaults to None.</p></li>
<li><p><strong>event_id</strong> – A unique identifier for the event. Defaults to an empty
string if not provided.</p></li>
<li><p><strong>kwargs</strong> – Additional optional keyword arguments.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityHandler.on_event_start">
<span class="sig-name descname"><span class="pre">on_event_start</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">event_type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">CBEventType</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payload</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">event_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parent_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/fm_observability.html#FMObservabilityHandler.on_event_start"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityHandler.on_event_start" title="Link to this definition">¶</a></dt>
<dd><p>Handles the initiation of a start event by processing its associated payload
and capturing relevant details for in-flight tracking. It checks the event
type and payload, processes specific event data based on type, and stores the
event in a tracking dictionary.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>event_type</strong> (<em>CBEventType</em>) – The type of event being started.</p></li>
<li><p><strong>payload</strong> (<em>Optional</em><em>[</em><em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em><em>]</em>) – Optional dictionary containing additional details about the
event, may hold serialized data for specific event types.</p></li>
<li><p><strong>event_id</strong> (<em>str</em>) – A unique identifier for the event.</p></li>
<li><p><strong>parent_id</strong> (<em>str</em>) – An identifier indicating the parent event, if applicable.</p></li>
<li><p><strong>kwargs</strong> (<em>Any</em>) – Additional arbitrary keyword arguments for flexibility.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The event ID of the initiated event.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityHandler.reset_counts">
<span class="sig-name descname"><span class="pre">reset_counts</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/fm_observability.html#FMObservabilityHandler.reset_counts"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityHandler.reset_counts" title="Link to this definition">¶</a></dt>
<dd><p>Resets the in-flight events dictionary to an empty state.</p>
<p>This method clears the <cite>in_flight_events</cite> attribute, which keeps track of
the events currently being processed. It resets it back to an empty dictionary,
effectively clearing all tracked in-flight events.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>None. The method does not return any value.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityHandler.start_trace">
<span class="sig-name descname"><span class="pre">start_trace</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">trace_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/fm_observability.html#FMObservabilityHandler.start_trace"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityHandler.start_trace" title="Link to this definition">¶</a></dt>
<dd><p>Starts a trace session, initializing it with the provided trace ID or generating
a new one if none is supplied. This is typically used to track operations or
activities across a distributed system or within an application for debugging
and monitoring purposes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>trace_id</strong> – Optional; The trace ID to be used for this trace session. If
omitted, the system will generate a new trace ID.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityPublisher">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">graphrag_toolkit.lexical_graph.utils.fm_observability.</span></span><span class="sig-name descname"><span class="pre">FMObservabilityPublisher</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">subscribers</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilitySubscriber" title="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilitySubscriber"><span class="pre">FMObservabilitySubscriber</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">interval_seconds</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">15.0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/fm_observability.html#FMObservabilityPublisher"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityPublisher" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Manages a list of subscribers to periodically publish collected statistics
using a polling mechanism, and provides lifecycle management capabilities.</p>
<p>This class encapsulates the functionality needed for subscribing to
observability events, collecting related statistics periodically, and handling
publishing these statistics to the subscribers. It also supports integration
with context management for automated resource cleanup.</p>
<dl class="field-list simple">
<dt class="field-odd">Variables<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>subscribers</strong> – List of subscribers to receive published statistics.
Subscribers must implement the FMObservabilitySubscriber interface.</p></li>
<li><p><strong>interval_seconds</strong> – Configurable time interval (in seconds) for publishing
statistics periodically.</p></li>
<li><p><strong>allow_continue</strong> – Flag to indicate if the continuous publishing process
is allowed or should be halted.</p></li>
<li><p><strong>poller</strong> – Instance of FMObservabilityQueuePoller that is responsible for
gathering statistical data.</p></li>
</ul>
</dd>
</dl>
<p>Initializes FMObservability, a system for managing observability with subscribers
and periodic publishing of statistics.</p>
<p>The constructor sets up a global observability queue, binds necessary handlers
to the callback manager, initializes subscribers, the publishing interval, and
a poller. It also starts a timer for periodic publishing of metrics or statistics.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>subscribers</strong> – List of FMObservabilitySubscriber objects that will handle
observability data.</p></li>
<li><p><strong>interval_seconds</strong> (<em>float</em>) – The interval in seconds at which stats will be published.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityPublisher.close">
<span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/fm_observability.html#FMObservabilityPublisher.close"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityPublisher.close" title="Link to this definition">¶</a></dt>
<dd><p>Disables the continuation state of the instance by setting the <cite>allow_continue</cite>
attribute to False. This method typically halts processes or terminates
iterations controlled by the <cite>allow_continue</cite> flag.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityPublisher.publish_stats">
<span class="sig-name descname"><span class="pre">publish_stats</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/fm_observability.html#FMObservabilityPublisher.publish_stats"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityPublisher.publish_stats" title="Link to this definition">¶</a></dt>
<dd><p>Stop the current statistics polling, restart the poller, and dispatch new statistics
to all subscribers. The method schedules another polling cycle if allowed.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
<p>:param None</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityQueuePoller">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">graphrag_toolkit.lexical_graph.utils.fm_observability.</span></span><span class="sig-name descname"><span class="pre">FMObservabilityQueuePoller</span></span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/fm_observability.html#FMObservabilityQueuePoller"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityQueuePoller" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Thread</span></code></p>
<p>Manages a thread-based queue poller for processing observability events.</p>
<p>This class runs in a separate thread to process events from a queue. It interacts
with an observability statistics tracker and can be safely started and stopped
to manage the lifecycle of event processing.</p>
<dl class="field-list simple">
<dt class="field-odd">Variables<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>_discontinue</strong> – A threading event used to signal and manage the stop state
of the thread. It enables controlled termination of the thread loop.</p></li>
<li><p><strong>fm_observability</strong> – Tracks and manages observability-related statistics,
providing functionality to handle processed events.</p></li>
</ul>
</dd>
</dl>
<p>Represents the initialization of an instance for handling internal
state and observability statistics.</p>
<dl class="field-list simple">
<dt class="field-odd">Variables<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>_discontinue</strong> – A threading event object used to signal when
the operation should be discontinued.</p></li>
<li><p><strong>fm_observability</strong> – An instance of FMObservabilityStats utilized
for managing and tracking observability-related statistics.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityQueuePoller.run">
<span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/fm_observability.html#FMObservabilityQueuePoller.run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityQueuePoller.run" title="Link to this definition">¶</a></dt>
<dd><p>Process events from the queue and handle them utilizing the observability framework.</p>
<p>This method continuously polls the <cite>_fm_observability_queue</cite> for events. If an event is retrieved,
it invokes the <cite>on_event</cite> method of the <cite>fm_observability</cite> instance to handle the event. Should
the <cite>_discontinue</cite> flag be set, the method ceases its operation. If the queue remains empty
for a specified timeout interval, the method continues its loop without handling an event.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>queue.Empty</strong> – Raised when attempting to get an item from an empty queue and the timeout expires.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityQueuePoller.stop">
<span class="sig-name descname"><span class="pre">stop</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/fm_observability.html#FMObservabilityQueuePoller.stop"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityQueuePoller.stop" title="Link to this definition">¶</a></dt>
<dd><p>Stops the queue polling process by setting the internal flag that signals
polling discontinuation. This method is intended to halt any ongoing
polling activities cleanly and efficiently. It logs the stopping operation
and provides access to relevant observability metrics upon completion.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Observability metrics related to the queue polling process.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>Any</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">graphrag_toolkit.lexical_graph.utils.fm_observability.</span></span><span class="sig-name descname"><span class="pre">FMObservabilityStats</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">total_llm_duration_millis</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">total_llm_count</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">total_llm_prompt_tokens</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">total_llm_completion_tokens</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">total_embedding_duration_millis</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">total_embedding_count</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">total_embedding_tokens</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/fm_observability.html#FMObservabilityStats"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Represents statistics for tracking aggregated performance metrics for
language model (LLM) operations and embedding operations.</p>
<p>This class is designed for the purpose of collecting and maintaining
performance metrics such as execution durations, counts, and token usage
for language model operations and embeddings. It provides methods for
updating the statistics based on incoming data and properties to
calculate derived statistics such as averages. This can be useful for
monitoring and analyzing the behavior and resource utilization of large
language models and embedding processes.</p>
<dl class="field-list simple">
<dt class="field-odd">Variables<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>total_llm_duration_millis</strong> – Cumulative total duration in milliseconds
of all LLM operations.</p></li>
<li><p><strong>total_llm_count</strong> – Total number of LLM operations executed.</p></li>
<li><p><strong>total_llm_prompt_tokens</strong> – Total number of tokens used in prompts
across all LLM operations.</p></li>
<li><p><strong>total_llm_completion_tokens</strong> – Total number of tokens used in
completions across all LLM operations.</p></li>
<li><p><strong>total_embedding_duration_millis</strong> – Cumulative total duration in
milliseconds of all embedding operations.</p></li>
<li><p><strong>total_embedding_count</strong> – Total number of embedding operations executed.</p></li>
<li><p><strong>total_embedding_tokens</strong> – Total number of tokens used in all embedding
operations.</p></li>
</ul>
</dd>
</dl>
<dl class="py property">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.average_embedding_duration_millis">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">average_embedding_duration_millis</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">int</span></em><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.average_embedding_duration_millis" title="Link to this definition">¶</a></dt>
<dd><p>Calculates and returns the average embedding duration in milliseconds.</p>
<p>The calculation is based on the total embedding duration and the total number
of embeddings. If there are no embeddings, the value returned is 0. This
property provides a convenient way to access the average embedding duration
directly.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The average embedding duration in milliseconds. Returns 0 if there
are no embeddings.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.average_embedding_tokens">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">average_embedding_tokens</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">int</span></em><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.average_embedding_tokens" title="Link to this definition">¶</a></dt>
<dd><p>Calculates and returns the average number of embedding tokens. The average
is computed by dividing the total number of embedding tokens by the total
embedding count. If the total embedding count is zero, the method returns
zero to prevent division by zero.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Integer value representing the average number of embedding tokens.
Returns 0 if the total embedding count is zero.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.average_llm_completion_tokens">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">average_llm_completion_tokens</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">int</span></em><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.average_llm_completion_tokens" title="Link to this definition">¶</a></dt>
<dd><p>Computes the average number of tokens used in the completion phase of
LLM (Large Language Model) interactions. This metric is calculated by dividing
the total completion tokens by the total count of LLM interactions. If no LLM
interactions have occurred, the function returns 0 to avoid division by zero.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The average number of completion tokens per LLM interaction.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.average_llm_duration_millis">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">average_llm_duration_millis</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">int</span></em><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.average_llm_duration_millis" title="Link to this definition">¶</a></dt>
<dd><p>Provides the average duration of LLM operations in milliseconds.</p>
<p>This property calculates the average duration based on the total LLM
duration and count. If there have been no LLM operations recorded
(total_llm_count is 0), it returns 0 to avoid division by zero.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The average LLM duration in milliseconds. If there are
no LLM operations recorded, it returns 0.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.average_llm_prompt_tokens">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">average_llm_prompt_tokens</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">int</span></em><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.average_llm_prompt_tokens" title="Link to this definition">¶</a></dt>
<dd><p>Computes the average number of tokens in LLM (Large Language Model) prompts.</p>
<p>This property calculates the average by dividing the total number of tokens in
LLM prompts (<cite>total_llm_prompt_tokens</cite>) by the total count of LLMs (<cite>total_llm_count</cite>).
If the total count of LLMs is zero, the result will be zero to avoid division
errors and maintain a sensible return value. This property ensures easy and
efficient access to the token average used across LLM prompts.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The average number of tokens in LLM prompts as an integer. Defaults
to zero if no LLM data is available.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.average_llm_tokens">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">average_llm_tokens</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">int</span></em><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.average_llm_tokens" title="Link to this definition">¶</a></dt>
<dd><p>Calculates the average number of Large Language Model (LLM) tokens per
count. If the total count of LLM instances is greater than zero, the method
returns the total tokens divided by the total count. Otherwise, it returns zero.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The average number of LLM tokens as an integer.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.on_event">
<span class="sig-name descname"><span class="pre">on_event</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">event</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">CBEvent</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/fm_observability.html#FMObservabilityStats.on_event"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.on_event" title="Link to this definition">¶</a></dt>
<dd><p>Handles the processing of events with different types, updating various counters
and accumulators based on the event payload. The function is invoked whenever an
event occurs, and modifies the object’s state based on the event type and its
associated payload data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>event</strong> (<em>CBEvent</em>) – A CBEvent instance representing the event to handle. It contains
details including the event type and a payload dict that holds related information.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.total_embedding_count">
<span class="sig-name descname"><span class="pre">total_embedding_count</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">int</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0</span></em><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.total_embedding_count" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.total_embedding_duration_millis">
<span class="sig-name descname"><span class="pre">total_embedding_duration_millis</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">float</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0</span></em><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.total_embedding_duration_millis" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.total_embedding_tokens">
<span class="sig-name descname"><span class="pre">total_embedding_tokens</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">float</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0</span></em><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.total_embedding_tokens" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.total_llm_completion_tokens">
<span class="sig-name descname"><span class="pre">total_llm_completion_tokens</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">float</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0</span></em><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.total_llm_completion_tokens" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.total_llm_count">
<span class="sig-name descname"><span class="pre">total_llm_count</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">int</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0</span></em><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.total_llm_count" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.total_llm_duration_millis">
<span class="sig-name descname"><span class="pre">total_llm_duration_millis</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">float</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0</span></em><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.total_llm_duration_millis" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.total_llm_prompt_tokens">
<span class="sig-name descname"><span class="pre">total_llm_prompt_tokens</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">float</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0</span></em><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.total_llm_prompt_tokens" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.total_llm_tokens">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">total_llm_tokens</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">int</span></em><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.total_llm_tokens" title="Link to this definition">¶</a></dt>
<dd><p>Calculates the total number of tokens used in an LLM operation.</p>
<p>The total includes both the prompt tokens and the completion tokens, which
are summed to determine the overall usage.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Total number of tokens used in an LLM operation.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.update">
<span class="sig-name descname"><span class="pre">update</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">stats</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/fm_observability.html#FMObservabilityStats.update"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.update" title="Link to this definition">¶</a></dt>
<dd><p>Updates the current object’s cumulative statistics based on another statistics object
and determines if there are any recorded LLM or embedding operations.</p>
<p>This method aggregates various metrics related to LLM (Large Language Model) operations
and embeddings, including their respective durations, counts, and token usage.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>stats</strong> (<em>Any</em>) – The statistics object containing the metrics to be added to the current object.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A boolean indicating whether there was at least one recorded LLM or embedding operation.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilitySubscriber">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">graphrag_toolkit.lexical_graph.utils.fm_observability.</span></span><span class="sig-name descname"><span class="pre">FMObservabilitySubscriber</span></span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/fm_observability.html#FMObservabilitySubscriber"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilitySubscriber" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">ABC</span></code></p>
<p>Interface defining an observability subscriber mechanism.</p>
<p>The FMObservabilitySubscriber class is an abstract base class intended to be
used as a blueprint for creating subscribers that respond to updates in
observability data. Concrete implementations are expected to define the behavior
required for processing newly received statistics. This class enforces the
implementation of the <cite>on_new_stats</cite> method, ensuring that it processes
instances of FMObservabilityStats.</p>
<dl class="py method">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilitySubscriber.on_new_stats">
<em class="property"><span class="k"><span class="pre">abstractmethod</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">on_new_stats</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">stats</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats" title="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats"><span class="pre">FMObservabilityStats</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/fm_observability.html#FMObservabilitySubscriber.on_new_stats"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilitySubscriber.on_new_stats" title="Link to this definition">¶</a></dt>
<dd><p>Abstract function that must be implemented by a derived class to process and
handle new FMObservabilityStats statistics. This method is expected to define
specific actions to be performed whenever a new instance of FMObservabilityStats
is received.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>stats</strong> – The new FMObservabilityStats object containing the statistics data
to be handled. The exact nature of the data will depend on the
implementation and definition of FMObservabilityStats.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.StatPrintingSubscriber">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">graphrag_toolkit.lexical_graph.utils.fm_observability.</span></span><span class="sig-name descname"><span class="pre">StatPrintingSubscriber</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cost_per_thousand_input_tokens_llm</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cost_per_thousand_output_tokens_llm</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cost_per_thousand_embedding_tokens</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/fm_observability.html#StatPrintingSubscriber"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.StatPrintingSubscriber" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilitySubscriber" title="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilitySubscriber"><code class="xref py py-class docutils literal notranslate"><span class="pre">FMObservabilitySubscriber</span></code></a></p>
<p>Manages, tracks, and reports observability-related cost statistics for a foundation model.</p>
<p>The class records cost metrics for processing tokens (input, output, and embedding)
and aggregates usage statistics. It provides methods to estimate costs, retrieve detailed
statistics, and update the internal state with new data. This class helps monitor and
analyze the token and duration-based usages and compute associated costs dynamically.</p>
<dl class="field-list simple">
<dt class="field-odd">Variables<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cost_per_thousand_input_tokens_llm</strong> – Cost associated with processing one thousand input tokens by the language model.</p></li>
<li><p><strong>cost_per_thousand_output_tokens_llm</strong> – Cost associated with processing one thousand output tokens by the language model.</p></li>
<li><p><strong>cost_per_thousand_embedding_tokens</strong> – Cost associated with processing one thousand embedding tokens.</p></li>
<li><p><strong>all_stats</strong> – Aggregated statistics tracking object for tokens, durations, and usage metrics.</p></li>
</ul>
</dd>
</dl>
<p>Initializes an instance to manage and track observability-related cost statistics for a
foundation model including costs for input tokens, output tokens, and embedding tokens.
The class encapsulates these parameters as input cost metrics and initializes an
aggregated statistics tracking object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cost_per_thousand_input_tokens_llm</strong> (<em>float</em>) – Cost associated with processing one thousand input tokens by the language model.</p></li>
<li><p><strong>cost_per_thousand_output_tokens_llm</strong> (<em>float</em>) – Cost associated with processing one thousand output tokens by the language model.</p></li>
<li><p><strong>cost_per_thousand_embedding_tokens</strong> (<em>float</em>) – Cost associated with processing one thousand embedding tokens.</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.StatPrintingSubscriber.cost_per_thousand_embedding_tokens">
<span class="sig-name descname"><span class="pre">cost_per_thousand_embedding_tokens</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">float</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0</span></em><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.StatPrintingSubscriber.cost_per_thousand_embedding_tokens" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.StatPrintingSubscriber.cost_per_thousand_input_tokens_llm">
<span class="sig-name descname"><span class="pre">cost_per_thousand_input_tokens_llm</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">float</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0</span></em><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.StatPrintingSubscriber.cost_per_thousand_input_tokens_llm" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.StatPrintingSubscriber.cost_per_thousand_output_tokens_llm">
<span class="sig-name descname"><span class="pre">cost_per_thousand_output_tokens_llm</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">float</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0</span></em><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.StatPrintingSubscriber.cost_per_thousand_output_tokens_llm" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.StatPrintingSubscriber.estimate_costs">
<span class="sig-name descname"><span class="pre">estimate_costs</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">float</span></span></span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/fm_observability.html#StatPrintingSubscriber.estimate_costs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.StatPrintingSubscriber.estimate_costs" title="Link to this definition">¶</a></dt>
<dd><p>Estimate the total cost based on token usage and predefined costs per thousand tokens.
The function calculates the cost using prompt tokens, completion tokens,
and embedding tokens, each scaled by their respective costs.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Total calculated cost as a float.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.StatPrintingSubscriber.get_stats">
<span class="sig-name descname"><span class="pre">get_stats</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/fm_observability.html#StatPrintingSubscriber.get_stats"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.StatPrintingSubscriber.get_stats" title="Link to this definition">¶</a></dt>
<dd><p>Provides a method to retrieve statistical data stored in the instance.</p>
<p>This method is used to access the <cite>all_stats</cite> attribute, which contains
the aggregated statistical data collected and managed within the instance.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The aggregated statistical data.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>Any</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.StatPrintingSubscriber.on_new_stats">
<span class="sig-name descname"><span class="pre">on_new_stats</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">stats</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats" title="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats"><span class="pre">FMObservabilityStats</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/fm_observability.html#StatPrintingSubscriber.on_new_stats"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.StatPrintingSubscriber.on_new_stats" title="Link to this definition">¶</a></dt>
<dd><p>Processes and updates internal statistics with the provided new data.</p>
<p>This method takes an instance of <cite>FMObservabilityStats</cite> containing new
observability statistics and integrates it into the current set of
stored statistics by updating the internal state of <cite>all_stats</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>stats</strong> (<a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats" title="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats"><em>FMObservabilityStats</em></a>) – New observation statistics to integrate.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.StatPrintingSubscriber.return_stats_dict">
<span class="sig-name descname"><span class="pre">return_stats_dict</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/fm_observability.html#StatPrintingSubscriber.return_stats_dict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.StatPrintingSubscriber.return_stats_dict" title="Link to this definition">¶</a></dt>
<dd><p>Generates and returns a dictionary containing various statistical data, including
counts, tokens, durations, and estimated costs. The data is aggregated from a
set of statistics managed within the class instance.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A dictionary containing statistical information.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>Dict[str, Any]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.get_patched_llm_token_counts">
<span class="sig-prename descclassname"><span class="pre">graphrag_toolkit.lexical_graph.utils.fm_observability.</span></span><span class="sig-name descname"><span class="pre">get_patched_llm_token_counts</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">token_counter</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">TokenCounter</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payload</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">event_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">TokenCountingEvent</span></span></span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/fm_observability.html#get_patched_llm_token_counts"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.get_patched_llm_token_counts" title="Link to this definition">¶</a></dt>
<dd><p>Calculates and returns token counts for a given payload using a provided token counter.
It processes payloads that contain either a prompt and completion, or messages and a
response. Additionally, it attempts to retrieve token counts from pre-attached metadata
or computes the counts if metadata is unavailable or invalid.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>token_counter</strong> (<em>TokenCounter</em>) – A utility for counting tokens in text or message objects.</p></li>
<li><p><strong>payload</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em>) – A dictionary containing the details of the LLM request/response. The
payload is expected to have either a <cite>PROMPT</cite> and <cite>COMPLETION</cite> or
<cite>MESSAGES</cite> and <cite>RESPONSE</cite> key.</p></li>
<li><p><strong>event_id</strong> (<em>str</em>) – An optional unique identifier for the token counting event. Defaults
to an empty string if not provided.</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – If the payload does not contain required keys or contains invalid
token counts.</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A TokenCountingEvent containing details about the token counts for prompt
and completion strings/messages.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>TokenCountingEvent</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-graphrag_toolkit.lexical_graph.utils.io_utils">
<span id="graphrag-toolkit-lexical-graph-utils-io-utils-module"></span><h2>graphrag_toolkit.lexical_graph.utils.io_utils module<a class="headerlink" href="#module-graphrag_toolkit.lexical_graph.utils.io_utils" title="Link to this heading">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.io_utils.read_json">
<span class="sig-prename descclassname"><span class="pre">graphrag_toolkit.lexical_graph.utils.io_utils.</span></span><span class="sig-name descname"><span class="pre">read_json</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/io_utils.html#read_json"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.io_utils.read_json" title="Link to this definition">¶</a></dt>
<dd><p>Reads a JSON file from the specified file path, parses its content, and
returns the corresponding Python dictionary or list.</p>
<p>This function is designed to read JSON files with UTF-8 encoding. It opens the file
in read mode, reads its content, and converts the JSON content into a Python object
using the <cite>json.loads</cite> function.</p>
<dl class="simple">
<dt>Args:</dt><dd><p>path (str): The file path to the JSON file to be read.</p>
</dd>
<dt>Returns:</dt><dd><p>Union[dict, list]: A Python dictionary or list extracted from the JSON file.</p>
</dd>
<dt>Raises:</dt><dd><p>FileNotFoundError: If the specified file does not exist.
json.JSONDecodeError: If the file content is not valid JSON.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.io_utils.read_text">
<span class="sig-prename descclassname"><span class="pre">graphrag_toolkit.lexical_graph.utils.io_utils.</span></span><span class="sig-name descname"><span class="pre">read_text</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/io_utils.html#read_text"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.io_utils.read_text" title="Link to this definition">¶</a></dt>
<dd><p>Reads the contents of a text file specified by the given file path and
returns the content as a string.</p>
<dl class="simple">
<dt>Args:</dt><dd><p>path (str): The path to the text file to be read.</p>
</dd>
<dt>Returns:</dt><dd><p>str: The contents of the file as a string.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.io_utils.s3_read_data">
<span class="sig-prename descclassname"><span class="pre">graphrag_toolkit.lexical_graph.utils.io_utils.</span></span><span class="sig-name descname"><span class="pre">s3_read_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">s3_path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/io_utils.html#s3_read_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.io_utils.s3_read_data" title="Link to this definition">¶</a></dt>
<dd><p>Reads data from the given S3 path using the <cite>smart_open</cite> library and
returns the data as a string. This function provides an interface for
downloading and reading content from an S3 bucket. If the file does not
exist or another OS-level error occurs during the read operation, the error
is printed, and it is re-raised.</p>
<dl class="simple">
<dt>Args:</dt><dd><dl class="simple">
<dt>s3_path (str): The path to the file stored in the S3 bucket. This should</dt><dd><p>include the necessary protocol (e.g., ‘s3://’) and the file location.</p>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><p>str: The content of the file located at the specified S3 path as a string.</p>
</dd>
<dt>Raises:</dt><dd><dl class="simple">
<dt>OSError: If there is an error accessing or reading the file at the given</dt><dd><p>S3 path.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.io_utils.s3_write_data">
<span class="sig-prename descclassname"><span class="pre">graphrag_toolkit.lexical_graph.utils.io_utils.</span></span><span class="sig-name descname"><span class="pre">s3_write_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">s3_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/io_utils.html#s3_write_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.io_utils.s3_write_data" title="Link to this definition">¶</a></dt>
<dd><p>Writes data to a specified S3 path using smart_open.</p>
<p>This function utilizes the smart_open library to write the provided data
to an S3 path. It handles any file-related errors during the write
operation and raises them for further handling.</p>
<dl class="simple">
<dt>Args:</dt><dd><p>s3_path: The S3 path where data will be written.
data: The content to be written to the S3 path.</p>
</dd>
<dt>Raises:</dt><dd><p>OSError: If the write operation to the specified S3 path fails.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.io_utils.write_json">
<span class="sig-prename descclassname"><span class="pre">graphrag_toolkit.lexical_graph.utils.io_utils.</span></span><span class="sig-name descname"><span class="pre">write_json</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">j</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/io_utils.html#write_json"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.io_utils.write_json" title="Link to this definition">¶</a></dt>
<dd><p>Writes a given JSON object to a file at a specified path. Creates any
necessary parent directories if they do not exist prior to writing the
file. The content is dumped in a way that ensures non-ASCII characters are
preserved.</p>
<dl class="simple">
<dt>Args:</dt><dd><p>path (str): The file path where the JSON should be written.
j (dict): The JSON object to be written to the specified file.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.io_utils.write_text">
<span class="sig-prename descclassname"><span class="pre">graphrag_toolkit.lexical_graph.utils.io_utils.</span></span><span class="sig-name descname"><span class="pre">write_text</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">text</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/io_utils.html#write_text"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.io_utils.write_text" title="Link to this definition">¶</a></dt>
<dd><p>Writes the specified text to a file at the given path. Creates any
necessary directories in the path if they do not already exist.</p>
<dl class="simple">
<dt>Args:</dt><dd><p>path: A string representing the file path where the text will be written.
text: A string representing the text content to write to the file.</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-graphrag_toolkit.lexical_graph.utils.llm_cache">
<span id="graphrag-toolkit-lexical-graph-utils-llm-cache-module"></span><h2>graphrag_toolkit.lexical_graph.utils.llm_cache module<a class="headerlink" href="#module-graphrag_toolkit.lexical_graph.utils.llm_cache" title="Link to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.llm_cache.LLMCache">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">graphrag_toolkit.lexical_graph.utils.llm_cache.</span></span><span class="sig-name descname"><span class="pre">LLMCache</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="keyword-only-separator o"><abbr title="Keyword-only parameters separator (PEP 3102)"><span class="pre">*</span></abbr></span></em>, <em class="sig-param"><span class="n"><span class="pre">llm</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">LLM</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">enable_cache</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose_prompt</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose_response</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/llm_cache.html#LLMCache"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.llm_cache.LLMCache" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">BaseModel</span></code></p>
<p>Create a new model by parsing and validating input data from keyword arguments.</p>
<p>Raises [<cite>ValidationError</cite>][pydantic_core.ValidationError] if the input data cannot be
validated to form a valid model.</p>
<p><cite>self</cite> is explicitly positional-only to allow <cite>self</cite> as a field name.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.llm_cache.LLMCache.enable_cache">
<span class="sig-name descname"><span class="pre">enable_cache</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.llm_cache.LLMCache.enable_cache" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.llm_cache.LLMCache.llm">
<span class="sig-name descname"><span class="pre">llm</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">LLM</span></em><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.llm_cache.LLMCache.llm" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.llm_cache.LLMCache.model">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">model</span></span><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.llm_cache.LLMCache.model" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.llm_cache.LLMCache.model_config">
<span class="sig-name descname"><span class="pre">model_config</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">ClassVar</span><span class="p"><span class="pre">[</span></span><span class="pre">ConfigDict</span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{}</span></em><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.llm_cache.LLMCache.model_config" title="Link to this definition">¶</a></dt>
<dd><p>Configuration for the model, should be a dictionary conforming to [<cite>ConfigDict</cite>][pydantic.config.ConfigDict].</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.llm_cache.LLMCache.predict">
<span class="sig-name descname"><span class="pre">predict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prompt</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">BasePromptTemplate</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">prompt_args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/llm_cache.html#LLMCache.predict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.llm_cache.LLMCache.predict" title="Link to this definition">¶</a></dt>
<dd><p>Predicts a response based on the given prompt and dynamic arguments
using the configured language model (LLM). Supports caching of
responses to enhance efficiency for repeated queries and handles
verbose logging for debugging or monitoring purposes.</p>
<p>The function dynamically adapts caching behavior depending on the configuration. If caching
is disabled, responses are generated directly using the LLM. If caching is enabled, it calculates
a unique cache key based on the prompt and LLM configuration, then fetches responses from the
cache, if available, or generates and stores them for future use.</p>
<p>The function ensures proper handling of potential errors during model execution and writes
extensive logs when verbosity options are enabled, aiding in thorough tracking during execution.</p>
<dl class="simple">
<dt>Args:</dt><dd><dl class="simple">
<dt>prompt: A pre-formatted BasePromptTemplate instance containing the template definition</dt><dd><p>to generate the LLM response.</p>
</dd>
<dt><a href="#id1"><span class="problematic" id="id2">**</span></a>prompt_args: Arbitrary keyword arguments that provide dynamic content to fill</dt><dd><p>in the placeholders of the given prompt template.</p>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><p>str: The generated or cached response from the LLM.</p>
</dd>
<dt>Raises:</dt><dd><dl class="simple">
<dt>ModelError: If there is any exception while interacting with the LLM, detailed</dt><dd><p>configuration information is included to aid debugging.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.llm_cache.LLMCache.verbose_prompt">
<span class="sig-name descname"><span class="pre">verbose_prompt</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.llm_cache.LLMCache.verbose_prompt" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.llm_cache.LLMCache.verbose_response">
<span class="sig-name descname"><span class="pre">verbose_response</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.llm_cache.LLMCache.verbose_response" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</section>
<section id="module-graphrag_toolkit.lexical_graph.utils">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-graphrag_toolkit.lexical_graph.utils" title="Link to this heading">¶</a></h2>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="falkordb/modules.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">falkordb</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="graphrag_toolkit.lexical_graph.storage.vector.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">graphrag_toolkit.lexical_graph.storage.vector package</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2025, Amazon Web Services, Inc
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
            
            <div class="legal-info">
                <a href="https://aws.amazon.com/privacy">Privacy</a> | 
                <a href="https://aws.amazon.com/terms">Site Terms</a> | 
                <a href="#" id="cookie-button-link">Cookie preferences</a>
            </div>
            
          </div>
          <div class="right-details">
            <div class="icons">
              <a class="muted-link " href="https://github.com/awslabs/graphrag-toolkit" aria-label="GitHub">
                <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path>
                </svg>
            </a>
              
            </div>
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="sidebar-div show-div-md justify-content-left">
            <label class="nav-close-icon" id="toc-menu-close" for="__toc" tabindex="0">
                <div class="visually-hidden">Toggle site table of content right sidebar</div>
                <i class="icon"><svg><use href="#svg-close"></use></svg></i>
            </label>
        </div>
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">graphrag_toolkit.lexical_graph.utils package</a><ul>
<li><a class="reference internal" href="#submodules">Submodules</a></li>
<li><a class="reference internal" href="#module-graphrag_toolkit.lexical_graph.utils.bedrock_utils">graphrag_toolkit.lexical_graph.utils.bedrock_utils module</a></li>
<li><a class="reference internal" href="#module-graphrag_toolkit.lexical_graph.utils.fm_observability">graphrag_toolkit.lexical_graph.utils.fm_observability module</a><ul>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.BedrockEnabledTokenCountingHandler"><code class="docutils literal notranslate"><span class="pre">BedrockEnabledTokenCountingHandler</span></code></a><ul>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.BedrockEnabledTokenCountingHandler.on_event_end"><code class="docutils literal notranslate"><span class="pre">BedrockEnabledTokenCountingHandler.on_event_end()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.ConsoleFMObservabilitySubscriber"><code class="docutils literal notranslate"><span class="pre">ConsoleFMObservabilitySubscriber</span></code></a><ul>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.ConsoleFMObservabilitySubscriber.on_new_stats"><code class="docutils literal notranslate"><span class="pre">ConsoleFMObservabilitySubscriber.on_new_stats()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityHandler"><code class="docutils literal notranslate"><span class="pre">FMObservabilityHandler</span></code></a><ul>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityHandler.end_trace"><code class="docutils literal notranslate"><span class="pre">FMObservabilityHandler.end_trace()</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityHandler.on_event_end"><code class="docutils literal notranslate"><span class="pre">FMObservabilityHandler.on_event_end()</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityHandler.on_event_start"><code class="docutils literal notranslate"><span class="pre">FMObservabilityHandler.on_event_start()</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityHandler.reset_counts"><code class="docutils literal notranslate"><span class="pre">FMObservabilityHandler.reset_counts()</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityHandler.start_trace"><code class="docutils literal notranslate"><span class="pre">FMObservabilityHandler.start_trace()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityPublisher"><code class="docutils literal notranslate"><span class="pre">FMObservabilityPublisher</span></code></a><ul>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityPublisher.close"><code class="docutils literal notranslate"><span class="pre">FMObservabilityPublisher.close()</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityPublisher.publish_stats"><code class="docutils literal notranslate"><span class="pre">FMObservabilityPublisher.publish_stats()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityQueuePoller"><code class="docutils literal notranslate"><span class="pre">FMObservabilityQueuePoller</span></code></a><ul>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityQueuePoller.run"><code class="docutils literal notranslate"><span class="pre">FMObservabilityQueuePoller.run()</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityQueuePoller.stop"><code class="docutils literal notranslate"><span class="pre">FMObservabilityQueuePoller.stop()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats"><code class="docutils literal notranslate"><span class="pre">FMObservabilityStats</span></code></a><ul>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.average_embedding_duration_millis"><code class="docutils literal notranslate"><span class="pre">FMObservabilityStats.average_embedding_duration_millis</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.average_embedding_tokens"><code class="docutils literal notranslate"><span class="pre">FMObservabilityStats.average_embedding_tokens</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.average_llm_completion_tokens"><code class="docutils literal notranslate"><span class="pre">FMObservabilityStats.average_llm_completion_tokens</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.average_llm_duration_millis"><code class="docutils literal notranslate"><span class="pre">FMObservabilityStats.average_llm_duration_millis</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.average_llm_prompt_tokens"><code class="docutils literal notranslate"><span class="pre">FMObservabilityStats.average_llm_prompt_tokens</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.average_llm_tokens"><code class="docutils literal notranslate"><span class="pre">FMObservabilityStats.average_llm_tokens</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.on_event"><code class="docutils literal notranslate"><span class="pre">FMObservabilityStats.on_event()</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.total_embedding_count"><code class="docutils literal notranslate"><span class="pre">FMObservabilityStats.total_embedding_count</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.total_embedding_duration_millis"><code class="docutils literal notranslate"><span class="pre">FMObservabilityStats.total_embedding_duration_millis</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.total_embedding_tokens"><code class="docutils literal notranslate"><span class="pre">FMObservabilityStats.total_embedding_tokens</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.total_llm_completion_tokens"><code class="docutils literal notranslate"><span class="pre">FMObservabilityStats.total_llm_completion_tokens</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.total_llm_count"><code class="docutils literal notranslate"><span class="pre">FMObservabilityStats.total_llm_count</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.total_llm_duration_millis"><code class="docutils literal notranslate"><span class="pre">FMObservabilityStats.total_llm_duration_millis</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.total_llm_prompt_tokens"><code class="docutils literal notranslate"><span class="pre">FMObservabilityStats.total_llm_prompt_tokens</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.total_llm_tokens"><code class="docutils literal notranslate"><span class="pre">FMObservabilityStats.total_llm_tokens</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.update"><code class="docutils literal notranslate"><span class="pre">FMObservabilityStats.update()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilitySubscriber"><code class="docutils literal notranslate"><span class="pre">FMObservabilitySubscriber</span></code></a><ul>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilitySubscriber.on_new_stats"><code class="docutils literal notranslate"><span class="pre">FMObservabilitySubscriber.on_new_stats()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.StatPrintingSubscriber"><code class="docutils literal notranslate"><span class="pre">StatPrintingSubscriber</span></code></a><ul>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.StatPrintingSubscriber.cost_per_thousand_embedding_tokens"><code class="docutils literal notranslate"><span class="pre">StatPrintingSubscriber.cost_per_thousand_embedding_tokens</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.StatPrintingSubscriber.cost_per_thousand_input_tokens_llm"><code class="docutils literal notranslate"><span class="pre">StatPrintingSubscriber.cost_per_thousand_input_tokens_llm</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.StatPrintingSubscriber.cost_per_thousand_output_tokens_llm"><code class="docutils literal notranslate"><span class="pre">StatPrintingSubscriber.cost_per_thousand_output_tokens_llm</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.StatPrintingSubscriber.estimate_costs"><code class="docutils literal notranslate"><span class="pre">StatPrintingSubscriber.estimate_costs()</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.StatPrintingSubscriber.get_stats"><code class="docutils literal notranslate"><span class="pre">StatPrintingSubscriber.get_stats()</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.StatPrintingSubscriber.on_new_stats"><code class="docutils literal notranslate"><span class="pre">StatPrintingSubscriber.on_new_stats()</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.StatPrintingSubscriber.return_stats_dict"><code class="docutils literal notranslate"><span class="pre">StatPrintingSubscriber.return_stats_dict()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.get_patched_llm_token_counts"><code class="docutils literal notranslate"><span class="pre">get_patched_llm_token_counts()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-graphrag_toolkit.lexical_graph.utils.io_utils">graphrag_toolkit.lexical_graph.utils.io_utils module</a><ul>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.io_utils.read_json"><code class="docutils literal notranslate"><span class="pre">read_json()</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.io_utils.read_text"><code class="docutils literal notranslate"><span class="pre">read_text()</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.io_utils.s3_read_data"><code class="docutils literal notranslate"><span class="pre">s3_read_data()</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.io_utils.s3_write_data"><code class="docutils literal notranslate"><span class="pre">s3_write_data()</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.io_utils.write_json"><code class="docutils literal notranslate"><span class="pre">write_json()</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.io_utils.write_text"><code class="docutils literal notranslate"><span class="pre">write_text()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-graphrag_toolkit.lexical_graph.utils.llm_cache">graphrag_toolkit.lexical_graph.utils.llm_cache module</a><ul>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.llm_cache.LLMCache"><code class="docutils literal notranslate"><span class="pre">LLMCache</span></code></a><ul>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.llm_cache.LLMCache.enable_cache"><code class="docutils literal notranslate"><span class="pre">LLMCache.enable_cache</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.llm_cache.LLMCache.llm"><code class="docutils literal notranslate"><span class="pre">LLMCache.llm</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.llm_cache.LLMCache.model"><code class="docutils literal notranslate"><span class="pre">LLMCache.model</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.llm_cache.LLMCache.model_config"><code class="docutils literal notranslate"><span class="pre">LLMCache.model_config</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.llm_cache.LLMCache.predict"><code class="docutils literal notranslate"><span class="pre">LLMCache.predict()</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.llm_cache.LLMCache.verbose_prompt"><code class="docutils literal notranslate"><span class="pre">LLMCache.verbose_prompt</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.llm_cache.LLMCache.verbose_response"><code class="docutils literal notranslate"><span class="pre">LLMCache.verbose_response</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#module-graphrag_toolkit.lexical_graph.utils">Module contents</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="_static/documentation_options.js?v=f731707b"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/scripts/furo.js?v=5fa4622c"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=f281be69"></script>
    <script src="_static/js/custom.js?v=3ea019ec"></script>
    </body>
</html>