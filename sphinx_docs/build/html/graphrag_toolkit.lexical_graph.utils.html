

<!doctype html>
<html class="no-js" lang="en" data-content_root="./">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="genindex.html" /><link rel="search" title="Search" href="search.html" /><link rel="next" title="falkordb" href="falkordb/modules.html" /><link rel="prev" title="graphrag_toolkit.lexical_graph.storage.vector package" href="graphrag_toolkit.lexical_graph.storage.vector.html" />

    <!-- Generated with Sphinx 8.2.3 and Furo 2024.08.06 -->
        <title>graphrag_toolkit.lexical_graph.utils package - graphrag-toolkit 3.6.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo.css?v=354aac6f" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo-extensions.css?v=302659d7" />
    <link rel="stylesheet" type="text/css" href="_static/css/custom.css?v=5c2e0e83" />
    <link rel="stylesheet" type="text/css" href="_static/css/dark_light_mode.css?v=33639cc8" />
    
    
<script src="https://prod.assets.shortbread.aws.dev/shortbread.js"></script>
<link href="https://prod.assets.shortbread.aws.dev/shortbread.css" rel="stylesheet">
</head>
  <body>
     
<svg xmlns="http://www.w3.org/2000/svg" class="hidden">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path class="icon-opacity" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line class="icon-opacity" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line class="icon-opacity" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line class="icon-opacity" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line class="icon-opacity" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line class="icon-opacity" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line class="icon-opacity" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line class="icon-opacity" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line class="icon-opacity" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle class="icon-opacity" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>
<svg xmlns="http://www.w3.org/2000/svg" class="hidden">
    <symbol id="svg-close" viewBox="0 0 24 24">
        <title>Close Menu</title>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke="currentColor"
          stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
            <line x1="2" y1="22" x2="22" y2="2"/>
            <line x1="2" y1="2" x2="22" y2="22"/>
        </svg>
    </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" id="nav-menu-open" for="__navigation" tabindex="0">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">graphrag-toolkit 3.6.1 documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" id="toc-menu-open-sm" for="__toc" tabindex="0">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><div class="sidebar-div show-div-sm justify-content-right">
    <label class="nav-close-icon" id="nav-menu-close" for="__navigation" tabindex="0">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-close"></use></svg></i>
    </label>
</div><a class="sidebar-brand" href="index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo only-light" src="_static/logos/aws_light_theme_logo.svg" alt="Light Logo"/>
    <img class="sidebar-logo only-dark" src="_static/logos/aws_dark_theme_logo.svg" alt="Dark Logo"/>
  </div>
  
  <span class="sidebar-brand-text">graphrag-toolkit 3.6.1 documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-div">
    <p class="sidebar-heading">Feedback</p>
    <p class="sidebar-text">
        Do you have a suggestion to improve this website or graphrag-toolkit?
        <a href="https://github.com/awslabs/graphrag-toolkit/issues">Give us feedback</a>.
    </p>
</div><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">README and Overview</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="md/lexical-graph/README.html">Lexical Graph</a></li>
<li class="toctree-l1"><a class="reference internal" href="md/lexical-graph/overview.html">Overview</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Graph Store</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="md/lexical-graph/storage-model.html">Storage Model</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Graph Store</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="md/lexical-graph/graph-model.html">Graph Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="md/lexical-graph/graph-store-falkor-db.html">FalkorDB as a Graph Store</a></li>
<li class="toctree-l1"><a class="reference internal" href="md/lexical-graph/graph-store-neptune-analytics.html">Neptune Analytics as a Graph Store</a></li>
<li class="toctree-l1"><a class="reference internal" href="md/lexical-graph/graph-store-neptune-db.html">Neptune Database as a Graph Store</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Vector Store</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="md/lexical-graph/vector-store-neptune-analytics.html">Neptune Analytics as a Vector Store</a></li>
<li class="toctree-l1"><a class="reference internal" href="md/lexical-graph/vector-store-opensearch-serverless.html">Amazon OpenSearch Serverless as a Vector Store</a></li>
<li class="toctree-l1"><a class="reference internal" href="md/lexical-graph/vector-store-postgres.html">Postgres as a Vector Store</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Security</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="md/lexical-graph/security.html">Security</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Querying</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="md/lexical-graph/querying.html">Querying</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Multi-tenancy</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="md/lexical-graph/metadata-filtering.html">Metadata Filtering</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Indexing</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="md/lexical-graph/indexing.html">Indexing</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Indexing</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="md/lexical-graph/multi-tenancy.html">Multi-Tenancy</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Configuration</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="md/lexical-graph/configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="md/lexical-graph/aws-profile.html">Using AWS Profiles in <code class="docutils literal notranslate"><span class="pre">GraphRAGConfig</span></code></a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Batch Extraction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="md/lexical-graph/batch-extraction.html">Batch Extraction</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Batch Extraction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="md/lexical-graph/hybrid-deployment.html">Hybrid Deployment</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">FAQ</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="md/lexical-graph/faq.html">FAQ</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Lexical Graph API</span></p>
<ul class="current">
<li class="toctree-l1 current has-children"><a class="reference internal" href="modules.html">graphrag_toolkit</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of graphrag_toolkit</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2 current has-children"><a class="reference internal" href="graphrag_toolkit.html">graphrag_toolkit package</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of graphrag_toolkit package</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l3 current has-children"><a class="reference internal" href="graphrag_toolkit.lexical_graph.html">graphrag_toolkit.lexical_graph package</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of graphrag_toolkit.lexical_graph package</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l4 has-children"><a class="reference internal" href="graphrag_toolkit.lexical_graph.indexing.html">graphrag_toolkit.lexical_graph.indexing package</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of graphrag_toolkit.lexical_graph.indexing package</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="graphrag_toolkit.lexical_graph.indexing.build.html">graphrag_toolkit.lexical_graph.indexing.build package</a></li>
<li class="toctree-l5"><a class="reference internal" href="graphrag_toolkit.lexical_graph.indexing.extract.html">graphrag_toolkit.lexical_graph.indexing.extract package</a></li>
<li class="toctree-l5"><a class="reference internal" href="graphrag_toolkit.lexical_graph.indexing.load.html">graphrag_toolkit.lexical_graph.indexing.load package</a></li>
<li class="toctree-l5"><a class="reference internal" href="graphrag_toolkit.lexical_graph.indexing.utils.html">graphrag_toolkit.lexical_graph.indexing.utils package</a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="graphrag_toolkit.lexical_graph.retrieval.html">graphrag_toolkit.lexical_graph.retrieval package</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle navigation of graphrag_toolkit.lexical_graph.retrieval package</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="graphrag_toolkit.lexical_graph.retrieval.post_processors.html">graphrag_toolkit.lexical_graph.retrieval.post_processors package</a></li>
<li class="toctree-l5"><a class="reference internal" href="graphrag_toolkit.lexical_graph.retrieval.processors.html">graphrag_toolkit.lexical_graph.retrieval.processors package</a></li>
<li class="toctree-l5"><a class="reference internal" href="graphrag_toolkit.lexical_graph.retrieval.retrievers.html">graphrag_toolkit.lexical_graph.retrieval.retrievers package</a></li>
<li class="toctree-l5"><a class="reference internal" href="graphrag_toolkit.lexical_graph.retrieval.utils.html">graphrag_toolkit.lexical_graph.retrieval.utils package</a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="graphrag_toolkit.lexical_graph.storage.html">graphrag_toolkit.lexical_graph.storage package</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle navigation of graphrag_toolkit.lexical_graph.storage package</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="graphrag_toolkit.lexical_graph.storage.graph.html">graphrag_toolkit.lexical_graph.storage.graph package</a></li>
<li class="toctree-l5"><a class="reference internal" href="graphrag_toolkit.lexical_graph.storage.vector.html">graphrag_toolkit.lexical_graph.storage.vector package</a></li>
</ul>
</li>
<li class="toctree-l4 current current-page"><a class="current reference internal" href="#">graphrag_toolkit.lexical_graph.utils package</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">FalkorDB Plugin API</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="falkordb/modules.html">falkordb</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle navigation of falkordb</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="falkordb/falkordb.html">falkordb package</a></li>
</ul>
</li>
</ul>

</div></div>
      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          

<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" id="toc-menu-open-md" for="__toc" tabindex="0">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="graphrag-toolkit-lexical-graph-utils-package">
<h1>graphrag_toolkit.lexical_graph.utils package<a class="headerlink" href="#graphrag-toolkit-lexical-graph-utils-package" title="Link to this heading">¶</a></h1>
<section id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Link to this heading">¶</a></h2>
</section>
<section id="module-graphrag_toolkit.lexical_graph.utils.bedrock_utils">
<span id="graphrag-toolkit-lexical-graph-utils-bedrock-utils-module"></span><h2>graphrag_toolkit.lexical_graph.utils.bedrock_utils module<a class="headerlink" href="#module-graphrag_toolkit.lexical_graph.utils.bedrock_utils" title="Link to this heading">¶</a></h2>
</section>
<section id="module-graphrag_toolkit.lexical_graph.utils.fm_observability">
<span id="graphrag-toolkit-lexical-graph-utils-fm-observability-module"></span><h2>graphrag_toolkit.lexical_graph.utils.fm_observability module<a class="headerlink" href="#module-graphrag_toolkit.lexical_graph.utils.fm_observability" title="Link to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.BedrockEnabledTokenCountingHandler">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">graphrag_toolkit.lexical_graph.utils.fm_observability.</span></span><span class="sig-name descname"><span class="pre">BedrockEnabledTokenCountingHandler</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tokenizer</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">event_starts_to_ignore</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">CBEventType</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">event_ends_to_ignore</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">CBEventType</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Logger</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/fm_observability.html#BedrockEnabledTokenCountingHandler"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.BedrockEnabledTokenCountingHandler" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">TokenCountingHandler</span></code></p>
<p>Handles advanced token counting for LLM and embedding operations, equipped
with special handling features and event queueing for observability. This
class extends <cite>TokenCountingHandler</cite> by including additional logic specific
to event-based token tracking and threshold-based resets of token counts.</p>
<dl class="field-list simple">
<dt class="field-odd">Variables<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tokenizer</strong> – Callable responsible for tokenizing input strings into a list
of tokens.</p></li>
<li><p><strong>event_starts_to_ignore</strong> – List of CBEventType items representing event
types to ignore when a start event occurs.</p></li>
<li><p><strong>event_ends_to_ignore</strong> – List of CBEventType items representing event types
to ignore when an end event occurs.</p></li>
<li><p><strong>verbose</strong> – Indicates whether to enable verbose output.</p></li>
<li><p><strong>logger</strong> – Logger instance used for logging callback-related information.</p></li>
</ul>
</dd>
</dl>
<p>Initializes the class with specified parameters. The provided
parameters will control the behavior of the callback system for token
counting. This includes the tokenizer to be used, events to be ignored
during start and end operations, verbosity level, and an optional
logger for logging purposes.</p>
<dl>
<dt>Args:</dt><dd><dl class="simple">
<dt>tokenizer: Optional callable responsible for tokenizing input strings into</dt><dd><p>a list of tokens.</p>
</dd>
<dt>event_starts_to_ignore: Optional list of CBEventType items representing</dt><dd><p>event types to ignore when a start event occurs.</p>
</dd>
<dt>event_ends_to_ignore: Optional list of CBEventType items representing event</dt><dd><p>types to ignore when an end event occurs.</p>
</dd>
</dl>
<p>verbose: Boolean indicating whether to enable verbose output.
logger: Optional logging.Logger instance for logging callback-related</p>
<blockquote>
<div><p>information.</p>
</div></blockquote>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.BedrockEnabledTokenCountingHandler.on_event_end">
<span class="sig-name descname"><span class="pre">on_event_end</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">event_type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">CBEventType</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payload</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">event_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/fm_observability.html#BedrockEnabledTokenCountingHandler.on_event_end"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.BedrockEnabledTokenCountingHandler.on_event_end" title="Link to this definition">¶</a></dt>
<dd><p>Handles the end of an event by processing token counts for LLM or Embedding
events, and adding them to the observability queue if applicable. It also
ensures token count lists are cleared when they exceed a threshold.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>event_type</strong> (<em>CBEventType</em>) – The type of the event being handled.</p></li>
<li><p><strong>payload</strong> (<em>Optional</em><em>[</em><em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em><em>]</em>) – Additional event-specific data. Defaults to None.</p></li>
<li><p><strong>event_id</strong> (<em>str</em>) – A unique identifier for the event. Defaults to an empty string.</p></li>
<li><p><strong>kwargs</strong> (<em>Any</em>) – Additional keyword arguments to be passed.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.ConsoleFMObservabilitySubscriber">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">graphrag_toolkit.lexical_graph.utils.fm_observability.</span></span><span class="sig-name descname"><span class="pre">ConsoleFMObservabilitySubscriber</span></span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/fm_observability.html#ConsoleFMObservabilitySubscriber"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.ConsoleFMObservabilitySubscriber" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilitySubscriber" title="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilitySubscriber"><code class="xref py py-class docutils literal notranslate"><span class="pre">FMObservabilitySubscriber</span></code></a></p>
<p>Subscribes to and processes observability statistics for feature management
systems.</p>
<p>This class handles the aggregation and representation of observability statistics
in a console-based format. It collects incoming data, updates the aggregated
statistics, and displays summary information regarding LLM (Large Language Model)
activity and Embedding usage.</p>
<dl class="field-list simple">
<dt class="field-odd">Variables<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>all_stats</strong> – Aggregated observability statistics.</p>
</dd>
</dl>
<p>Represents the initialization of default attributes for observability stats.</p>
<p>This constructor initializes the <cite>all_stats</cite> attribute which holds an
instance of <cite>FMObservabilityStats</cite>. This attribute is utilized to manage
and access all statistical data related to observability.</p>
<dl class="simple">
<dt>Attributes:</dt><dd><p>all_stats (FMObservabilityStats): Holds the default instance
of the <cite>FMObservabilityStats</cite> class for tracking observability
statistics.</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.ConsoleFMObservabilitySubscriber.on_new_stats">
<span class="sig-name descname"><span class="pre">on_new_stats</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">stats</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats" title="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats"><span class="pre">FMObservabilityStats</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/fm_observability.html#ConsoleFMObservabilitySubscriber.on_new_stats"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.ConsoleFMObservabilitySubscriber.on_new_stats" title="Link to this definition">¶</a></dt>
<dd><p>Handles the intake of new statistics and updates the existing aggregated statistics. If the statistics are successfully
updated, it will print current values including counts and tokens for LLMs and embeddings.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>stats</strong> (<a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats" title="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats"><em>FMObservabilityStats</em></a>) – New set of statistics to integrate with the existing data.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityHandler">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">graphrag_toolkit.lexical_graph.utils.fm_observability.</span></span><span class="sig-name descname"><span class="pre">FMObservabilityHandler</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">event_starts_to_ignore</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">event_ends_to_ignore</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/fm_observability.html#FMObservabilityHandler"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityHandler" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">BaseCallbackHandler</span></code></p>
<p>Handles the management and processing of events with detailed functionality for
event handling, trace management, and observability.</p>
<p>The primary purpose of this class is to manage event lifecycle methods, such as
starting and ending events, while maintaining in-flight events data. Additionally,
the class supports trace management, enabling tracking of operations sequences.</p>
<dl class="field-list simple">
<dt class="field-odd">Variables<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>event_starts_to_ignore</strong> – A list of event start identifiers that should be ignored.</p></li>
<li><p><strong>event_ends_to_ignore</strong> – A list of event end identifiers that should be ignored.</p></li>
<li><p><strong>in_flight_events</strong> – A dictionary to maintain events that are currently in flight.</p></li>
</ul>
</dd>
</dl>
<p>Initializes the object with specified events to ignore and initializes the
in-flight events dictionary.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>event_starts_to_ignore</strong> (<em>list</em><em>[</em><em>str</em><em>]</em>) – List of event start names to ignore. Defaults to an empty list.</p></li>
<li><p><strong>event_ends_to_ignore</strong> (<em>list</em><em>[</em><em>str</em><em>]</em>) – List of event end names to ignore. Defaults to an empty list.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityHandler.end_trace">
<span class="sig-name descname"><span class="pre">end_trace</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">trace_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trace_map</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/fm_observability.html#FMObservabilityHandler.end_trace"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityHandler.end_trace" title="Link to this definition">¶</a></dt>
<dd><p>Ends the trace associated with a specific trace ID and updates the provided trace map.
Typically used to finalize tracing activities by removing or finalizing trace entries.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>trace_id</strong> – Optional; Identifier for the trace that needs to be ended. If None,
no specific trace will be targeted.</p></li>
<li><p><strong>trace_map</strong> – Optional; A dictionary mapping trace IDs to a list of associated
trace details. Can be updated or modified as a part of ending the trace.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Nothing is returned by this function.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityHandler.on_event_end">
<span class="sig-name descname"><span class="pre">on_event_end</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">event_type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">CBEventType</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payload</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">event_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/fm_observability.html#FMObservabilityHandler.on_event_end"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityHandler.on_event_end" title="Link to this definition">¶</a></dt>
<dd><p>Handles the completion of an event and performs necessary operations such
as computing event duration and dispatching it for processing. The method
removes the event from the in-flight events tracker and posts it to the
observability queue if applicable. Ensures specific cases for different
event types, such as LLM and EMBEDDING events, are managed appropriately.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>event_type</strong> – The type of event that has ended, represented as
a member of <cite>CBEventType</cite> enumeration.</p></li>
<li><p><strong>payload</strong> – The payload associated with the event, which may
contain additional context such as messages or embeddings. Defaults
to None.</p></li>
<li><p><strong>event_id</strong> – A unique identifier for the event being processed.
Defaults to an empty string.</p></li>
<li><p><strong>kwargs</strong> – Additional keyword arguments that may be required for
future extensibility.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>This method does not return anything.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityHandler.on_event_start">
<span class="sig-name descname"><span class="pre">on_event_start</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">event_type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">CBEventType</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payload</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">event_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parent_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/fm_observability.html#FMObservabilityHandler.on_event_start"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityHandler.on_event_start" title="Link to this definition">¶</a></dt>
<dd><p>Handles the start of an event by processing the event type and payload data.
It stores relevant event information in-flight events for further usage.
This function is used to manage and monitor events of specific types.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>event_type</strong> (<em>CBEventType</em>) – The type of event being started.</p></li>
<li><p><strong>payload</strong> (<em>Optional</em><em>[</em><em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em><em>]</em>) – Optional dictionary containing event-related data.
Defaults to None if no payload data is provided.</p></li>
<li><p><strong>event_id</strong> (<em>str</em>) – A unique string identifier for the event.
Defaults to an empty string if not specified.</p></li>
<li><p><strong>parent_id</strong> (<em>str</em>) – A string identifier for the parent event,
if applicable. Defaults to an empty string if not specified.</p></li>
<li><p><strong>kwargs</strong> (<em>Any</em>) – Additional keyword arguments to handle optional parameters.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The ID of the event being processed.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityHandler.reset_counts">
<span class="sig-name descname"><span class="pre">reset_counts</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/fm_observability.html#FMObservabilityHandler.reset_counts"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityHandler.reset_counts" title="Link to this definition">¶</a></dt>
<dd><p>Resets the event counts by clearing the internal data structure. This method
empties the dictionary <cite>in_flight_events</cite> to ensure no previous state or data
remains.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityHandler.start_trace">
<span class="sig-name descname"><span class="pre">start_trace</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">trace_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/fm_observability.html#FMObservabilityHandler.start_trace"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityHandler.start_trace" title="Link to this definition">¶</a></dt>
<dd><p>Starts a new trace session with an optional trace identifier.</p>
<p>This method initiates a tracing session where a unique trace ID can be
assigned. If no ID is provided, a default mechanism may generate one.
Traces are fundamental in distributed systems for tracking request flows
throughout various system components.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>trace_id</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em>) – An optional unique identifier string for the trace.
If not provided, the system may assign a default identifier.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityPublisher">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">graphrag_toolkit.lexical_graph.utils.fm_observability.</span></span><span class="sig-name descname"><span class="pre">FMObservabilityPublisher</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">subscribers</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilitySubscriber" title="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilitySubscriber"><span class="pre">FMObservabilitySubscriber</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">interval_seconds</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">15.0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/fm_observability.html#FMObservabilityPublisher"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityPublisher" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Manages observability subscribers, processes observability queue data, and publishes statistics.</p>
<p>The FMObservabilityPublisher class serves as a utility to handle the collection and publishing
of observability data. It works by managing subscribers and periodically sending them updated
statistics. Additionally, it allows for integration with a context manager for proper resource
cleanup.</p>
<dl class="field-list simple">
<dt class="field-odd">Variables<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>subscribers</strong> – A list of subscribers to receive the observability data.
These subscribers must implement the FMObservabilitySubscriber interface.</p></li>
<li><p><strong>interval_seconds</strong> – The interval in seconds for publishing statistics to the subscribers.</p></li>
<li><p><strong>allow_continue</strong> – A flag indicating whether the periodic polling process is allowed
to continue or not.</p></li>
<li><p><strong>poller</strong> – An instance of FMObservabilityQueuePoller used to handle the
polling mechanism for gathering observability statistics.</p></li>
</ul>
</dd>
</dl>
<p>Initializes an FMObservability instance to manage subscribers and periodically
publish statistics through a polling mechanism. It also sets up the necessary
callback handlers.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>subscribers</strong> – List of FMObservabilitySubscriber instances to subscribe
to the observability events.</p></li>
<li><p><strong>interval_seconds</strong> – Time interval in seconds for triggering the statistics
publishing mechanism. Defaults to 15.0.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityPublisher.close">
<span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/fm_observability.html#FMObservabilityPublisher.close"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityPublisher.close" title="Link to this definition">¶</a></dt>
<dd><p>Disables the continuation flag to stop further processing by
setting <cite>allow_continue</cite> to <cite>False</cite>.</p>
<p>This method is used to signal that no further continuation or
processing should occur, often in response to a specific condition
or as part of a controlled shutdown process. Altering the
<cite>allow_continue</cite> attribute ensures that the object reflects the
halted state and prevents operations that depend on continuation.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityPublisher.publish_stats">
<span class="sig-name descname"><span class="pre">publish_stats</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/fm_observability.html#FMObservabilityPublisher.publish_stats"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityPublisher.publish_stats" title="Link to this definition">¶</a></dt>
<dd><p>Publishes statistics collected by the poller to all subscribers and handles the lifecycle
of the poller, including restarting or stopping it based on the configuration.</p>
<p>The function retrieves the collected stats from the current poller, restarts the
poller and starts it to continue collecting data if allowed. It schedules the next
execution of this method at regular intervals as configured. If allowed to continue,
it ensures the process runs periodically. Otherwise, it logs the shutdown process.
It also notifies all registered subscribers about the newly published stats.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityQueuePoller">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">graphrag_toolkit.lexical_graph.utils.fm_observability.</span></span><span class="sig-name descname"><span class="pre">FMObservabilityQueuePoller</span></span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/fm_observability.html#FMObservabilityQueuePoller"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityQueuePoller" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Thread</span></code></p>
<p>Handles queue polling for observability purposes on a separate thread.</p>
<p>This class extends <cite>threading.Thread</cite> to perform continuous polling of a
queue that collects observability events. It processes these events by
delegating them to the <cite>FMObservabilityStats</cite> instance. The class also
provides mechanisms to start and stop the polling process safely using
thread signaling.</p>
<dl class="field-list simple">
<dt class="field-odd">Variables<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>_discontinue</strong> – Threading event used to signal and manage thread lifecycle
or operations that need coordination.</p></li>
<li><p><strong>fm_observability</strong> – Instance of FMObservabilityStats that handles
observability-related statistics and functionality.</p></li>
</ul>
</dd>
</dl>
<p>Represents the initialization of a class that manages threading events and
observability statistics. The constructor sets up an event object for signaling
and an instance of an observability statistics tracker.</p>
<dl class="simple">
<dt>Attributes:</dt><dd><dl class="simple">
<dt>_discontinue (threading.Event): A threading event used to signal and manage</dt><dd><p>lifecycle events or state changes within the context of threading.
It allows threads to communicate and signal state changes effectively.</p>
</dd>
<dt>fm_observability (FMObservabilityStats): An instance of the</dt><dd><p>FMObservabilityStats class, responsible for tracking and handling
observability-related statistics or data points.</p>
</dd>
</dl>
</dd>
<dt>Methods:</dt><dd><p>This class only contains initializations and does not define other methods
explicitly. Method-specific details are not documented here as this docstring
pertains to the class-level overview.</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityQueuePoller.run">
<span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/fm_observability.html#FMObservabilityQueuePoller.run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityQueuePoller.run" title="Link to this definition">¶</a></dt>
<dd><p>Polls a queue to process incoming events and passes them to an observer. The method
continuously runs in a loop until a stopping signal is triggered externally. If an event
is retrieved from the queue, it is processed using the <cite>fm_observability</cite> attribute.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>queue.Empty</strong> – when the queue is empty and no event is found within the timeout
period.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityQueuePoller.stop">
<span class="sig-name descname"><span class="pre">stop</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/fm_observability.html#FMObservabilityQueuePoller.stop"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityQueuePoller.stop" title="Link to this definition">¶</a></dt>
<dd><p>Stops the queue poller and updates observability status.</p>
<p>The method halts the queue polling process by setting an internal flag,
<cite>_discontinue</cite>, which signals the process to stop. It then returns the
observability status for further evaluation or logging.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>self</strong> – The instance of the class where the method is called.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Observability status after stopping the queue poller. The type
of the return value corresponds to the <cite>fm_observability</cite> attribute.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">graphrag_toolkit.lexical_graph.utils.fm_observability.</span></span><span class="sig-name descname"><span class="pre">FMObservabilityStats</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">total_llm_duration_millis</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">total_llm_count</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">total_llm_prompt_tokens</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">total_llm_completion_tokens</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">total_embedding_duration_millis</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">total_embedding_count</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">total_embedding_tokens</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/fm_observability.html#FMObservabilityStats"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Encapsulates observability statistics for operations involving Language
Learning Models (LLM) and embeddings.</p>
<p>This class is designed to track and manage cumulative statistics related to
LLM and embedding operations, including their duration, count, and token usage.
It includes methods for updating these statistics from external inputs,
handling events, and computing various metrics such as averages for time
and token usage. This class can be used in scenarios where monitoring and
analysis of LLM and embedding system performance is required.</p>
<dl class="field-list simple">
<dt class="field-odd">Variables<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>total_llm_duration_millis</strong> – Total duration of all LLM operations in milliseconds.</p></li>
<li><p><strong>total_llm_count</strong> – Total number of LLM operations conducted.</p></li>
<li><p><strong>total_llm_prompt_tokens</strong> – Cumulative number of tokens used in prompts for LLM.</p></li>
<li><p><strong>total_llm_completion_tokens</strong> – Cumulative number of tokens generated in the
completion phase by the LLM.</p></li>
<li><p><strong>total_embedding_duration_millis</strong> – Total duration of all embedding operations in milliseconds.</p></li>
<li><p><strong>total_embedding_count</strong> – Total number of embedding operations conducted.</p></li>
<li><p><strong>total_embedding_tokens</strong> – Total number of tokens used in all embedding operations.</p></li>
</ul>
</dd>
</dl>
<dl class="py property">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.average_embedding_duration_millis">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">average_embedding_duration_millis</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">int</span></em><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.average_embedding_duration_millis" title="Link to this definition">¶</a></dt>
<dd><p>Calculates the average embedding duration in milliseconds. This property computes
the average duration per embedding based on the total embedding duration summed
over all embeddings and the total embedding count.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The average embedding duration in milliseconds as an integer. If the
total embedding count is zero, returns zero.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.average_embedding_tokens">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">average_embedding_tokens</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">int</span></em><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.average_embedding_tokens" title="Link to this definition">¶</a></dt>
<dd><p>Property to calculate the average number of tokens per embedding. This property computes
the average by dividing the total number of embedding tokens by the total count of
embeddings. If no embeddings are present, the average defaults to zero.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The average number of tokens per embedding. If no embeddings are present,
returns 0.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.average_llm_completion_tokens">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">average_llm_completion_tokens</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">int</span></em><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.average_llm_completion_tokens" title="Link to this definition">¶</a></dt>
<dd><p>Represents the average number of LLM completion tokens calculated
based on the total number of LLM completion tokens and the total
LLM count. Returns zero if the total LLM count is zero.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The average number of LLM completion tokens as an integer.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.average_llm_duration_millis">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">average_llm_duration_millis</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">int</span></em><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.average_llm_duration_millis" title="Link to this definition">¶</a></dt>
<dd><p>Calculates and returns the average duration of LLM operations in
milliseconds. The calculation is performed by dividing the total
LLM duration in milliseconds by the total count of LLM operations.
If there are no LLM operations performed, the function returns 0.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The average duration of LLM operations in milliseconds.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.average_llm_prompt_tokens">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">average_llm_prompt_tokens</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">int</span></em><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.average_llm_prompt_tokens" title="Link to this definition">¶</a></dt>
<dd><p>Calculates and returns the average number of tokens used in LLM (Large Language
Model) prompts. This is a derived property that computes the average based on
the total token count in prompts and the total number of LLM executions.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The average number of LLM prompt tokens as an integer. Returns 0 if the
total LLM count is 0.</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.average_llm_tokens">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">average_llm_tokens</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">int</span></em><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.average_llm_tokens" title="Link to this definition">¶</a></dt>
<dd><p>Provides the average number of tokens used by the language model (LLM) per
interaction. This property calculates the average using the total number of
tokens processed by the LLM and the count of interactions if available.
Returns zero if there are no interactions.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The average number of tokens per interaction.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.on_event">
<span class="sig-name descname"><span class="pre">on_event</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">event</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">CBEvent</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/fm_observability.html#FMObservabilityStats.on_event"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.on_event" title="Link to this definition">¶</a></dt>
<dd><p>Handles processing of incoming events and updates the relevant metrics based
on the type and payload of the event. Processed event types include language
model (LLM) and embedding events, where specific values are extracted from the
event payload and used to increment counters and accumulate durations or token
counts as necessary.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>event</strong> (<em>CBEvent</em>) – The event instance containing information about type of event
(e.g., LLM or embedding) and associated payload with relevant metrics data
such as duration or token counts.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.total_embedding_count">
<span class="sig-name descname"><span class="pre">total_embedding_count</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">int</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0</span></em><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.total_embedding_count" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.total_embedding_duration_millis">
<span class="sig-name descname"><span class="pre">total_embedding_duration_millis</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">float</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0</span></em><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.total_embedding_duration_millis" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.total_embedding_tokens">
<span class="sig-name descname"><span class="pre">total_embedding_tokens</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">float</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0</span></em><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.total_embedding_tokens" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.total_llm_completion_tokens">
<span class="sig-name descname"><span class="pre">total_llm_completion_tokens</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">float</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0</span></em><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.total_llm_completion_tokens" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.total_llm_count">
<span class="sig-name descname"><span class="pre">total_llm_count</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">int</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0</span></em><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.total_llm_count" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.total_llm_duration_millis">
<span class="sig-name descname"><span class="pre">total_llm_duration_millis</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">float</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0</span></em><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.total_llm_duration_millis" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.total_llm_prompt_tokens">
<span class="sig-name descname"><span class="pre">total_llm_prompt_tokens</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">float</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0</span></em><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.total_llm_prompt_tokens" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.total_llm_tokens">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">total_llm_tokens</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">int</span></em><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.total_llm_tokens" title="Link to this definition">¶</a></dt>
<dd><p>Computes the total number of tokens utilized by the language model by summing
the prompt tokens and completion tokens. This property encapsulates the logic
to calculate the combined token usage dynamically.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The combined total of prompt and completion tokens used by
the language model.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.update">
<span class="sig-name descname"><span class="pre">update</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">stats</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/fm_observability.html#FMObservabilityStats.update"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.update" title="Link to this definition">¶</a></dt>
<dd><p>Updates the total statistics with values from another statistics object by
adding the individual components of both. The method accumulates the total
durations, counts, and token values for language model operations and
embedding operations. Returns a boolean indicating whether the combined total
count of operations (language model and embeddings) is greater than zero.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>stats</strong> (<em>Any</em>) – The statistics object whose values are added to the current
object.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A boolean value indicating if the combined total count of language
model operations and embedding operations is greater than zero.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilitySubscriber">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">graphrag_toolkit.lexical_graph.utils.fm_observability.</span></span><span class="sig-name descname"><span class="pre">FMObservabilitySubscriber</span></span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/fm_observability.html#FMObservabilitySubscriber"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilitySubscriber" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">ABC</span></code></p>
<p>An abstract base class that defines the interface for observability subscribers.</p>
<p>This class serves as a blueprint for implementing subscribers that react
to new observability statistics. Any concrete subclass must implement
the abstract method <cite>on_new_stats</cite>, which is invoked when new
statistics are available.</p>
<dl class="field-list simple">
<dt class="field-odd">Variables<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>attribute1</strong> – Description of attribute1.</p></li>
<li><p><strong>attribute2</strong> – Description of attribute2.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilitySubscriber.on_new_stats">
<em class="property"><span class="k"><span class="pre">abstractmethod</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">on_new_stats</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">stats</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats" title="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats"><span class="pre">FMObservabilityStats</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/fm_observability.html#FMObservabilitySubscriber.on_new_stats"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilitySubscriber.on_new_stats" title="Link to this definition">¶</a></dt>
<dd><p>Marks an abstract method to handle the event when new statistics are
generated or received. This method requires implementation by any
concrete class that inherits from it.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>stats</strong> – Object encapsulating the statistics data to be processed.
The instance contains observability metrics and details.
Must be an instance of FMObservabilityStats.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>This method does not return any value as it performs an action.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.StatPrintingSubscriber">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">graphrag_toolkit.lexical_graph.utils.fm_observability.</span></span><span class="sig-name descname"><span class="pre">StatPrintingSubscriber</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cost_per_thousand_input_tokens_llm</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cost_per_thousand_output_tokens_llm</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cost_per_thousand_embedding_tokens</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/fm_observability.html#StatPrintingSubscriber"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.StatPrintingSubscriber" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilitySubscriber" title="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilitySubscriber"><code class="xref py py-class docutils literal notranslate"><span class="pre">FMObservabilitySubscriber</span></code></a></p>
<p>Handles the collection, aggregation, and analysis of observability statistics
specific to language model (LLM) and embedding usage, as well as cost estimation
associated with these processes.</p>
<p>This class is used to monitor, update, and report on critical metrics such as
token counts, execution durations, and financial costs derived from LLM and
embedding operations. It is designed to integrate seamlessly with observability
data structures, enabling efficient management and reporting of relevant statistics.</p>
<dl class="field-list simple">
<dt class="field-odd">Variables<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cost_per_thousand_input_tokens_llm</strong> – Cost per thousand input tokens for
language model usage.</p></li>
<li><p><strong>cost_per_thousand_output_tokens_llm</strong> – Cost per thousand output tokens
for language model generation.</p></li>
<li><p><strong>cost_per_thousand_embedding_tokens</strong> – Cost per thousand embedding tokens
used for processing.</p></li>
</ul>
</dd>
</dl>
<p>Initializes an instance to manage and track observability-related cost statistics for a
foundation model including costs for input tokens, output tokens, and embedding tokens.
The class encapsulates these parameters as input cost metrics and initializes an
aggregated statistics tracking object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cost_per_thousand_input_tokens_llm</strong> (<em>float</em>) – Cost associated with processing one thousand input tokens by the language model.</p></li>
<li><p><strong>cost_per_thousand_output_tokens_llm</strong> (<em>float</em>) – Cost associated with processing one thousand output tokens by the language model.</p></li>
<li><p><strong>cost_per_thousand_embedding_tokens</strong> (<em>float</em>) – Cost associated with processing one thousand embedding tokens.</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.StatPrintingSubscriber.cost_per_thousand_embedding_tokens">
<span class="sig-name descname"><span class="pre">cost_per_thousand_embedding_tokens</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">float</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0</span></em><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.StatPrintingSubscriber.cost_per_thousand_embedding_tokens" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.StatPrintingSubscriber.cost_per_thousand_input_tokens_llm">
<span class="sig-name descname"><span class="pre">cost_per_thousand_input_tokens_llm</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">float</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0</span></em><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.StatPrintingSubscriber.cost_per_thousand_input_tokens_llm" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.StatPrintingSubscriber.cost_per_thousand_output_tokens_llm">
<span class="sig-name descname"><span class="pre">cost_per_thousand_output_tokens_llm</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">float</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0</span></em><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.StatPrintingSubscriber.cost_per_thousand_output_tokens_llm" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.StatPrintingSubscriber.estimate_costs">
<span class="sig-name descname"><span class="pre">estimate_costs</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">float</span></span></span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/fm_observability.html#StatPrintingSubscriber.estimate_costs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.StatPrintingSubscriber.estimate_costs" title="Link to this definition">¶</a></dt>
<dd><p>Estimates the total costs based on the provided token statistics and cost rates.</p>
<p>This method computes the total cost incurred based on the token consumption for
language model input prompts, completions, and embeddings. It utilizes the
respective cost rate per thousand tokens for each category (input, output,
and embeddings) provided in the instance variables.</p>
<dl class="simple">
<dt>Formula for cost computation:</dt><dd><ul class="simple">
<li><p>Input Prompt Cost = total_llm_prompt_tokens / 1000 * cost_per_thousand_input_tokens_llm</p></li>
<li><p>Output Completion Cost = total_llm_completion_tokens / 1000 * cost_per_thousand_output_tokens_llm</p></li>
<li><p>Embedding Cost = total_embedding_tokens / 1000 * cost_per_thousand_embedding_tokens</p></li>
</ul>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The estimated total cost.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.StatPrintingSubscriber.get_stats">
<span class="sig-name descname"><span class="pre">get_stats</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/fm_observability.html#StatPrintingSubscriber.get_stats"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.StatPrintingSubscriber.get_stats" title="Link to this definition">¶</a></dt>
<dd><p>Retrieves and returns the statistics data.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The statistics data contained in the <cite>all_stats</cite> attribute.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>Any</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.StatPrintingSubscriber.on_new_stats">
<span class="sig-name descname"><span class="pre">on_new_stats</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">stats</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats" title="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats"><span class="pre">FMObservabilityStats</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/fm_observability.html#StatPrintingSubscriber.on_new_stats"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.StatPrintingSubscriber.on_new_stats" title="Link to this definition">¶</a></dt>
<dd><p>Updates the existing statistics with new data provided in the <cite>stats</cite> parameter.</p>
<p>This method takes a statistics object and merges its values into the current
statistics set, ensuring that all the new statistical data is added to the
existing collection.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>stats</strong> (<a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats" title="graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats"><em>FMObservabilityStats</em></a>) – The statistics object containing new data to be merged.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.StatPrintingSubscriber.return_stats_dict">
<span class="sig-name descname"><span class="pre">return_stats_dict</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/fm_observability.html#StatPrintingSubscriber.return_stats_dict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.StatPrintingSubscriber.return_stats_dict" title="Link to this definition">¶</a></dt>
<dd><p>Constructs and returns a dictionary containing various statistics and calculated
values for language learning models (LLMs) and embeddings, derived from the
global <cite>all_stats</cite> object. It includes token counts, duration metrics, and cost
estimates. Provides easy access to summarized information about LLM and
embedding usage, performance, and efficiency.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A dictionary with detailed statistics related to LLM and embeddings, including
total counts, durations, and cost estimations.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>Dict[str, Any]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.fm_observability.get_patched_llm_token_counts">
<span class="sig-prename descclassname"><span class="pre">graphrag_toolkit.lexical_graph.utils.fm_observability.</span></span><span class="sig-name descname"><span class="pre">get_patched_llm_token_counts</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">token_counter</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">TokenCounter</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payload</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">event_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">TokenCountingEvent</span></span></span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/fm_observability.html#get_patched_llm_token_counts"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.get_patched_llm_token_counts" title="Link to this definition">¶</a></dt>
<dd><p>Get token counts for LLM interactions such as prompts, completions, messages, and responses.</p>
<p>This function processes a payload containing either a prompt and completion or a series
of chat messages with a response. Depending on the presence of specific elements in the
payload (e.g., <cite>EventPayload.PROMPT</cite>, <cite>EventPayload.COMPLETION</cite>, <cite>EventPayload.MESSAGES</cite>),
it calculates token counts either based on the raw token usage in the response or by
estimating the number of tokens based on the content of strings/messages.</p>
<p>If valid raw token usage data is provided in the payload (through the <cite>response.raw</cite> field),
that data is utilized for constructing the event. Otherwise, the function falls back on
estimating token counts using the provided <cite>TokenCounter</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>token_counter</strong> – Instance of <cite>TokenCounter</cite> used for counting or estimating tokens in
strings and chat messages.</p></li>
<li><p><strong>payload</strong> – Dictionary containing relevant LLM interaction data, which can include:
- A prompt under the key <cite>EventPayload.PROMPT</cite>.
- A completion under the key <cite>EventPayload.COMPLETION</cite>.
- Chat messages under the key <cite>EventPayload.MESSAGES</cite>.
- A response under the key <cite>EventPayload.RESPONSE</cite>.</p></li>
<li><p><strong>event_id</strong> – A unique identifier for the event. Defaults to an empty string.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>An instance of <cite>TokenCountingEvent</cite> containing details about the LLM interaction,
including the relevant prompt, completion, and their respective token counts.</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-graphrag_toolkit.lexical_graph.utils.io_utils">
<span id="graphrag-toolkit-lexical-graph-utils-io-utils-module"></span><h2>graphrag_toolkit.lexical_graph.utils.io_utils module<a class="headerlink" href="#module-graphrag_toolkit.lexical_graph.utils.io_utils" title="Link to this heading">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.io_utils.read_json">
<span class="sig-prename descclassname"><span class="pre">graphrag_toolkit.lexical_graph.utils.io_utils.</span></span><span class="sig-name descname"><span class="pre">read_json</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/io_utils.html#read_json"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.io_utils.read_json" title="Link to this definition">¶</a></dt>
<dd><p>Reads a JSON file from the specified file path, parses its content, and
returns the corresponding Python dictionary or list.</p>
<p>This function is designed to read JSON files with UTF-8 encoding. It opens the file
in read mode, reads its content, and converts the JSON content into a Python object
using the <cite>json.loads</cite> function.</p>
<dl class="simple">
<dt>Args:</dt><dd><p>path (str): The file path to the JSON file to be read.</p>
</dd>
<dt>Returns:</dt><dd><p>Union[dict, list]: A Python dictionary or list extracted from the JSON file.</p>
</dd>
<dt>Raises:</dt><dd><p>FileNotFoundError: If the specified file does not exist.
json.JSONDecodeError: If the file content is not valid JSON.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.io_utils.read_text">
<span class="sig-prename descclassname"><span class="pre">graphrag_toolkit.lexical_graph.utils.io_utils.</span></span><span class="sig-name descname"><span class="pre">read_text</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/io_utils.html#read_text"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.io_utils.read_text" title="Link to this definition">¶</a></dt>
<dd><p>Reads the contents of a text file specified by the given file path and
returns the content as a string.</p>
<dl class="simple">
<dt>Args:</dt><dd><p>path (str): The path to the text file to be read.</p>
</dd>
<dt>Returns:</dt><dd><p>str: The contents of the file as a string.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.io_utils.s3_read_data">
<span class="sig-prename descclassname"><span class="pre">graphrag_toolkit.lexical_graph.utils.io_utils.</span></span><span class="sig-name descname"><span class="pre">s3_read_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">s3_path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/io_utils.html#s3_read_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.io_utils.s3_read_data" title="Link to this definition">¶</a></dt>
<dd><p>Reads data from the given S3 path using the <cite>smart_open</cite> library and
returns the data as a string. This function provides an interface for
downloading and reading content from an S3 bucket. If the file does not
exist or another OS-level error occurs during the read operation, the error
is printed, and it is re-raised.</p>
<dl class="simple">
<dt>Args:</dt><dd><dl class="simple">
<dt>s3_path (str): The path to the file stored in the S3 bucket. This should</dt><dd><p>include the necessary protocol (e.g., ‘s3://’) and the file location.</p>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><p>str: The content of the file located at the specified S3 path as a string.</p>
</dd>
<dt>Raises:</dt><dd><dl class="simple">
<dt>OSError: If there is an error accessing or reading the file at the given</dt><dd><p>S3 path.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.io_utils.s3_write_data">
<span class="sig-prename descclassname"><span class="pre">graphrag_toolkit.lexical_graph.utils.io_utils.</span></span><span class="sig-name descname"><span class="pre">s3_write_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">s3_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/io_utils.html#s3_write_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.io_utils.s3_write_data" title="Link to this definition">¶</a></dt>
<dd><p>Writes data to a specified S3 path using smart_open.</p>
<p>This function utilizes the smart_open library to write the provided data
to an S3 path. It handles any file-related errors during the write
operation and raises them for further handling.</p>
<dl class="simple">
<dt>Args:</dt><dd><p>s3_path: The S3 path where data will be written.
data: The content to be written to the S3 path.</p>
</dd>
<dt>Raises:</dt><dd><p>OSError: If the write operation to the specified S3 path fails.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.io_utils.write_json">
<span class="sig-prename descclassname"><span class="pre">graphrag_toolkit.lexical_graph.utils.io_utils.</span></span><span class="sig-name descname"><span class="pre">write_json</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">j</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/io_utils.html#write_json"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.io_utils.write_json" title="Link to this definition">¶</a></dt>
<dd><p>Writes a given JSON object to a file at a specified path. Creates any
necessary parent directories if they do not exist prior to writing the
file. The content is dumped in a way that ensures non-ASCII characters are
preserved.</p>
<dl class="simple">
<dt>Args:</dt><dd><p>path (str): The file path where the JSON should be written.
j (dict): The JSON object to be written to the specified file.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.io_utils.write_text">
<span class="sig-prename descclassname"><span class="pre">graphrag_toolkit.lexical_graph.utils.io_utils.</span></span><span class="sig-name descname"><span class="pre">write_text</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">text</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/io_utils.html#write_text"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.io_utils.write_text" title="Link to this definition">¶</a></dt>
<dd><p>Writes the specified text to a file at the given path. Creates any
necessary directories in the path if they do not already exist.</p>
<dl class="simple">
<dt>Args:</dt><dd><p>path: A string representing the file path where the text will be written.
text: A string representing the text content to write to the file.</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-graphrag_toolkit.lexical_graph.utils.llm_cache">
<span id="graphrag-toolkit-lexical-graph-utils-llm-cache-module"></span><h2>graphrag_toolkit.lexical_graph.utils.llm_cache module<a class="headerlink" href="#module-graphrag_toolkit.lexical_graph.utils.llm_cache" title="Link to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.llm_cache.LLMCache">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">graphrag_toolkit.lexical_graph.utils.llm_cache.</span></span><span class="sig-name descname"><span class="pre">LLMCache</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="keyword-only-separator o"><abbr title="Keyword-only parameters separator (PEP 3102)"><span class="pre">*</span></abbr></span></em>, <em class="sig-param"><span class="n"><span class="pre">llm</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">LLM</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">enable_cache</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose_prompt</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose_response</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/llm_cache.html#LLMCache"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.llm_cache.LLMCache" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">BaseModel</span></code></p>
<p>Create a new model by parsing and validating input data from keyword arguments.</p>
<p>Raises [<cite>ValidationError</cite>][pydantic_core.ValidationError] if the input data cannot be
validated to form a valid model.</p>
<p><cite>self</cite> is explicitly positional-only to allow <cite>self</cite> as a field name.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.llm_cache.LLMCache.enable_cache">
<span class="sig-name descname"><span class="pre">enable_cache</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.llm_cache.LLMCache.enable_cache" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.llm_cache.LLMCache.llm">
<span class="sig-name descname"><span class="pre">llm</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">LLM</span></em><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.llm_cache.LLMCache.llm" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.llm_cache.LLMCache.model">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">model</span></span><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.llm_cache.LLMCache.model" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.llm_cache.LLMCache.model_config">
<span class="sig-name descname"><span class="pre">model_config</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">ClassVar</span><span class="p"><span class="pre">[</span></span><span class="pre">ConfigDict</span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{}</span></em><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.llm_cache.LLMCache.model_config" title="Link to this definition">¶</a></dt>
<dd><p>Configuration for the model, should be a dictionary conforming to [<cite>ConfigDict</cite>][pydantic.config.ConfigDict].</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.llm_cache.LLMCache.predict">
<span class="sig-name descname"><span class="pre">predict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prompt</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">BasePromptTemplate</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">prompt_args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="reference internal" href="_modules/graphrag_toolkit/lexical_graph/utils/llm_cache.html#LLMCache.predict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.llm_cache.LLMCache.predict" title="Link to this definition">¶</a></dt>
<dd><p>Predicts a response based on the given prompt and dynamic arguments
using the configured language model (LLM). Supports caching of
responses to enhance efficiency for repeated queries and handles
verbose logging for debugging or monitoring purposes.</p>
<p>The function dynamically adapts caching behavior depending on the configuration. If caching
is disabled, responses are generated directly using the LLM. If caching is enabled, it calculates
a unique cache key based on the prompt and LLM configuration, then fetches responses from the
cache, if available, or generates and stores them for future use.</p>
<p>The function ensures proper handling of potential errors during model execution and writes
extensive logs when verbosity options are enabled, aiding in thorough tracking during execution.</p>
<dl class="simple">
<dt>Args:</dt><dd><dl class="simple">
<dt>prompt: A pre-formatted BasePromptTemplate instance containing the template definition</dt><dd><p>to generate the LLM response.</p>
</dd>
<dt><a href="#id1"><span class="problematic" id="id2">**</span></a>prompt_args: Arbitrary keyword arguments that provide dynamic content to fill</dt><dd><p>in the placeholders of the given prompt template.</p>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><p>str: The generated or cached response from the LLM.</p>
</dd>
<dt>Raises:</dt><dd><dl class="simple">
<dt>ModelError: If there is any exception while interacting with the LLM, detailed</dt><dd><p>configuration information is included to aid debugging.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.llm_cache.LLMCache.verbose_prompt">
<span class="sig-name descname"><span class="pre">verbose_prompt</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.llm_cache.LLMCache.verbose_prompt" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="graphrag_toolkit.lexical_graph.utils.llm_cache.LLMCache.verbose_response">
<span class="sig-name descname"><span class="pre">verbose_response</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#graphrag_toolkit.lexical_graph.utils.llm_cache.LLMCache.verbose_response" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</section>
<section id="module-graphrag_toolkit.lexical_graph.utils">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-graphrag_toolkit.lexical_graph.utils" title="Link to this heading">¶</a></h2>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="falkordb/modules.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">falkordb</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="graphrag_toolkit.lexical_graph.storage.vector.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">graphrag_toolkit.lexical_graph.storage.vector package</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2025, Amazon Web Services, Inc
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
            
            <div class="legal-info">
                <a href="https://aws.amazon.com/privacy">Privacy</a> | 
                <a href="https://aws.amazon.com/terms">Site Terms</a> | 
                <a href="#" id="cookie-button-link">Cookie preferences</a>
            </div>
            
          </div>
          <div class="right-details">
            <div class="icons">
              <a class="muted-link " href="https://github.com/awslabs/graphrag-toolkit" aria-label="GitHub">
                <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path>
                </svg>
            </a>
              
            </div>
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="sidebar-div show-div-md justify-content-left">
            <label class="nav-close-icon" id="toc-menu-close" for="__toc" tabindex="0">
                <div class="visually-hidden">Toggle site table of content right sidebar</div>
                <i class="icon"><svg><use href="#svg-close"></use></svg></i>
            </label>
        </div>
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">graphrag_toolkit.lexical_graph.utils package</a><ul>
<li><a class="reference internal" href="#submodules">Submodules</a></li>
<li><a class="reference internal" href="#module-graphrag_toolkit.lexical_graph.utils.bedrock_utils">graphrag_toolkit.lexical_graph.utils.bedrock_utils module</a></li>
<li><a class="reference internal" href="#module-graphrag_toolkit.lexical_graph.utils.fm_observability">graphrag_toolkit.lexical_graph.utils.fm_observability module</a><ul>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.BedrockEnabledTokenCountingHandler"><code class="docutils literal notranslate"><span class="pre">BedrockEnabledTokenCountingHandler</span></code></a><ul>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.BedrockEnabledTokenCountingHandler.on_event_end"><code class="docutils literal notranslate"><span class="pre">BedrockEnabledTokenCountingHandler.on_event_end()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.ConsoleFMObservabilitySubscriber"><code class="docutils literal notranslate"><span class="pre">ConsoleFMObservabilitySubscriber</span></code></a><ul>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.ConsoleFMObservabilitySubscriber.on_new_stats"><code class="docutils literal notranslate"><span class="pre">ConsoleFMObservabilitySubscriber.on_new_stats()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityHandler"><code class="docutils literal notranslate"><span class="pre">FMObservabilityHandler</span></code></a><ul>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityHandler.end_trace"><code class="docutils literal notranslate"><span class="pre">FMObservabilityHandler.end_trace()</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityHandler.on_event_end"><code class="docutils literal notranslate"><span class="pre">FMObservabilityHandler.on_event_end()</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityHandler.on_event_start"><code class="docutils literal notranslate"><span class="pre">FMObservabilityHandler.on_event_start()</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityHandler.reset_counts"><code class="docutils literal notranslate"><span class="pre">FMObservabilityHandler.reset_counts()</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityHandler.start_trace"><code class="docutils literal notranslate"><span class="pre">FMObservabilityHandler.start_trace()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityPublisher"><code class="docutils literal notranslate"><span class="pre">FMObservabilityPublisher</span></code></a><ul>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityPublisher.close"><code class="docutils literal notranslate"><span class="pre">FMObservabilityPublisher.close()</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityPublisher.publish_stats"><code class="docutils literal notranslate"><span class="pre">FMObservabilityPublisher.publish_stats()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityQueuePoller"><code class="docutils literal notranslate"><span class="pre">FMObservabilityQueuePoller</span></code></a><ul>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityQueuePoller.run"><code class="docutils literal notranslate"><span class="pre">FMObservabilityQueuePoller.run()</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityQueuePoller.stop"><code class="docutils literal notranslate"><span class="pre">FMObservabilityQueuePoller.stop()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats"><code class="docutils literal notranslate"><span class="pre">FMObservabilityStats</span></code></a><ul>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.average_embedding_duration_millis"><code class="docutils literal notranslate"><span class="pre">FMObservabilityStats.average_embedding_duration_millis</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.average_embedding_tokens"><code class="docutils literal notranslate"><span class="pre">FMObservabilityStats.average_embedding_tokens</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.average_llm_completion_tokens"><code class="docutils literal notranslate"><span class="pre">FMObservabilityStats.average_llm_completion_tokens</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.average_llm_duration_millis"><code class="docutils literal notranslate"><span class="pre">FMObservabilityStats.average_llm_duration_millis</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.average_llm_prompt_tokens"><code class="docutils literal notranslate"><span class="pre">FMObservabilityStats.average_llm_prompt_tokens</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.average_llm_tokens"><code class="docutils literal notranslate"><span class="pre">FMObservabilityStats.average_llm_tokens</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.on_event"><code class="docutils literal notranslate"><span class="pre">FMObservabilityStats.on_event()</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.total_embedding_count"><code class="docutils literal notranslate"><span class="pre">FMObservabilityStats.total_embedding_count</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.total_embedding_duration_millis"><code class="docutils literal notranslate"><span class="pre">FMObservabilityStats.total_embedding_duration_millis</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.total_embedding_tokens"><code class="docutils literal notranslate"><span class="pre">FMObservabilityStats.total_embedding_tokens</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.total_llm_completion_tokens"><code class="docutils literal notranslate"><span class="pre">FMObservabilityStats.total_llm_completion_tokens</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.total_llm_count"><code class="docutils literal notranslate"><span class="pre">FMObservabilityStats.total_llm_count</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.total_llm_duration_millis"><code class="docutils literal notranslate"><span class="pre">FMObservabilityStats.total_llm_duration_millis</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.total_llm_prompt_tokens"><code class="docutils literal notranslate"><span class="pre">FMObservabilityStats.total_llm_prompt_tokens</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.total_llm_tokens"><code class="docutils literal notranslate"><span class="pre">FMObservabilityStats.total_llm_tokens</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilityStats.update"><code class="docutils literal notranslate"><span class="pre">FMObservabilityStats.update()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilitySubscriber"><code class="docutils literal notranslate"><span class="pre">FMObservabilitySubscriber</span></code></a><ul>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.FMObservabilitySubscriber.on_new_stats"><code class="docutils literal notranslate"><span class="pre">FMObservabilitySubscriber.on_new_stats()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.StatPrintingSubscriber"><code class="docutils literal notranslate"><span class="pre">StatPrintingSubscriber</span></code></a><ul>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.StatPrintingSubscriber.cost_per_thousand_embedding_tokens"><code class="docutils literal notranslate"><span class="pre">StatPrintingSubscriber.cost_per_thousand_embedding_tokens</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.StatPrintingSubscriber.cost_per_thousand_input_tokens_llm"><code class="docutils literal notranslate"><span class="pre">StatPrintingSubscriber.cost_per_thousand_input_tokens_llm</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.StatPrintingSubscriber.cost_per_thousand_output_tokens_llm"><code class="docutils literal notranslate"><span class="pre">StatPrintingSubscriber.cost_per_thousand_output_tokens_llm</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.StatPrintingSubscriber.estimate_costs"><code class="docutils literal notranslate"><span class="pre">StatPrintingSubscriber.estimate_costs()</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.StatPrintingSubscriber.get_stats"><code class="docutils literal notranslate"><span class="pre">StatPrintingSubscriber.get_stats()</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.StatPrintingSubscriber.on_new_stats"><code class="docutils literal notranslate"><span class="pre">StatPrintingSubscriber.on_new_stats()</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.StatPrintingSubscriber.return_stats_dict"><code class="docutils literal notranslate"><span class="pre">StatPrintingSubscriber.return_stats_dict()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.fm_observability.get_patched_llm_token_counts"><code class="docutils literal notranslate"><span class="pre">get_patched_llm_token_counts()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-graphrag_toolkit.lexical_graph.utils.io_utils">graphrag_toolkit.lexical_graph.utils.io_utils module</a><ul>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.io_utils.read_json"><code class="docutils literal notranslate"><span class="pre">read_json()</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.io_utils.read_text"><code class="docutils literal notranslate"><span class="pre">read_text()</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.io_utils.s3_read_data"><code class="docutils literal notranslate"><span class="pre">s3_read_data()</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.io_utils.s3_write_data"><code class="docutils literal notranslate"><span class="pre">s3_write_data()</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.io_utils.write_json"><code class="docutils literal notranslate"><span class="pre">write_json()</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.io_utils.write_text"><code class="docutils literal notranslate"><span class="pre">write_text()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-graphrag_toolkit.lexical_graph.utils.llm_cache">graphrag_toolkit.lexical_graph.utils.llm_cache module</a><ul>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.llm_cache.LLMCache"><code class="docutils literal notranslate"><span class="pre">LLMCache</span></code></a><ul>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.llm_cache.LLMCache.enable_cache"><code class="docutils literal notranslate"><span class="pre">LLMCache.enable_cache</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.llm_cache.LLMCache.llm"><code class="docutils literal notranslate"><span class="pre">LLMCache.llm</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.llm_cache.LLMCache.model"><code class="docutils literal notranslate"><span class="pre">LLMCache.model</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.llm_cache.LLMCache.model_config"><code class="docutils literal notranslate"><span class="pre">LLMCache.model_config</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.llm_cache.LLMCache.predict"><code class="docutils literal notranslate"><span class="pre">LLMCache.predict()</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.llm_cache.LLMCache.verbose_prompt"><code class="docutils literal notranslate"><span class="pre">LLMCache.verbose_prompt</span></code></a></li>
<li><a class="reference internal" href="#graphrag_toolkit.lexical_graph.utils.llm_cache.LLMCache.verbose_response"><code class="docutils literal notranslate"><span class="pre">LLMCache.verbose_response</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#module-graphrag_toolkit.lexical_graph.utils">Module contents</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="_static/documentation_options.js?v=f731707b"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/scripts/furo.js?v=5fa4622c"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=f281be69"></script>
    <script src="_static/js/custom.js?v=3ea019ec"></script>
    </body>
</html>