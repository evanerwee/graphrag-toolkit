

<!doctype html>
<html class="no-js" lang="en" data-content_root="../../">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="../../genindex.html" /><link rel="search" title="Search" href="../../search.html" /><link rel="next" title="Multi-Tenancy" href="multi-tenancy.html" /><link rel="prev" title="Metadata Filtering" href="metadata-filtering.html" />

    <!-- Generated with Sphinx 8.2.3 and Furo 2024.08.06 -->
        <title>Indexing - graphrag-toolkit 3.6.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=b86133f3" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo.css?v=354aac6f" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo-extensions.css?v=302659d7" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/custom.css?v=5c2e0e83" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/dark_light_mode.css?v=33639cc8" />
    
    
<script src="https://prod.assets.shortbread.aws.dev/shortbread.js"></script>
<link href="https://prod.assets.shortbread.aws.dev/shortbread.css" rel="stylesheet">
</head>
  <body>
     
<svg xmlns="http://www.w3.org/2000/svg" class="hidden">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path class="icon-opacity" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line class="icon-opacity" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line class="icon-opacity" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line class="icon-opacity" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line class="icon-opacity" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line class="icon-opacity" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line class="icon-opacity" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line class="icon-opacity" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line class="icon-opacity" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle class="icon-opacity" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>
<svg xmlns="http://www.w3.org/2000/svg" class="hidden">
    <symbol id="svg-close" viewBox="0 0 24 24">
        <title>Close Menu</title>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke="currentColor"
          stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
            <line x1="2" y1="22" x2="22" y2="2"/>
            <line x1="2" y1="2" x2="22" y2="22"/>
        </svg>
    </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" id="nav-menu-open" for="__navigation" tabindex="0">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../../index.html"><div class="brand">graphrag-toolkit 3.6.1 documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" id="toc-menu-open-sm" for="__toc" tabindex="0">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><div class="sidebar-div show-div-sm justify-content-right">
    <label class="nav-close-icon" id="nav-menu-close" for="__navigation" tabindex="0">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-close"></use></svg></i>
    </label>
</div><a class="sidebar-brand" href="../../index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo only-light" src="../../_static/logos/aws_light_theme_logo.svg" alt="Light Logo"/>
    <img class="sidebar-logo only-dark" src="../../_static/logos/aws_dark_theme_logo.svg" alt="Dark Logo"/>
  </div>
  
  <span class="sidebar-brand-text">graphrag-toolkit 3.6.1 documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-div">
    <p class="sidebar-heading">Feedback</p>
    <p class="sidebar-text">
        Do you have a suggestion to improve this website or graphrag-toolkit?
        <a href="https://github.com/awslabs/graphrag-toolkit/issues">Give us feedback</a>.
    </p>
</div><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">README and Overview</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="README.html">Lexical Graph</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Graph Store</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="storage-model.html">Storage Model</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Graph Store</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="graph-model.html">Graph Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="graph-store-falkor-db.html">FalkorDB as a Graph Store</a></li>
<li class="toctree-l1"><a class="reference internal" href="graph-store-neptune-analytics.html">Neptune Analytics as a Graph Store</a></li>
<li class="toctree-l1"><a class="reference internal" href="graph-store-neptune-db.html">Neptune Database as a Graph Store</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Vector Store</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="vector-store-neptune-analytics.html">Neptune Analytics as a Vector Store</a></li>
<li class="toctree-l1"><a class="reference internal" href="vector-store-opensearch-serverless.html">Amazon OpenSearch Serverless as a Vector Store</a></li>
<li class="toctree-l1"><a class="reference internal" href="vector-store-postgres.html">Postgres as a Vector Store</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Security</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="security.html">Security</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Querying</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="querying.html">Querying</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Multi-tenancy</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="metadata-filtering.html">Metadata Filtering</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Indexing</span></p>
<ul class="current">
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">Indexing</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Indexing</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="multi-tenancy.html">Multi-Tenancy</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Configuration</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="aws-profile.html">Using AWS Profiles in <code class="docutils literal notranslate"><span class="pre">GraphRAGConfig</span></code></a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Batch Extraction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="batch-extraction.html">Batch Extraction</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Batch Extraction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="hybrid-deployment.html">Hybrid Deployment</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">FAQ</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="faq.html">FAQ</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Lexical Graph API</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../modules.html">graphrag_toolkit</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of graphrag_toolkit</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../graphrag_toolkit.html">graphrag_toolkit package</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of graphrag_toolkit package</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../graphrag_toolkit.lexical_graph.html">graphrag_toolkit.lexical_graph package</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of graphrag_toolkit.lexical_graph package</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../graphrag_toolkit.lexical_graph.indexing.html">graphrag_toolkit.lexical_graph.indexing package</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of graphrag_toolkit.lexical_graph.indexing package</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../graphrag_toolkit.lexical_graph.indexing.build.html">graphrag_toolkit.lexical_graph.indexing.build package</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../graphrag_toolkit.lexical_graph.indexing.extract.html">graphrag_toolkit.lexical_graph.indexing.extract package</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../graphrag_toolkit.lexical_graph.indexing.load.html">graphrag_toolkit.lexical_graph.indexing.load package</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../graphrag_toolkit.lexical_graph.indexing.utils.html">graphrag_toolkit.lexical_graph.indexing.utils package</a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../graphrag_toolkit.lexical_graph.retrieval.html">graphrag_toolkit.lexical_graph.retrieval package</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle navigation of graphrag_toolkit.lexical_graph.retrieval package</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../graphrag_toolkit.lexical_graph.retrieval.post_processors.html">graphrag_toolkit.lexical_graph.retrieval.post_processors package</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../graphrag_toolkit.lexical_graph.retrieval.processors.html">graphrag_toolkit.lexical_graph.retrieval.processors package</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../graphrag_toolkit.lexical_graph.retrieval.retrievers.html">graphrag_toolkit.lexical_graph.retrieval.retrievers package</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../graphrag_toolkit.lexical_graph.retrieval.utils.html">graphrag_toolkit.lexical_graph.retrieval.utils package</a></li>
</ul>
</li>
<li class="toctree-l4 has-children"><a class="reference internal" href="../../graphrag_toolkit.lexical_graph.storage.html">graphrag_toolkit.lexical_graph.storage package</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle navigation of graphrag_toolkit.lexical_graph.storage package</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l5"><a class="reference internal" href="../../graphrag_toolkit.lexical_graph.storage.graph.html">graphrag_toolkit.lexical_graph.storage.graph package</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../graphrag_toolkit.lexical_graph.storage.vector.html">graphrag_toolkit.lexical_graph.storage.vector package</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../graphrag_toolkit.lexical_graph.utils.html">graphrag_toolkit.lexical_graph.utils package</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">FalkorDB Plugin API</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../falkordb/modules.html">falkordb</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle navigation of falkordb</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../falkordb/falkordb.html">falkordb package</a></li>
</ul>
</li>
</ul>

</div></div>
      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          

<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" id="toc-menu-open-md" for="__toc" tabindex="0">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="indexing">
<h1>Indexing<a class="headerlink" href="#indexing" title="Link to this heading">¶</a></h1>
<section id="topics">
<h2>Topics<a class="headerlink" href="#topics" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="overview.html"><span class="doc std std-doc">Overview</span></a></p>
<ul>
<li><p><a class="reference internal" href="../../graphrag_toolkit.lexical_graph.html#graphrag_toolkit.lexical_graph.lexical_graph_index.LexicalGraphIndex.extract" title="graphrag_toolkit.lexical_graph.lexical_graph_index.LexicalGraphIndex.extract"><span class="xref myst py py-meth">Extract</span></a></p></li>
<li><p><a class="reference internal" href="../../graphrag_toolkit.lexical_graph.html#graphrag_toolkit.lexical_graph.lexical_graph_index.LexicalGraphIndex.build" title="graphrag_toolkit.lexical_graph.lexical_graph_index.LexicalGraphIndex.build"><span class="xref myst py py-meth">Build</span></a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#using-the-lexicalgraphindex-to-construct-a-graph"><span class="xref myst">Using the LexicalGraphIndex to construct a graph</span></a></p>
<ul>
<li><p><a class="reference internal" href="#continous-ingest"><span class="xref myst">Continous ingest</span></a></p></li>
<li><p><a class="reference internal" href="#run-the-extract-and-build-stages-separately"><span class="xref myst">Run the extract and build stages separately</span></a></p></li>
<li><p><a class="reference internal" href="#configuring-the-extract-and-build-stages"><span class="xref myst">Configuring the extract and build stages</span></a></p></li>
<li><p><a class="reference internal" href="#custom-prompts"><span class="xref myst">Custom prompts</span></a></p></li>
<li><p><a class="reference internal" href="batch-extraction.html"><span class="doc std std-doc">Batch extraction</span></a></p></li>
<li><p><a class="reference internal" href="metadata-filtering.html"><span class="doc std std-doc">Metadata filtering</span></a></p></li>
<li><p><a class="reference internal" href="#checkpoints"><span class="xref myst">Checkpoints</span></a></p></li>
</ul>
</li>
</ul>
</section>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Link to this heading">¶</a></h2>
<p>There are two stages to indexing: extract, and build. The lexical-graph uses separate pipelines for each of these stages, plus micro-batching, to provide a continous ingest capability. This means that your graph will start being populated soon after extraction begins.</p>
<p>You can run the extract and build pipelines together, to provide for the continuous ingest described above. Or you can run the two pipelines separately, extracting first to file-based chunks, and then later building a graph from these chunks.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">LexicalGraphIndex</span></code> allows you to run the extract and build pipelines together or separately. See the <a class="reference internal" href="#using-the-lexicalgraphindex-to-construct-a-graph"><span class="xref myst">Using the LexicalGraphIndex to construct a graph</span></a> section below.</p>
<p>Indexing supports <a class="reference internal" href="multi-tenancy.html"><span class="std std-doc">multi-tenancy</span></a>, whereby you can store separate lexical graphs in the same backend graph and vector stores.</p>
<section id="code-examples">
<h3>Code examples<a class="headerlink" href="#code-examples" title="Link to this heading">¶</a></h3>
<p>The code examples here are formatted to run in a Jupyter notebook. If you’re building an application with a main entry point, put your application logic inside a method, and add an <a class="reference internal" href="faq.html#runtimeerror-please-use-nest_asyncioapply-to-allow-nested-event-loops"><span class="std std-ref"><code class="docutils literal notranslate"><span class="pre">if</span> <span class="pre">__name__</span> <span class="pre">==</span> <span class="pre">'__main__'</span></code> block</span></a>.</p>
</section>
<section id="extract">
<h3>Extract<a class="headerlink" href="#extract" title="Link to this heading">¶</a></h3>
<p>The extraction stage is, by default, a three-step process:</p>
<ol class="arabic simple">
<li><p>The source documents are broken down into chunks.</p></li>
<li><p>For each chunk, an LLM extracts a set of propositions from the unstructured content. This proposition extraction helps ‘clean’ the content and improve the subsequent entity/topic/statement/fact extraction by breaking complex sentences into simpler sentences, replacing pronouns with specific names, and replacing acronyms where possible. These propositions are added to the chunk’s metadata under the <code class="docutils literal notranslate"><span class="pre">aws::graph::propositions</span></code> key.</p></li>
<li><p>Following the proposition extraction, a second LLM call extracts entities, relations, topics, statements and facts from the set of extracted propositions. These details are added to the chunk’s metadata under the <code class="docutils literal notranslate"><span class="pre">aws::graph::topics</span></code> key.</p></li>
</ol>
<p>Only the third step here is mandatory. If your source data has already been chunked, you can omit step 1. If you’re willing to trade a reduction in LLM calls and improved performance for a reduction in the quality of the entity/topic/statement/fact extraction, you can omit step 2.</p>
<p>Extraction uses a lightly guided strategy whereby the extraction process is seeded with a list of preferred entity classifications. The LLM is instructed to use an existing classification from the list before creating new ones. Any new classifications introduced by the LLM are then carried forward to subsequent invocations. This approach reduces but doesn’t eliminate unwanted variations in entity classification.</p>
<p>The list of <code class="docutils literal notranslate"><span class="pre">DEFAULT_ENTITY_CLASSIFICATIONS</span></code> used to seed the extraction process can be found <a class="reference external" href="https://github.com/awslabs/graphrag-toolkit/blob/main/src/graphrag_toolkit/indexing/constants.py">here</a>. If these classifications are not appropriate to your workload you can replace them (see the <a class="reference internal" href="#configuring-the-extract-and-build-stages"><span class="xref myst">Configuring the extract and build stages</span></a> section below).</p>
<p>Relationship values are currently unguided (though relatively concise).</p>
</section>
<section id="build">
<h3>Build<a class="headerlink" href="#build" title="Link to this heading">¶</a></h3>
<p>In the build stage, the LlamaIndex chunk nodes emitted from the extract stage are broken down further into a stream of individual source, chunk, topic, statement and fact LlamaIndex nodes. Graph construction and vector indexing handlers process these nodes to build and index the graph content. Each of these nodes has an <code class="docutils literal notranslate"><span class="pre">aws::graph::index</span></code> metadata item containing data that can be used to index the node in a vector store (though only the chunk and statement nodes are actually indexed in the current implementation).</p>
</section>
</section>
<section id="using-the-lexicalgraphindex-to-construct-a-graph">
<h2>Using the LexicalGraphIndex to construct a graph<a class="headerlink" href="#using-the-lexicalgraphindex-to-construct-a-graph" title="Link to this heading">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">LexicalGraphIndex</span></code> provides a convenient means of constructing a graph – via either continuous ingest, or separate extract and build stages. When constructing a <code class="docutils literal notranslate"><span class="pre">LexicalGraphIndex</span></code> you must supply a graph store and a vector store (see <a class="reference internal" href="storage-model.html"><span class="std std-doc">Storage Model</span></a> for more details). In the examples below, the graph store and vector store connection strings are fetched from environment variables.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">LexicalGraphIndex</span></code> constructor has an <code class="docutils literal notranslate"><span class="pre">extraction_dir</span></code> named argument. This is the path to a local directory to which intermediate artefacts (such as <a class="reference internal" href="#checkpoints"><span class="xref myst">checkpoints</span></a>) will be written. By default, the vaue of <code class="docutils literal notranslate"><span class="pre">extraction_dir</span></code> is set to ‘output’.</p>
<section id="continous-ingest">
<h3>Continous ingest<a class="headerlink" href="#continous-ingest" title="Link to this heading">¶</a></h3>
<p>Use <code class="docutils literal notranslate"><span class="pre">LexicalGraphIndex.extract_and_build()</span></code> to extract and build a graph in a manner that supports continous ingest.</p>
<p>The extraction stage consumes LlamaIndex nodes – either documents, which will be chunked during extraction, or pre-chunked text nodes. Use a LlamaIndex reader to <a class="reference external" href="https://docs.llamaindex.ai/en/stable/understanding/loading/loading/">load source documents</a>. The example below uses a LlamaIndex <code class="docutils literal notranslate"><span class="pre">SimpleWebReader</span></code> to load several HTML pages.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">os</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">graphrag_toolkit.lexical_graph</span><span class="w"> </span><span class="kn">import</span> <span class="n">LexicalGraphIndex</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">graphrag_toolkit.lexical_graph.storage</span><span class="w"> </span><span class="kn">import</span> <span class="n">GraphStoreFactory</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">graphrag_toolkit.lexical_graph.storage</span><span class="w"> </span><span class="kn">import</span> <span class="n">VectorStoreFactory</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">llama_index.readers.web</span><span class="w"> </span><span class="kn">import</span> <span class="n">SimpleWebPageReader</span>

<span class="n">doc_urls</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;https://docs.aws.amazon.com/neptune/latest/userguide/intro.html&#39;</span><span class="p">,</span>
    <span class="s1">&#39;https://docs.aws.amazon.com/neptune-analytics/latest/userguide/what-is-neptune-analytics.html&#39;</span><span class="p">,</span>
    <span class="s1">&#39;https://docs.aws.amazon.com/neptune-analytics/latest/userguide/neptune-analytics-features.html&#39;</span><span class="p">,</span>
    <span class="s1">&#39;https://docs.aws.amazon.com/neptune-analytics/latest/userguide/neptune-analytics-vs-neptune-database.html&#39;</span>
<span class="p">]</span>

<span class="n">docs</span> <span class="o">=</span> <span class="n">SimpleWebPageReader</span><span class="p">(</span>
    <span class="n">html_to_text</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">metadata_fn</span><span class="o">=</span><span class="k">lambda</span> <span class="n">url</span><span class="p">:{</span><span class="s1">&#39;url&#39;</span><span class="p">:</span> <span class="n">url</span><span class="p">}</span>
<span class="p">)</span><span class="o">.</span><span class="n">load_data</span><span class="p">(</span><span class="n">doc_urls</span><span class="p">)</span>

<span class="n">graph_store</span> <span class="o">=</span> <span class="n">GraphStoreFactory</span><span class="o">.</span><span class="n">for_graph_store</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;GRAPH_STORE&#39;</span><span class="p">])</span>
<span class="n">vector_store</span> <span class="o">=</span> <span class="n">VectorStoreFactory</span><span class="o">.</span><span class="n">for_vector_store</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;VECTOR_STORE&#39;</span><span class="p">])</span>

<span class="n">graph_index</span> <span class="o">=</span> <span class="n">LexicalGraphIndex</span><span class="p">(</span>
    <span class="n">graph_store</span><span class="p">,</span> 
    <span class="n">vector_store</span>
<span class="p">)</span>

<span class="n">graph_index</span><span class="o">.</span><span class="n">extract_and_build</span><span class="p">(</span><span class="n">docs</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="run-the-extract-and-build-stages-separately">
<h3>Run the extract and build stages separately<a class="headerlink" href="#run-the-extract-and-build-stages-separately" title="Link to this heading">¶</a></h3>
<p>Using the <code class="docutils literal notranslate"><span class="pre">LexicalGraphIndex</span></code> you can perform the extract and build stages separately. This is useful if you want to extract the graph once, and then build it multiple times (in different environments, for example.)</p>
<p>When you run the extract and build stages separately, you can persist the extracted documents to Amazon S3 or to the filesystem at the end of the extract stage, and then consume these same documents in the build stage. Use the graphrag-toolkit’s <code class="docutils literal notranslate"><span class="pre">S3BasedDocss</span></code> and <code class="docutils literal notranslate"><span class="pre">FileBasedDocs</span></code> classes to persist and then retrieve JSON-serialized LlamaIndex nodes.</p>
<p>The following example shows how to use a <code class="docutils literal notranslate"><span class="pre">S3BasedDocs</span></code> handler to persist extracted documents to an Amazon S3 bucket at the end of the extract stage:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">graphrag_toolkit.lexical_graph</span><span class="w"> </span><span class="kn">import</span> <span class="n">LexicalGraphIndex</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">graphrag_toolkit.lexical_graph.storage</span><span class="w"> </span><span class="kn">import</span> <span class="n">GraphStoreFactory</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">graphrag_toolkit.lexical_graph.storage</span><span class="w"> </span><span class="kn">import</span> <span class="n">VectorStoreFactory</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">graphrag_toolkit.lexical_graph.indexing.load</span><span class="w"> </span><span class="kn">import</span> <span class="n">S3BasedDocs</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">llama_index.readers.web</span><span class="w"> </span><span class="kn">import</span> <span class="n">SimpleWebPageReader</span>

<span class="n">extracted_docs</span> <span class="o">=</span> <span class="n">S3BasedDocs</span><span class="p">(</span>
    <span class="n">region</span><span class="o">=</span><span class="s1">&#39;us-east-1&#39;</span><span class="p">,</span>
    <span class="n">bucket_name</span><span class="o">=</span><span class="s1">&#39;my-bucket&#39;</span><span class="p">,</span>
    <span class="n">key_prefix</span><span class="o">=</span><span class="s1">&#39;extracted&#39;</span><span class="p">,</span>
    <span class="n">collection_id</span><span class="o">=</span><span class="s1">&#39;12345&#39;</span><span class="p">,</span>
    <span class="n">s3_encryption_key_id</span><span class="o">=</span><span class="s1">&#39;arn:aws:kms:us-east-1:222222222222:key/99169dcb-12ce-4493-942b-1523125d7339&#39;</span>
<span class="p">)</span>

<span class="n">graph_store</span> <span class="o">=</span> <span class="n">GraphStoreFactory</span><span class="o">.</span><span class="n">for_graph_store</span><span class="p">(</span><span class="n">graph_store_info</span><span class="p">)</span>
<span class="n">vector_store</span> <span class="o">=</span> <span class="n">VectorStoreFactory</span><span class="o">.</span><span class="n">for_vector_store</span><span class="p">(</span><span class="n">vector_store_info</span><span class="p">)</span>

<span class="n">graph_index</span> <span class="o">=</span> <span class="n">LexicalGraphIndex</span><span class="p">(</span>
    <span class="n">graph_store</span><span class="p">,</span> 
    <span class="n">vector_store</span>
<span class="p">)</span>

<span class="n">doc_urls</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;https://docs.aws.amazon.com/neptune/latest/userguide/intro.html&#39;</span><span class="p">,</span>
    <span class="s1">&#39;https://docs.aws.amazon.com/neptune-analytics/latest/userguide/what-is-neptune-analytics.html&#39;</span><span class="p">,</span>
    <span class="s1">&#39;https://docs.aws.amazon.com/neptune-analytics/latest/userguide/neptune-analytics-features.html&#39;</span><span class="p">,</span>
    <span class="s1">&#39;https://docs.aws.amazon.com/neptune-analytics/latest/userguide/neptune-analytics-vs-neptune-database.html&#39;</span>
<span class="p">]</span>

<span class="n">docs</span> <span class="o">=</span> <span class="n">SimpleWebPageReader</span><span class="p">(</span>
    <span class="n">html_to_text</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">metadata_fn</span><span class="o">=</span><span class="k">lambda</span> <span class="n">url</span><span class="p">:{</span><span class="s1">&#39;url&#39;</span><span class="p">:</span> <span class="n">url</span><span class="p">}</span>
<span class="p">)</span><span class="o">.</span><span class="n">load_data</span><span class="p">(</span><span class="n">doc_urls</span><span class="p">)</span>

<span class="n">graph_index</span><span class="o">.</span><span class="n">extract</span><span class="p">(</span><span class="n">docs</span><span class="p">,</span> <span class="n">handler</span><span class="o">=</span><span class="n">extracted_docs</span><span class="p">)</span>
</pre></div>
</div>
<p>Following the extract stage, you can then build the graph from the previously extracted documents. Whereas in the extract stage the <code class="docutils literal notranslate"><span class="pre">S3BasedDocs</span></code> object acted as a handler to persist extracted documents, in the build stage the <code class="docutils literal notranslate"><span class="pre">S3BasedDocs</span></code> object acts as a source of LlamaIndex nodes, and is thus passed as the first argument to the <code class="docutils literal notranslate"><span class="pre">build()</span></code> method:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">graphrag_toolkit.lexical_graph</span><span class="w"> </span><span class="kn">import</span> <span class="n">LexicalGraphIndex</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">graphrag_toolkit.lexical_graph.storage</span><span class="w"> </span><span class="kn">import</span> <span class="n">GraphStoreFactory</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">graphrag_toolkit.lexical_graph.storage</span><span class="w"> </span><span class="kn">import</span> <span class="n">VectorStoreFactory</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">graphrag_toolkit.lexical_graph.indexing.load</span><span class="w"> </span><span class="kn">import</span> <span class="n">S3BasedDocs</span>

<span class="n">docs</span> <span class="o">=</span> <span class="n">S3BasedDocs</span><span class="p">(</span>
    <span class="n">region</span><span class="o">=</span><span class="s1">&#39;us-east-1&#39;</span><span class="p">,</span>
    <span class="n">bucket_name</span><span class="o">=</span><span class="s1">&#39;my-bucket&#39;</span><span class="p">,</span>
    <span class="n">key_prefix</span><span class="o">=</span><span class="s1">&#39;extracted&#39;</span><span class="p">,</span>
    <span class="n">collection_id</span><span class="o">=</span><span class="s1">&#39;12345&#39;</span><span class="p">,</span>
    <span class="n">s3_encryption_key_id</span><span class="o">=</span><span class="s1">&#39;arn:aws:kms:us-east-1:222222222222:key/99169dcb-12ce-4493-942b-1523125d7339&#39;</span>
<span class="p">)</span>

<span class="n">graph_store</span> <span class="o">=</span> <span class="n">GraphStoreFactory</span><span class="o">.</span><span class="n">for_graph_store</span><span class="p">(</span><span class="n">graph_store_info</span><span class="p">)</span>
<span class="n">vector_store</span> <span class="o">=</span> <span class="n">VectorStoreFactory</span><span class="o">.</span><span class="n">for_vector_store</span><span class="p">(</span><span class="n">vector_store_info</span><span class="p">)</span>

<span class="n">graph_index</span> <span class="o">=</span> <span class="n">LexicalGraphIndex</span><span class="p">(</span>
    <span class="n">graph_store</span><span class="p">,</span> 
    <span class="n">vector_store</span>
<span class="p">)</span>

<span class="n">graph_index</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="n">docs</span><span class="p">)</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">S3BasedDocs</span></code> object has the following parameters:</p>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Mandatory</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">region</span></code></p></td>
<td><p>AWS Region in which the S3 bucket is located (e.g. <code class="docutils literal notranslate"><span class="pre">us-east-1</span></code>)</p></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">bucket_name</span></code></p></td>
<td><p>Amazon S3 bucket name</p></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">key_prefix</span></code></p></td>
<td><p>S3 key prefix</p></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">collection_id</span></code></p></td>
<td><p>Id for a particular collection of extracted documents. Optional: if no <code class="docutils literal notranslate"><span class="pre">collection_id</span></code> is supplied, the lexical-graph will create a timestamp value. Extracted documents will be written to <code class="docutils literal notranslate"><span class="pre">s3://&lt;bucket&gt;/&lt;key_prefix&gt;/&lt;collection_id&gt;/</span></code>.</p></td>
<td><p>No</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">s3_encryption_key_id</span></code></p></td>
<td><p>KMS key id (Key ID, Key ARN, or Key Alias) to use for object encryption. Optional: if no <code class="docutils literal notranslate"><span class="pre">s3_encryption_key_id</span></code> is supplied, the lexical-graph will encrypt objects in S3 using Amazon S3 managed keys.</p></td>
<td><p>No</p></td>
</tr>
</tbody>
</table>
</div>
<p>If you use Amazon Web Services KMS keys to encrypt objects in S3, the identity under which the lexical-graph runs should include the following IAM policy. Replace <code class="docutils literal notranslate"><span class="pre">&lt;kms-key-arn&gt;</span></code> with the ARN of the KMS key you want to use to encrypt objects:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;Version&quot;</span><span class="p">:</span> <span class="s2">&quot;2012-10-17&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Statement&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;Action&quot;</span><span class="p">:</span> <span class="p">[</span>
            	<span class="s2">&quot;kms:GenerateDataKey&quot;</span><span class="p">,</span>
            	<span class="s2">&quot;kms:Decrypt&quot;</span>
            <span class="p">],</span>
            <span class="s2">&quot;Resource&quot;</span><span class="p">:</span> <span class="p">[</span>
            	<span class="s2">&quot;&lt;kms-key-arn&gt;&quot;</span>
            <span class="p">],</span>
            <span class="s2">&quot;Effect&quot;</span><span class="p">:</span> <span class="s2">&quot;Allow&quot;</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>If you want to persist extracted documents to the local filesystem instead of an S3 bucket, use a <code class="docutils literal notranslate"><span class="pre">FileBasedDocs</span></code> object instead:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">graphrag_toolkit.lexical_graph.indexing.load</span><span class="w"> </span><span class="kn">import</span> <span class="n">FileBasedDocs</span>

<span class="n">chunks</span> <span class="o">=</span> <span class="n">FileBasedDocs</span><span class="p">(</span>
    <span class="n">docs_directory</span><span class="o">=</span><span class="s1">&#39;./extracted/&#39;</span><span class="p">,</span>
    <span class="n">collection_id</span><span class="o">=</span><span class="s1">&#39;12345&#39;</span>
<span class="p">)</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">FileBasedChunks</span></code> object has the following parameters:</p>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Mandatory</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">docs_directory</span></code></p></td>
<td><p>Root directory for the extracted documents</p></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">collection_id</span></code></p></td>
<td><p>Id for a particular collection of extracted documents. Optional: if no <code class="docutils literal notranslate"><span class="pre">collection_id</span></code> is supplied, the lexical-graph will create a timestamp value. Extracted documents will be written to <code class="docutils literal notranslate"><span class="pre">/&lt;docs_directory&gt;/&lt;collection_id&gt;/</span></code>.</p></td>
<td><p>No</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="configuring-the-extract-and-build-stages">
<h3>Configuring the extract and build stages<a class="headerlink" href="#configuring-the-extract-and-build-stages" title="Link to this heading">¶</a></h3>
<p>You can configure the number of workers and batch sizes for the extract and build stages of the <code class="docutils literal notranslate"><span class="pre">LexicalGraphIndex</span></code> using the <code class="docutils literal notranslate"><span class="pre">GraphRAGConfig</span></code> object. See <a class="reference internal" href="configuration.html"><span class="std std-doc">Configuration</span></a> for more details on using the configuration object.</p>
<p>Besides configuring the workers and batch sizes, you can also configure the indexing process with regard to chunking, proposition extraction and entity classification, and graph and vector store contents by passing an instance of <code class="docutils literal notranslate"><span class="pre">IndexingConfig</span></code> to the <code class="docutils literal notranslate"><span class="pre">LexicalGraphIndex</span></code> constructor:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">graphrag_toolkit.lexical_graph</span><span class="w"> </span><span class="kn">import</span> <span class="n">LexicalGraphIndex</span><span class="p">,</span> <span class="n">IndexingConfig</span><span class="p">,</span> <span class="n">ExtractionConfig</span>

<span class="o">...</span>

<span class="n">graph_index</span> <span class="o">=</span> <span class="n">LexicalGraphIndex</span><span class="p">(</span>
    <span class="n">graph_store</span><span class="p">,</span> 
    <span class="n">vector_store</span><span class="p">,</span>
    <span class="n">indexing_config</span> <span class="o">=</span> <span class="n">IndexingConfig</span><span class="p">(</span>
      <span class="n">chunking</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
      <span class="n">extraction</span><span class="o">=</span><span class="n">ExtractionConfig</span><span class="p">(</span>
        <span class="n">enable_proposition_extraction</span><span class="o">=</span><span class="kc">False</span>
      <span class="p">)</span>
      
    <span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">IndexingConfig</span></code> object has the following parameters:</p>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default Value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">chunking</span></code></p></td>
<td><p>A list of node parsers (e.g. LlamaIndex <code class="docutils literal notranslate"><span class="pre">SentenceSplitter</span></code>) to be used for chunking source documents. Set <code class="docutils literal notranslate"><span class="pre">chunking</span></code> to <code class="docutils literal notranslate"><span class="pre">None</span></code> to skip chunking.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">SentenceSplitter</span></code> with <code class="docutils literal notranslate"><span class="pre">chunk_size=256</span></code> and <code class="docutils literal notranslate"><span class="pre">chunk_overlap=20</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">extraction</span></code></p></td>
<td><p>An <code class="docutils literal notranslate"><span class="pre">ExtractionConfig</span></code> object specifying extraction options</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">ExtractionConfig</span></code> with default values</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">batch_config</span></code></p></td>
<td><p>Batch configuration to be used if performing <a class="reference internal" href="batch-extraction.html"><span class="std std-doc">batch extraction</span></a>. If <code class="docutils literal notranslate"><span class="pre">batch_config</span></code> is <code class="docutils literal notranslate"><span class="pre">None</span></code>, the toolkit will perform chunk-by-chunk extraction.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p></td>
</tr>
</tbody>
</table>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">ExtractionConfig</span></code> object has the following parameters:</p>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default Value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">enable_proposition_extraction</span></code></p></td>
<td><p>Perform proposition extraction before extracting topics, statements, facts and entities</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">True</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">preferred_entity_classifications</span></code></p></td>
<td><p>Comma-separated list of preferred entity classifications used to seed the entity extraction</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">DEFAULT_ENTITY_CLASSIFICATIONS</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">infer_entity_classifications</span></code></p></td>
<td><p>Determines whether to pre-process documents to identify significant domain entity classifications. Supply either <code class="docutils literal notranslate"><span class="pre">True</span></code> or <code class="docutils literal notranslate"><span class="pre">False</span></code>, or an <code class="docutils literal notranslate"><span class="pre">InferClassificationsConfig</span></code> object.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">False</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">extract_propositions_prompt_template</span></code></p></td>
<td><p>Prompt used to extract propositions from chunks. If <code class="docutils literal notranslate"><span class="pre">None</span></code>, the <a class="reference external" href="https://github.com/awslabs/graphrag-toolkit/blob/main/lexical-graph/src/graphrag_toolkit/lexical_graph/indexing/prompts.py#L29-L72">default extract propositions template</a> is used. See <a class="reference internal" href="#custom-prompts"><span class="xref myst">Custom prompts</span></a> below.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">extract_topics_prompt_template</span></code></p></td>
<td><p>Prompt used to extract topics, statements and entities from chunks. If <code class="docutils literal notranslate"><span class="pre">None</span></code>, the <a class="reference external" href="https://github.com/awslabs/graphrag-toolkit/blob/main/lexical-graph/src/graphrag_toolkit/lexical_graph/indexing/prompts.py#L74-L191">default extract topics template</a> is used. See <a class="reference internal" href="#custom-prompts"><span class="xref myst">Custom prompts</span></a> below.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p></td>
</tr>
</tbody>
</table>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">InferClassificationsConfig</span></code> object has the following parameters:</p>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default Value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">num_iterations</span></code></p></td>
<td><p>Number of times to run the pre-processing over the source documents</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">num_samples</span></code></p></td>
<td><p>Number of chunks (selected at random) from which classifications are extracted per iteration</p></td>
<td><p>5</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">prompt_template</span></code></p></td>
<td><p>Prompt used to extract classifications from sampled chunks. If <code class="docutils literal notranslate"><span class="pre">None</span></code>, the <a class="reference external" href="https://github.com/awslabs/graphrag-toolkit/blob/main/lexical-graph/src/graphrag_toolkit/lexical_graph/indexing/prompts.py#L4-L27">default domain entity classifications template</a> is used. See <a class="reference internal" href="#custom-prompts"><span class="xref myst">Custom prompts</span></a> below.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="custom-prompts">
<h3>Custom prompts<a class="headerlink" href="#custom-prompts" title="Link to this heading">¶</a></h3>
<p>The extract stage uses up to three LLM prompts:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/awslabs/graphrag-toolkit/blob/main/lexical-graph/src/graphrag_toolkit/lexical_graph/indexing/prompts.py#L4-L27"><strong>Domain entity classifications:</strong></a> Extracts significant domain entity classifications from a sample of source documents prior to processing the documents. These classificatiosn are then supplied to the extract topics prompt as the list of preferred entity classifications.</p></li>
<li><p><a class="reference external" href="https://github.com/awslabs/graphrag-toolkit/blob/main/lexical-graph/src/graphrag_toolkit/lexical_graph/indexing/prompts.py#L29-L72"><strong>Extract propositions:</strong></a> Extracts a set of standalone, well-formed propositions from a chunk.</p></li>
<li><p><a class="reference external" href="https://github.com/awslabs/graphrag-toolkit/blob/main/lexical-graph/src/graphrag_toolkit/lexical_graph/indexing/prompts.py#L74-L191"><strong>Extract topics:</strong></a> Extracts topics, statements and entities and their relations from either a set of propositions, or from the raw chunk text.</p></li>
</ul>
<p>Using the <code class="docutils literal notranslate"><span class="pre">ExtractionConfig</span></code> and <code class="docutils literal notranslate"><span class="pre">InferClassificationsConfig</span></code> you can customize one or more of these prompts.</p>
<p><strong>Domain entity classifications:</strong></p>
<p>The prompt template should included a <code class="docutils literal notranslate"><span class="pre">{text_chunks}</span></code> placeholder, into which the sampled chunks will be inserted.</p>
<p>The template should return classifications in the following format:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">entity_classifications</span><span class="o">&gt;</span>
<span class="n">Classification1</span>
<span class="n">Classification2</span>
<span class="n">Classification3</span>
<span class="o">&lt;/</span><span class="n">entity_classifications</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Extract propositions:</strong></p>
<p>The prompt template should include a <code class="docutils literal notranslate"><span class="pre">{text}</span></code> placeholder, into which the chunk text will be inserted.</p>
<p>The template should return propositions in the following format:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">proposition</span>
<span class="n">proposition</span>
<span class="n">proposition</span>
</pre></div>
</div>
<p><strong>Extract topics:</strong></p>
<p>The prompt template should include a <code class="docutils literal notranslate"><span class="pre">{text}</span></code> placeholder, into which a set of propositions (or the raw chunk text) will be inserted, a <code class="docutils literal notranslate"><span class="pre">{preferred_topics}</span></code> placeholder, into which a list of topics will be inserted, and a <code class="docutils literal notranslate"><span class="pre">{preferred_entity_classifications}</span></code> placeholder, into which a liist of entity classifications will be inserted.</p>
<p>The template should return extracted topics, statements, entities and relations in the following format:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">topic</span><span class="p">:</span> <span class="n">topic</span>

  <span class="n">entities</span><span class="p">:</span>
    <span class="n">entity</span><span class="o">|</span><span class="n">classification</span>
    <span class="n">entity</span><span class="o">|</span><span class="n">classification</span>
  
  <span class="n">proposition</span><span class="p">:</span> <span class="p">[</span><span class="n">exact</span> <span class="n">proposition</span> <span class="n">text</span><span class="p">]</span>      
    <span class="n">entity</span><span class="o">-</span><span class="n">attribute</span> <span class="n">relationships</span><span class="p">:</span>
    <span class="n">entity</span><span class="o">|</span><span class="n">RELATIONSHIP</span><span class="o">|</span><span class="n">attribute</span>
    <span class="n">entity</span><span class="o">|</span><span class="n">RELATIONSHIP</span><span class="o">|</span><span class="n">attribute</span>
    
    <span class="n">entity</span><span class="o">-</span><span class="n">entity</span> <span class="n">relationships</span><span class="p">:</span>
    <span class="n">entity</span><span class="o">|</span><span class="n">RELATIONSHIP</span><span class="o">|</span><span class="n">entity</span>
    <span class="n">entity</span><span class="o">|</span><span class="n">RELATIONSHIP</span><span class="o">|</span><span class="n">entity</span>
    
  <span class="n">proposition</span><span class="p">:</span> <span class="p">[</span><span class="n">exact</span> <span class="n">proposition</span> <span class="n">text</span><span class="p">]</span>    
    <span class="n">entity</span><span class="o">-</span><span class="n">attribute</span> <span class="n">relationships</span><span class="p">:</span>
    <span class="n">entity</span><span class="o">|</span><span class="n">RELATIONSHIP</span><span class="o">|</span><span class="n">attribute</span>
    <span class="n">entity</span><span class="o">|</span><span class="n">RELATIONSHIP</span><span class="o">|</span><span class="n">attribute</span>
    
    <span class="n">entity</span><span class="o">-</span><span class="n">entity</span> <span class="n">relationships</span><span class="p">:</span>
    <span class="n">entity</span><span class="o">|</span><span class="n">RELATIONSHIP</span><span class="o">|</span><span class="n">entity</span>
    <span class="n">entity</span><span class="o">|</span><span class="n">RELATIONSHIP</span><span class="o">|</span><span class="n">entity</span>
</pre></div>
</div>
</section>
<section id="batch-extraction">
<h3>Batch extraction<a class="headerlink" href="#batch-extraction" title="Link to this heading">¶</a></h3>
<p>You can use <a class="reference external" href="https://docs.aws.amazon.com/bedrock/latest/userguide/batch-inference.html">Amazon Bedrock batch inference</a> with the extract stage of the indexing process. See <a class="reference internal" href="batch-extraction.html"><span class="std std-doc">Batch Extraction</span></a> for more details.</p>
</section>
<section id="metadata-filtering">
<h3>Metadata filtering<a class="headerlink" href="#metadata-filtering" title="Link to this heading">¶</a></h3>
<p>You can add metadata to source documents on ingest, and then use this metadata to filter documents during the extract and build stages. Source metadata is also used for metadata filtering when querying a lexical graph. See the <a class="reference internal" href="metadata-filtering.html"><span class="std std-doc">Metadata Filtering</span></a> section for more details.</p>
</section>
<section id="checkpoints">
<h3>Checkpoints<a class="headerlink" href="#checkpoints" title="Link to this heading">¶</a></h3>
<p>The lexical-graph retries upsert operations and calls to LLMs and embedding models that don’t succeed. However, failures can still happen. If an extract or build stage fails partway through, you typically don’t want to reprocess chunks that have successfully made their way through the entire graph construction pipeline.</p>
<p>To avoid having to reprocess chunks that have been successfully processed in a previous run, provide a <code class="docutils literal notranslate"><span class="pre">Checkpoint</span></code> instance to the <code class="docutils literal notranslate"><span class="pre">extract_and_build()</span></code>, <code class="docutils literal notranslate"><span class="pre">extract()</span></code> and/or <code class="docutils literal notranslate"><span class="pre">build()</span></code> methods. A checkpoint adds a checkpoint <em>filter</em> to steps in the extract and build stages, and a checkpoint <em>writer</em> to the end of the build stage. When a chunk is emitted from the build stage, after having been successfully handled by both the graph construction <em>and</em> vector indexing handlers, its id will be written to a save point in the graph index <code class="docutils literal notranslate"><span class="pre">extraction_dir</span></code>. If a chunk with the same id is subsequently introduced into either the extract or build stage, it will be filtered out by the checkpoint filter.</p>
<p>The following example passes a checkpoint to the <code class="docutils literal notranslate"><span class="pre">extract_and_build()</span></code> method:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">graphrag_toolkit.lexical_graph.indexing.build</span><span class="w"> </span><span class="kn">import</span> <span class="n">Checkpoint</span>

<span class="n">checkpoint</span> <span class="o">=</span> <span class="n">Checkpoint</span><span class="p">(</span><span class="s1">&#39;my-checkpoint&#39;</span><span class="p">)</span>

<span class="o">...</span>

<span class="n">graph_index</span><span class="o">.</span><span class="n">extract_and_build</span><span class="p">(</span><span class="n">docs</span><span class="p">,</span> <span class="n">checkpoint</span><span class="o">=</span><span class="n">checkpoint</span><span class="p">)</span>
</pre></div>
</div>
<p>When you create a <code class="docutils literal notranslate"><span class="pre">Checkpoint</span></code>, you must give it a name. A checkpoint filter will only filter out chunks that were checkpointed by a checkpoint writer with the same name. If you use checkpoints when <a class="reference internal" href="#run-the-extract-and-build-stages-separately"><span class="xref myst">running separate extract and build processes</span></a>, ensure the checkpoints have different names. If you use the same name across separate extract and build processes, the build stage will ignore all the chunks created by the extract stage.</p>
<p>Checkpoints do not provide any transactional guarantees. If a chunk is successfully processed by the graph construction handlers, but then fails in a vector indexing handler, it will not make it to the end of the build pipeline, and so will not be checkpointed. If the build stage is restarted, the chunk will be reprocessed by both the graph construction and vector indexing handlers. For stores that support upserts (e.g. Amazon Neptune Database and Amazon Neptune Analytics) this is not an issue.</p>
<p>The lexical-graph does not clean up checkpoints. If you use checkpoints, periodically clean the checkpoint directory of old checkpoint files.</p>
</section>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="multi-tenancy.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Multi-Tenancy</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="metadata-filtering.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Metadata Filtering</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2025, Amazon Web Services, Inc
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
            
            <div class="legal-info">
                <a href="https://aws.amazon.com/privacy">Privacy</a> | 
                <a href="https://aws.amazon.com/terms">Site Terms</a> | 
                <a href="#" id="cookie-button-link">Cookie preferences</a>
            </div>
            
          </div>
          <div class="right-details">
            <div class="icons">
              <a class="muted-link " href="https://github.com/awslabs/graphrag-toolkit" aria-label="GitHub">
                <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path>
                </svg>
            </a>
              
            </div>
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="sidebar-div show-div-md justify-content-left">
            <label class="nav-close-icon" id="toc-menu-close" for="__toc" tabindex="0">
                <div class="visually-hidden">Toggle site table of content right sidebar</div>
                <i class="icon"><svg><use href="#svg-close"></use></svg></i>
            </label>
        </div>
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Indexing</a><ul>
<li><a class="reference internal" href="#topics">Topics</a></li>
<li><a class="reference internal" href="#overview">Overview</a><ul>
<li><a class="reference internal" href="#code-examples">Code examples</a></li>
<li><a class="reference internal" href="#extract">Extract</a></li>
<li><a class="reference internal" href="#build">Build</a></li>
</ul>
</li>
<li><a class="reference internal" href="#using-the-lexicalgraphindex-to-construct-a-graph">Using the LexicalGraphIndex to construct a graph</a><ul>
<li><a class="reference internal" href="#continous-ingest">Continous ingest</a></li>
<li><a class="reference internal" href="#run-the-extract-and-build-stages-separately">Run the extract and build stages separately</a></li>
<li><a class="reference internal" href="#configuring-the-extract-and-build-stages">Configuring the extract and build stages</a></li>
<li><a class="reference internal" href="#custom-prompts">Custom prompts</a></li>
<li><a class="reference internal" href="#batch-extraction">Batch extraction</a></li>
<li><a class="reference internal" href="#metadata-filtering">Metadata filtering</a></li>
<li><a class="reference internal" href="#checkpoints">Checkpoints</a></li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../../_static/documentation_options.js?v=f731707b"></script>
    <script src="../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/scripts/furo.js?v=5fa4622c"></script>
    <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../_static/copybutton.js?v=f281be69"></script>
    <script src="../../_static/js/custom.js?v=3ea019ec"></script>
    </body>
</html>